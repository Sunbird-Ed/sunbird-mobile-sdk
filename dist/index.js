!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return function(r){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=r,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=187)}([function(t,e,r){"use strict";var s=r(11),o=r(204),n=r(31),i=r(47),a=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(n,t){var i=this;if(t||(s.root.Rx&&s.root.Rx.config&&s.root.Rx.config.Promise?t=s.root.Rx.config.Promise:s.root.Promise&&(t=s.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;r=i.subscribe(function(t){if(r)try{n(t)}catch(t){e(t),r.unsubscribe()}else n(t)},e,t)})},r.prototype._subscribe=function(t){return this.source.subscribe(t)},r.prototype[n.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:i.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var n=this;if(t||(s.root.Rx&&s.root.Rx.config&&s.root.Rx.config.Promise?t=s.root.Rx.config.Promise:s.root.Promise&&(t=s.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();e.Observable=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=r(29),i=r(6),u=r(72),o=r(30),c=function(s){function i(t,e,r){switch(s.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!t){this.destination=u.empty;break}if("object"==typeof t){if((i=t)instanceof c||"syncErrorThrowable"in i&&i[o.rxSubscriber]){var n=t[o.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,(this.destination=n).add(this)}else this.syncErrorThrowable=!0,this.destination=new h(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new h(this,t,e,r)}var i}return n(i,s),i.prototype[o.rxSubscriber]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},i}(i.Subscription),h=function(o){function t(t,e,r,n){var i;o.call(this),this._parentSubscriber=t;var s=this;a.isFunction(e)?i=e:e&&(i=e.next,r=e.error,n=e.complete,e!==u.empty&&(s=Object.create(e),a.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=r,this._complete=n}return n(t,o),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(e.Subscriber=c)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(r(1).Subscriber);e.OuterSubscriber=i},function(t,e,r){"use strict";var l=r(11),f=r(74),p=r(75),d=r(70),y=r(0),v=r(18),b=r(213),g=r(31);e.subscribeToResult=function(t,e,r,n){var i=new b.InnerSubscriber(t,r,n);if(i.closed)return null;if(e instanceof y.Observable)return e._isScalar?(i.next(e.value),i.complete(),null):(i.syncErrorThrowable=!0,e.subscribe(i));if(f.isArrayLike(e)){for(var s=0,o=e.length;s<o&&!i.closed;s++)i.next(e[s]);i.closed||i.complete()}else{if(p.isPromise(e))return e.then(function(t){i.closed||(i.next(t),i.complete())},function(t){return i.error(t)}).then(null,function(t){l.root.setTimeout(function(){throw t})}),i;if(e&&"function"==typeof e[v.iterator])for(var a=e[v.iterator]();;){var u=a.next();if(u.done){i.complete();break}if(i.next(u.value),i.closed)break}else if(e&&"function"==typeof e[g.observable]){var c=e[g.observable]();if("function"==typeof c.subscribe)return c.subscribe(new b.InnerSubscriber(t,r,n));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h="You provided "+(d.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(h))}}return null}},function(t,e,r){"use strict";var n=r(23),i=r(24);e.async=new i.AsyncScheduler(n.AsyncAction)},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(192)),n(e(193)),n(e(194)),n(e(195)),n(e(69)),n(e(201))},function(t,e,r){"use strict";var h=r(13),l=r(70),f=r(29),p=r(9),d=r(8),y=r(71),n=function(){function n(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return n.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,a=n?n.length:0;r;)r.remove(this),r=++o<a&&n[o]||null;if(f.isFunction(i))p.tryCatch(i).call(this)===d.errorObject&&(e=!0,t=t||(d.errorObject.e instanceof y.UnsubscriptionError?v(d.errorObject.e.errors):[d.errorObject.e]));if(h.isArray(s))for(o=-1,a=s.length;++o<a;){var u=s[o];if(l.isObject(u))if(p.tryCatch(u.unsubscribe).call(u)===d.errorObject){e=!0,t=t||[];var c=d.errorObject.e;c instanceof y.UnsubscriptionError?t=t.concat(v(c.errors)):t.push(c)}}if(e)throw new y.UnsubscriptionError(t)}},n.prototype.add=function(t){if(!t||t===n.EMPTY)return n.EMPTY;if(t===this)return this;var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var r=e;(e=new n)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},n.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},n.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},n.EMPTY=((t=new n).closed=!0,t),n}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof y.UnsubscriptionError?e.errors:e)},[])}e.Subscription=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(1),o=r(6),a=r(32),u=r(73),c=r(30),h=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(s.Subscriber);e.SubjectSubscriber=h;var l=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[c.rxSubscriber]=function(){return new h(this)},t.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},t.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(t.complete(),o.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},t.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},t.create=function(t,e){return new f(t,e)},t}(i.Observable),f=function(r){function t(t,e){r.call(this),this.destination=t,this.source=e}return n(t,r),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.Subscription.EMPTY},t}(e.Subject=l);e.AnonymousSubject=f},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";var n,i=r(8);function s(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return n=t,s}},function(t,e,r){"use strict";var n=r(7);e.Subject=n.Subject,e.AnonymousSubject=n.AnonymousSubject;var i=r(0);e.Observable=i.Observable,r(205),r(208),r(211),r(214),r(217),r(220),r(222),r(225),r(226),r(229),r(232),r(234),r(237),r(240),r(245),r(246),r(247),r(250),r(251),r(253),r(256),r(259),r(262),r(265),r(267),r(269),r(271),r(277),r(279),r(281),r(283),r(285),r(287),r(289),r(291),r(293),r(295),r(297),r(299),r(301),r(303),r(305),r(307),r(309),r(311),r(313),r(315),r(318),r(320),r(322),r(324),r(326),r(328),r(330),r(332),r(334),r(336),r(338),r(340),r(342),r(347),r(349),r(351),r(353),r(355),r(357),r(359),r(361),r(363),r(365),r(367),r(369),r(371),r(373),r(375),r(377),r(379),r(381),r(383),r(385),r(387),r(389),r(392),r(394),r(396),r(398),r(400),r(402),r(404),r(406),r(408),r(410),r(412),r(414),r(416),r(418),r(420),r(422),r(424),r(426),r(428),r(430),r(432),r(434),r(436),r(438),r(447),r(449),r(451),r(453),r(455),r(457),r(459),r(461),r(463),r(465),r(466),r(468),r(470),r(472),r(474),r(475),r(477),r(479),r(481),r(483),r(485),r(487),r(489);var s=r(6);e.Subscription=s.Subscription;var o=r(1);e.Subscriber=o.Subscriber;var a=r(33);e.AsyncSubject=a.AsyncSubject;var u=r(40);e.ReplaySubject=u.ReplaySubject;var c=r(128);e.BehaviorSubject=c.BehaviorSubject;var h=r(122);e.ConnectableObservable=h.ConnectableObservable;var l=r(20);e.Notification=l.Notification;var f=r(41);e.EmptyError=f.EmptyError;var p=r(26);e.ArgumentOutOfRangeError=p.ArgumentOutOfRangeError;var d=r(32);e.ObjectUnsubscribedError=d.ObjectUnsubscribedError;var y=r(158);e.TimeoutError=y.TimeoutError;var v=r(71);e.UnsubscriptionError=v.UnsubscriptionError;var b=r(155);e.TimeInterval=b.TimeInterval;var g=r(63);e.Timestamp=g.Timestamp;var m=r(491);e.TestScheduler=m.TestScheduler;var S=r(171);e.VirtualTimeScheduler=S.VirtualTimeScheduler;var E=r(82);e.AjaxResponse=E.AjaxResponse,e.AjaxError=E.AjaxError,e.AjaxTimeoutError=E.AjaxTimeoutError;var w=r(47);e.pipe=w.pipe;var _=r(147),A=r(4),T=r(83),x=r(494),O=r(30),C=r(18),F=r(31),I=r(498);e.operators=I;var P={asap:_.asap,queue:T.queue,animationFrame:x.animationFrame,async:A.async};e.Scheduler=P;var N={rxSubscriber:O.rxSubscriber,observable:F.observable,iterator:C.iterator};e.Symbol=N},function(t,i,e){"use strict";(function(t){var e="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=e||void 0!==t&&t||r;i.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,e(28))},function(t,e,r){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),o=r(49),a=r(15),u=r(12),s=function(r){function s(t,e){r.call(this),this.array=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(s,r),s.create=function(t,e){return new s(t,e)},s.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];u.isScheduler(r)?t.pop():r=null;var n=t.length;return 1<n?new s(t,r):1===n?new o.ScalarObservable(t[0],r):new a.EmptyObservable(r)},s.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;n<=r?i.complete():(i.next(e[r]),i.closed||(t.index=r+1,this.schedule(t)))},s.prototype._subscribe=function(t){var e=this.array,r=e.length,n=this.scheduler;if(n)return n.schedule(s.dispatch,0,{array:e,index:0,count:r,subscriber:t});for(var i=0;i<r&&!t.closed;i++)t.next(e[i]);t.complete()},s}(i.Observable);e.ArrayObservable=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function r(t){e.call(this),this.scheduler=t}return n(r,e),r.create=function(t){return new r(t)},r.dispatch=function(t){t.subscriber.complete()},r.prototype._subscribe=function(t){var e=this.scheduler;if(e)return e.schedule(r.dispatch,0,{subscriber:t});t.complete()},r}(r(0).Observable);e.EmptyObservable=i},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(188)),n(e(189)),n(e(190)),n(e(191))},function(t,e,r){"use strict";var s=r(122);e.multicast=function(n,i){return function(t){var e;if(e="function"==typeof n?n:function(){return n},"function"==typeof i)return t.lift(new o(e,i));var r=Object.create(t,s.connectableObservableDescriptor);return r.source=t,r.subjectFactory=e,r}};var o=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(t);return i.add(e.subscribe(n)),i},t}();e.MulticastOperator=o},function(t,e,r){"use strict";var n=r(11);function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),s=0;s<i.length;++s){var o=i[s];if("entries"!==o&&"size"!==o&&n.prototype[o]===n.prototype.entries)return o}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(n.root),e.$$iterator=e.iterator},function(t,e,r){"use strict";var n=r(12),i=r(76),s=r(77),o=r(50);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&n.isScheduler(t[1])?s.from(t[0]):o.concatAll()(i.of.apply(void 0,t))}},function(t,e,r){"use strict";var n=r(0),i=function(){function e(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();e.Notification=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(3),i=r(2);e.mergeMap=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return"number"==typeof r&&(n=r,r=null),t.lift(new o(e,r,n))}};var o=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=o;var a=function(i){function t(t,e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,t),this.project=e,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,i),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){this.add(s.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},t.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(i)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);e.MergeMapSubscriber=a},function(t,e,r){"use strict";var n=r(13);e.isNumeric=function(t){return!n.isArray(t)&&0<=t-parseFloat(t)+1}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(11),s=function(r){function t(t,e){r.call(this,t,e),this.scheduler=t,this.pending=!1,this.work=e}return n(t,r),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),i.root.setInterval(t.flush.bind(t,this),r)},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;i.root.clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(r(243).Action);e.AsyncAction=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(r(244).Scheduler);e.AsyncScheduler=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.map=function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.project,this.thisArg))},t}();e.MapOperator=s;var o=function(n){function t(t,e,r){n.call(this,t),this.project=e,this.count=0,this.thisArg=r||this}return i(t,n),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.ArgumentOutOfRangeError=i},function(t,e,r){"use strict";var i=r(59),s=r(60),o=r(54),a=r(47);e.reduce=function(n,e){return 2<=arguments.length?function(t){return a.pipe(i.scan(n,e),s.takeLast(1),o.defaultIfEmpty(e))(t)}:function(t){return a.pipe(i.scan(function(t,e,r){return n(t,e,r+1)}),s.takeLast(1))(t)}}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";var n=r(11).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";var n=r(11);function i(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(n.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.ObjectUnsubscribedError=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(7),s=r(6),o=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return n(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),s.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.Subject);e.AsyncSubject=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(14),s=r(13),o=r(2),a=r(3),u={};e.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&s.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new i.ArrayObservable([t].concat(e)),new c(r))}};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}();e.CombineLatestOperator=c;var h=function(r){function t(t,e){r.call(this,t),this.project=e,this.active=0,this.values=[],this.observables=[]}return n(t,r),t.prototype._next=function(t){this.values.push(u),this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(a.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.values,o=s[r],a=this.toRespond?o===u?--this.toRespond:this.toRespond:0;s[r]=e,0===a&&(this.project?this._tryProject(s):this.destination.next(s.slice()))},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(o.OuterSubscriber);e.CombineLatestSubscriber=h},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(20);e.observeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=o;var a=function(n){function e(t,e,r){void 0===r&&(r=0),n.call(this,t),this.scheduler=e,this.delay=r}return i(e,n),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(n.Subscriber);e.ObserveOnSubscriber=a;var u=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=u},function(t,e,r){"use strict";var n=r(21),i=r(80);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,null,t)}},function(t,e,r){"use strict";var s=r(0),o=r(14),a=r(12),u=r(36);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return a.isScheduler(i)?(n=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof s.Observable?t[0]:u.mergeAll(r)(new o.ArrayObservable(t,n))}},function(t,e,r){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(14),s=r(13),o=r(1),a=r(2),u=r(3),c=r(18);function h(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),new n.ArrayObservable(t).lift(new l(r))}e.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(h.apply(void 0,[t].concat(e)))}},e.zipStatic=h;var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.project))},t}();e.ZipOperator=l;var f=function(n){function t(t,e,r){void 0===r&&(r=Object.create(null)),n.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof e?e:null,this.values=r}return i(t,n),t.prototype._next=function(t){var e=this.iterators;s.isArray(t)?e.push(new d(t)):"function"==typeof t[c.iterator]?e.push(new p(t[c.iterator]())):e.push(new y(this.destination,this,t))},t.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(o=t[n]).hasValue&&!o.hasValue())return}var i=!1,s=[];for(n=0;n<e;n++){var o,a=(o=t[n]).next();if(o.hasCompleted()&&(i=!0),a.done)return void r.complete();s.push(a.value)}this.project?this._tryProject(s):r.next(s),i&&r.complete()},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(o.Subscriber);e.ZipSubscriber=f;var p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),y=function(n){function t(t,e,r){n.call(this,t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return i(t,n),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(t,e){return u.subscribeToResult(this,this.observable,this,e)},t}(a.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(7),s=r(83),o=r(6),a=r(35),u=r(32),c=r(73),h=function(n){function t(t,e,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),n.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e}return i(t,n),t.prototype.next=function(t){var e=this._getNow();this._events.push(new l(e,t)),this._trimBufferThenGetEvents(),n.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var e,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;e=this.hasError?o.Subscription.EMPTY:this.isStopped?o.Subscription.EMPTY:(this.observers.push(t),new c.SubjectSubscription(this,t)),n&&t.add(t=new a.ObserveOnSubscriber(t,n));for(var i=r.length,s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},t.prototype._getNow=function(){return(this.scheduler||s.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,s=0;s<i&&!(t-n[s].time<r);)s++;return e<i&&(s=Math.max(s,i-e)),0<s&&n.splice(0,s),n},t}(n.Subject);e.ReplaySubject=h;var l=function(t,e){this.time=t,this.value=e}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.EmptyError=i},function(t,n,e){"use strict";var r=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=e(2),s=e(3);n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(e,r){return void 0===r&&(r=n.defaultThrottleConfig),function(t){return t.lift(new o(e,r.leading,r.trailing))}};var o=function(){function t(t,e,r){this.durationSelector=t,this.leading=e,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector,this.leading,this.trailing))},t}(),a=function(i){function t(t,e,r,n){i.call(this,t),this.destination=t,this.durationSelector=e,this._leading=r,this._trailing=n,this._hasTrailingValue=!1}return r(t,i),t.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var e=this.tryDurationSelector(t);e&&this.add(this.throttled=s.subscribeToResult(this,e)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},t.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},t.prototype._unsubscribe=function(){var t=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},t.prototype._sendTrailing=function(){var t=this,e=t.destination,r=t.throttled,n=t._trailing,i=t._trailingValue,s=t._hasTrailingValue;r&&n&&s&&(e.next(i),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(t,e,r,n,i){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(i.OuterSubscriber)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(176),s=r(512),o=r(513),a=r(514),u=r(515),c=r(177),h=r(66),l=r(528),f=r(68),p=r(542),d=r(543),y=r(545),v=r(546),b=r(548),g=r(549),m=r(550),S=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageAssembleService",{get:function(){return this._pageAssembleService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dbService",{get:function(){return this._dbService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"telemetryService",{get:function(){return this._telemetryService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authService",{get:function(){return this._authService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiService",{get:function(){return this._apiService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyValueStore",{get:function(){return this._keyValueStore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"profileService",{get:function(){return this._profileService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentService",{get:function(){return this._contentService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"courseService",{get:function(){return this._courseService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formService",{get:function(){return this._formService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameworkService",{get:function(){return this._frameworkService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedPreferences",{get:function(){return this._sharedPreferences},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this._sharedPreferences=new b.SharedPreferencesImpl,this._dbService=new s.DbServiceImpl(t.dbConfig,20,[new g.KeyValueStoreMigration,new m.ProfileEntryMigration,new m.GroupEntryMigration,new m.GroupProfileEntryMigration]),this._telemetryService=new a.TelemetryServiceImpl(this._dbService,new o.TelemetryDecoratorImpl),this._apiService=new n.ApiServiceImpl(t.apiConfig),this._authService=new u.AuthServiceImpl(t.apiConfig,this._apiService),this._keyValueStore=new p.KeyValueStoreImpl(this._dbService);var e=new i.SessionAuthenticator(t.apiConfig,this._apiService),r={};this._profileService=new f.ProfileServiceImpl(t.profileServiceConfig,this._dbService,this._apiService,new y.CachedItemStoreImpl(this._keyValueStore,t.apiConfig),this._keyValueStore,e),this._contentService=new l.ContentServiceImpl(t.contentServiceConfig,this._apiService,this._dbService,this._profileService,this._keyValueStore,e),this._courseService=new c.CourseServiceImpl(t.courseServiceConfig,this._apiService,this._profileService,this._keyValueStore,e),this._formService=new d.FormServiceImpl(t.formServiceConfig,this._apiService,r,new y.CachedItemStoreImpl(this._keyValueStore,t.apiConfig),e),this._frameworkService=new h.FrameworkServiceImpl(t.frameworkServiceConfig,this._keyValueStore,r,this._apiService,new y.CachedItemStoreImpl(this._keyValueStore,t.apiConfig),new y.CachedItemStoreImpl(this._keyValueStore,t.apiConfig),e),this._pageAssembleService=new v.PageAssembleServiceImpl(this._apiService,t.pageServiceConfig,r,e,new y.CachedItemStoreImpl(this._keyValueStore,t.apiConfig))},t}();e.SunbirdSdk=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.dirPathFromFilePath=function(t){return t.substring(0,t.lastIndexOf("/"))},t.fileNameFromFilePath=function(t){return t.substring(t.lastIndexOf("/")+1)},t}();e.Path=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r(16);(n=e.ContentEntry||(e.ContentEntry={})).TABLE_NAME="content",n._ID="_id",n.COLUMN_NAME_IDENTIFIER="identifier",n.COLUMN_NAME_SERVER_DATA="server_data",n.COLUMN_NAME_LOCAL_DATA="local_data",n.COLUMN_NAME_MIME_TYPE="mime_type",n.COLUMN_NAME_PATH="path",n.COLUMN_NAME_INDEX="search_index",n.COLUMN_NAME_VISIBILITY="visibility",n.COLUMN_NAME_SERVER_LAST_UPDATED_ON="server_last_updated_on",n.COLUMN_NAME_LOCAL_LAST_UPDATED_ON="local_last_updated_on",n.COLUMN_NAME_MANIFEST_VERSION="manifest_version",n.COLUMN_NAME_REF_COUNT="ref_count",n.COLUMN_NAME_CONTENT_STATE="content_state",n.COLUMN_NAME_CONTENT_TYPE="content_type",n.COLUMN_NAME_AUDIENCE="audience",n.COLUMN_NAME_PRAGMA="pragma",n.COLUMN_NAME_UID="uid",n.COLUMN_NAME_SIZE_ON_DEVICE="size_on_device",n.getCreateEntry=function(){return"CREATE TABLE IF NOT EXISTS "+n.TABLE_NAME+" ("+n._ID+" INTEGER PRIMARY KEY,"+n.COLUMN_NAME_IDENTIFIER+i.DbConstants.TEXT_TYPE+" UNIQUE NOT NULL"+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_SERVER_DATA+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_LOCAL_DATA+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_MIME_TYPE+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_PATH+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_INDEX+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_VISIBILITY+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_SERVER_LAST_UPDATED_ON+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_LOCAL_LAST_UPDATED_ON+i.DbConstants.TEXT_TYPE+i.DbConstants.COMMA_SEP+n.COLUMN_NAME_MANIFEST_VERSION+i.DbConstants.TEXT_TYPE+" )"},n.getAlterEntryForRefCount=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_REF_COUNT+i.DbConstants.INT_TYPE+" NOT NULL DEFAULT 1;"},n.getAlterEntryForContentState=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_CONTENT_STATE+i.DbConstants.INT_TYPE+" NOT NULL DEFAULT 2;"},n.getAlterEntryForContentType=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_CONTENT_TYPE+i.DbConstants.TEXT_TYPE+";"},n.getAlterEntryForAudience=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_AUDIENCE+i.DbConstants.TEXT_TYPE+" DEFAULT 'Learner';"},n.getAlterEntryForUid=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_UID+i.DbConstants.TEXT_TYPE+";"},n.getDeleteEntry=function(){return"DROP TABLE IF EXISTS "+n.TABLE_NAME},n.getAlterEntryForContentSize=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_SIZE_ON_DEVICE+i.DbConstants.INT_TYPE+" NOT NULL DEFAULT 0;"},n.getAlterEntryForPragma=function(){return"ALTER TABLE "+n.TABLE_NAME+" ADD COLUMN "+n.COLUMN_NAME_PRAGMA+i.DbConstants.TEXT_TYPE+" DEFAULT '';"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(67),i=function(){function t(){}return t.isAvailableLocally=function(t){return t===n.State.ARTIFACT_AVAILABLE},t.isUpdateAvailable=function(t,e){var r=-1,n=-1;return t&&t.pkgVersion&&(n=parseFloat(t.pkgVersion)),e&&e.pkgVersion&&(r=parseFloat(e.pkgVersion)),0<n&&0<r&&r<n},t.hasChildren=function(t){return JSON.parse(t).children},t.getContentRollup=function(t,e){var r,n,i,s;if(e&&0!==e.length)for(var o=0;o<e.length;o++)if(0===o)r=e[o].identifier;else if(1===o)n=e[o].identifier;else if(2===o)i=e[o].identifier;else{if(3!==o)break;s=e[o].identifier}else r=t;return{l1:r,l2:n,l3:i,l4:s}},t.getChildContentsIdentifiers=function(t){var e=[],r=JSON.parse(t).children;return r&&r.length&&r.forEach(function(t){e.push(t.identifier)}),e},t.getFirstPartOfThePathNameOnLastDelimiter=function(t){var e=t.lastIndexOf("/");if(0<e&&e<t.length)return t.substring(0,e)},t.hasPreRequisites=function(t){return JSON.parse(t).pre_requisites},t.DEFAULT_PACKAGE_VERSION=-1,t}();e.ContentUtil=i},function(t,e,r){"use strict";var n=r(48);function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,r){"use strict";e.noop=function(){}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(r){function n(t,e){r.call(this),this.value=t,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}return i(n,r),n.create=function(t,e){return new n(t,e)},n.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},n.prototype._subscribe=function(t){var e=this.value,r=this.scheduler;if(r)return r.schedule(n.dispatch,0,{done:!1,value:e,subscriber:t});t.next(e),t.closed||t.complete()},n}(r(0).Observable);e.ScalarObservable=n},function(t,e,r){"use strict";var n=r(36);e.concatAll=function(){return n.mergeAll(1)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(13),s=r(14),o=r(2),a=r(3);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!i.isArray(t[0]))return t[0];t=t[0]}return new s.ArrayObservable(t).lift(new u)};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}();e.RaceOperator=u;var c=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(t){this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=t[r],i=a.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(t,e,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==r){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(e)},t}(o.OuterSubscriber);e.RaceSubscriber=c},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(78),s=r(13),o=r(2),a=r(3);e.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&s.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new u(e))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r;return 1===t.length&&s.isArray(t[0])&&(t=t[0]),r=t.shift(),new i.FromObservable(r,null).lift(new u(t))};var u=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextSources))},t}(),c=function(r){function t(t,e){r.call(this,t),this.destination=t,this.nextSources=e}return n(t,r),t.prototype.notifyError=function(t,e){this.subscribeToNextSource()},t.prototype.notifyComplete=function(t){this.subscribeToNextSource()},t.prototype._error=function(t){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(a.subscribeToResult(this,t)):this.destination.complete()},t}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(21);e.concatMap=function(t,e){return n.mergeMap(t,e,1)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.defaultValue))},t}(),o=function(r){function t(t,e){r.call(this,t),this.defaultValue=e,this.isEmpty=!0}return n(t,r),t.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(9),o=r(8);e.distinctUntilChanged=function(e,r){return function(t){return t.lift(new a(e,r))}};var a=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.compare,this.keySelector))},t}(),u=function(n){function t(t,e,r){n.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}return i(t,n),t.prototype.compare=function(t,e){return t===e},t.prototype._next=function(t){var e=t;if(this.keySelector&&(e=s.tryCatch(this.keySelector)(t))===o.errorObject)return this.destination.error(o.errorObject.e);var r=!1;if(this.hasKey){if((r=s.tryCatch(this.compare)(this.key,e))===o.errorObject)return this.destination.error(o.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=e,this.destination.next(t))},t}(n.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.filter=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg))},t}(),o=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.thisArg=r,this.count=0}return i(t,n),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.find=function(e,r){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(t){return t.lift(new s(e,t,!1,r))}};var s=function(){function t(t,e,r,n){this.predicate=t,this.source=e,this.yieldIndex=r,this.thisArg=n}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=s;var o=function(s){function t(t,e,r,n,i){s.call(this,t),this.predicate=e,this.source=r,this.yieldIndex=n,this.thisArg=i,this.index=0}return n(t,s),t.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},t.prototype._next=function(t){var e=this.predicate,r=this.thisArg,n=this.index++;try{e.call(r||this,t,n,this.source)&&this.notifyComplete(this.yieldIndex?n:t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i.Subscriber);e.FindValueSubscriber=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(9),s=r(8),o=r(2),a=r(3);e.audit=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector))},t}(),c=function(r){function t(t,e){r.call(this,t),this.durationSelector=e,this.hasValue=!1}return n(t,r),t.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=i.tryCatch(this.durationSelector)(t);if(e===s.errorObject)this.destination.error(s.errorObject.e);else{var r=a.subscribeToResult(this,e);r.closed?this.clearThrottle():this.add(this.throttled=r)}}},t.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(t,e,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.scan=function(e,r){var n=!1;return 2<=arguments.length&&(n=!0),function(t){return t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.accumulator,this.seed,this.hasSeed))},t}(),o=function(i){function t(t,e,r,n){i.call(this,t),this.accumulator=e,this._seed=r,this.hasSeed=n,this.index=0}return n(t,i),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),t.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(26),o=r(15);e.takeLast=function(e){return function(t){return 0===e?new o.EmptyObservable:t.lift(new a(e))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(r){function t(t,e){r.call(this,t),this.total=e,this.ring=new Array,this.count=0}return n(t,r),t.prototype._next=function(t){var e=this.ring,r=this.total,n=this.count++;e.length<r?e.push(t):e[n%r]=t},t.prototype._complete=function(){var t=this.destination,e=this.count;if(0<e)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var s=e++%r;t.next(n[s])}t.complete()},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.refCount=function(){return function(t){return t.lift(new s(t))}};var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new o(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),o=function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(i.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(2),s=r(3);e.switchMap=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.project=e,this.resultSelector=r,this.index=0}return i(t,n),t.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||n.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._tryNotifyNext(t,e,r,n):this.destination.next(e)},t.prototype._tryNotifyNext=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(i)},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(25);e.timestamp=function(e){return void 0===e&&(e=n.async),i.map(function(t){return new s(t,e.now())})};var s=function(t,e){this.value=t,this.timestamp=e};e.Timestamp=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.afterMethodFactory=function(t,e){var r=t.value;return t.value=function(){r.apply(this,arguments),e()},t},e.beforeMethodFactory=function(t,e){var r=t.value;return t.value=function(){e(),r.apply(this,arguments)},t},e.afterMethodThrowsFactory=function(t,e){var r=t.value;return t.value=function(){try{r.apply(this,arguments)}catch(t){throw e(t),t}},t},e.afterMethodResolvesFactory=function(t,e){var r=t.value;return t.value=function(){r.apply(this,arguments).then(function(t){return e(),Promise.resolve(t)})},t},e.afterMethodRejectsFactory=function(t,e){var r=t.value;return t.value=function(){r.apply(this,arguments).catch(function(t){return e(),Promise.reject(t)})},t}},function(t,e,r){"use strict";var s=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},o=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),i=r(10),u=function(){function t(t){this.apiService=t}return t.prototype.refreshSession=function(t,i){return n(this,void 0,void 0,function(){var e,r,n;return o(this,function(t){switch(t.label){case 0:return e=(new a.Request.Builder).withPath(i).withType(a.HttpRequestType.POST).withBody(JSON.stringify({refresh_token:localStorage.getItem(a.KEY_REFRESH_TOKEN),grant_type:"refresh_token",client_id:"android"})).build(),[4,this.apiService.fetch(e).toPromise()];case 1:return r=t.sent(),n=JSON.parse(r.body()),[2,s({},n,{userToken:a.JWTUtil.parseUserTokenFromAccessToken(n.accessToken)})]}})})},t.prototype.startSession=function(e){return n(this,void 0,void 0,function(){return o(this,function(t){return localStorage.setItem(a.KEY_ACCESS_TOKEN,e.accessToken),localStorage.setItem(a.KEY_REFRESH_TOKEN,e.refreshToken),localStorage.setItem(a.KEY_USER_TOKEN,e.userToken),[2]})})},t.prototype.endSession=function(){return n(this,void 0,void 0,function(){return o(this,function(t){return localStorage.removeItem(a.KEY_ACCESS_TOKEN),localStorage.removeItem(a.KEY_REFRESH_TOKEN),localStorage.removeItem(a.KEY_USER_TOKEN),[2]})})},t.prototype.getSessionData=function(){return i.Observable.of({accessToken:localStorage.getItem(a.KEY_ACCESS_TOKEN),refreshToken:localStorage.getItem(a.KEY_REFRESH_TOKEN),userToken:localStorage.getItem(a.KEY_USER_TOKEN)})},t}();e.AuthUtil=u},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(525)),n(e(526)),n(e(527))},function(t,e,r){"use strict";var n,i,s,o,a,u,c,h;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.SearchType||(e.SearchType={})).SEARCH="search",n.FILTER="filter",(i=e.ChildContents||(e.ChildContents={}))[i.ALL=0]="ALL",i[i.DOWNLOADED=1]="DOWNLOADED",i[i.SPINE=2]="SPINE",(s=e.State||(e.State={}))[s.SEEN_BUT_NOT_AVAILABLE=0]="SEEN_BUT_NOT_AVAILABLE",s[s.ONLY_SPINE=1]="ONLY_SPINE",s[s.ARTIFACT_AVAILABLE=2]="ARTIFACT_AVAILABLE",(o=e.MimeType||(e.MimeType={})).APK="application/vnd.android.package-archive",o.ECML="application/vnd.ekstep.ecml-archive",o.HTML="application/vnd.ekstep.html-archive",o.COLLECTION="application/vnd.ekstep.content-collection",o.ZIP="application/zip",o.TXT="text/plain",o.ECAR="application/ecar",o.EPAR="application/epar",(a=e.Visibility||(e.Visibility={})).DEFAULT="Default",a.PARENT="Parent",(u=e.ContentStatus||(e.ContentStatus={})).LIVE="Live",u.DRAFT="Draft",(c=e.ContentEncoding||(e.ContentEncoding={})).GZIP="gzip",c.IDENTITY="identity",(h=e.ContentDisposition||(e.ContentDisposition={})).ATTACHMENT="attachment",h.INLINE="inline",h.ONLINE="online"},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(533)),n(e(182)),n(e(537))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(196);(e.JWTokenType||(e.JWTokenType={})).HS256="HS256";var n=function(){function t(){}return t.createJWToken=function(t,e,r){var n={alg:r,typ:"JWT"};return i.jws.JWS.sign(r,n,t,e)},t.parseUserTokenFromAccessToken=function(t){return""},t}();e.JWTUtil=n},function(t,e,r){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t){r.call(this),this.errors=t;var e=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}return n(t,r),t}(Error);e.UnsubscriptionError=i},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t,e){r.call(this),this.subject=t,this.subscriber=e,this.closed=!1}return n(t,r),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},t}(r(6).Subscription);e.SubjectSubscription=i},function(t,e,r){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,r){"use strict";var n=r(14);e.of=n.ArrayObservable.of},function(t,e,r){"use strict";var n=r(78);e.from=n.FromObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(13),o=r(74),a=r(75),u=r(79),c=r(215),h=r(14),l=r(216),f=r(18),p=r(0),d=r(35),y=r(31),n=function(r){function n(t,e){r.call(this,null),this.ish=t,this.scheduler=e}return i(n,r),n.create=function(t,e){if(null!=t){if("function"==typeof t[y.observable])return t instanceof p.Observable&&!e?t:new n(t,e);if(s.isArray(t))return new h.ArrayObservable(t,e);if(a.isPromise(t))return new u.PromiseObservable(t,e);if("function"==typeof t[f.iterator]||"string"==typeof t)return new c.IteratorObservable(t,e);if(o.isArrayLike(t))return new l.ArrayLikeObservable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},n.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[y.observable]().subscribe(t):e[y.observable]().subscribe(new d.ObserveOnSubscriber(t,r,0))},n}(p.Observable);e.FromObservable=n},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(11),n=function(r){function n(t,e){r.call(this),this.promise=t,this.scheduler=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.prototype._subscribe=function(e){var r=this,t=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):t.then(function(t){r.value=t,r._isScalar=!0,e.closed||(e.next(t),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(t){s.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!e.closed)return n.schedule(o,0,{value:this.value,subscriber:e})}else t.then(function(t){r.value=t,r._isScalar=!0,e.closed||e.add(n.schedule(o,0,{value:t,subscriber:e}))},function(t){e.closed||e.add(n.schedule(a,0,{err:t,subscriber:e}))}).then(null,function(t){s.root.setTimeout(function(){throw t})})},n}(r(0).Observable);function o(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function a(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}e.PromiseObservable=n},function(t,e,r){"use strict";e.identity=function(t){return t}},function(t,e,r){"use strict";var n=r(266);e.timer=n.TimerObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=r(11),l=r(9),f=r(8),n=r(0),s=r(1),o=r(25);function u(t,e){return void 0===e&&(e=null),new b({method:"GET",url:t,headers:e})}function c(t,e,r){return new b({method:"POST",url:t,body:e,headers:r})}function h(t,e){return new b({method:"DELETE",url:t,headers:e})}function p(t,e,r){return new b({method:"PUT",url:t,body:e,headers:r})}function d(t,e,r){return new b({method:"PATCH",url:t,body:e,headers:r})}e.ajaxGet=u,e.ajaxPost=c,e.ajaxDelete=h,e.ajaxPut=p,e.ajaxPatch=d;var y=o.map(function(t,e){return t.response});function v(t,e){return y(new b({method:"GET",url:t,responseType:"json",headers:e}))}e.ajaxGetJSON=v;var b=function(n){function e(t){n.call(this);var e={async:!0,createXHR:function(){return this.crossDomain?function(){if(a.root.XMLHttpRequest)return new a.root.XMLHttpRequest;if(a.root.XDomainRequest)return new a.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}.call(this):function(){if(a.root.XMLHttpRequest)return new a.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(t=e[r],new a.root.ActiveXObject(t))break}catch(t){}return new a.root.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)e.url=t;else for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);this.request=e}var t;return i(e,n),e.prototype._subscribe=function(t){return new g(t,this.request)},e.create=((t=function(t){return new e(t)}).get=u,t.post=c,t.delete=h,t.put=p,t.patch=d,t.getJSON=v,t),e}(n.Observable);e.AjaxObservable=b;var g=function(n){function t(t,e){n.call(this,t),this.request=e,this.done=!1;var r=e.headers=e.headers||{};e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||a.root.FormData&&e.body instanceof a.root.FormData||void 0===e.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=this.serializeBody(e.body,e.headers["Content-Type"]),this.send()}return i(t,n),t.prototype.next=function(t){this.done=!0;var e=this.xhr,r=this.request,n=this.destination,i=new m(t,e,r);n.next(i)},t.prototype.send=function(){var t=this.request,e=this.request,r=e.user,n=e.method,i=e.url,s=e.async,o=e.password,a=e.headers,u=e.body,c=t.createXHR,h=l.tryCatch(c).call(t);if(h===f.errorObject)this.error(f.errorObject.e);else{this.xhr=h,this.setupEvents(h,t);if((r?l.tryCatch(h.open).call(h,n,i,s,r,o):l.tryCatch(h.open).call(h,n,i,s))===f.errorObject)return this.error(f.errorObject.e),null;if(s&&(h.timeout=t.timeout,h.responseType=t.responseType),"withCredentials"in h&&(h.withCredentials=!!t.withCredentials),this.setHeaders(h,a),(u?l.tryCatch(h.send).call(h,u):l.tryCatch(h.send).call(h))===f.errorObject)return this.error(f.errorObject.e),null}return h},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(a.root.FormData&&e instanceof a.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])},t.prototype.setupEvents=function(t,e){var r=e.progressSubscriber;function i(t){var e=i.subscriber,r=i.progressSubscriber,n=i.request;r&&r.error(t),e.error(new w(this,n))}if((t.ontimeout=i).request=e,i.subscriber=this,i.progressSubscriber=r,t.upload&&"withCredentials"in t){var n,s;if(r)n=function(t){n.progressSubscriber.next(t)},a.root.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=r;s=function(t){var e=s,r=e.progressSubscriber,n=e.subscriber,i=e.request;r&&r.error(t),n.error(new S("ajax error",this,i))},(t.onerror=s).request=e,s.subscriber=this,s.progressSubscriber=r}function o(t){var e=o.subscriber,r=o.progressSubscriber,n=o.request;if(4===this.readyState){var i=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=s?200:0),200<=i&&i<300?(r&&r.complete(),e.next(t),e.complete()):(r&&r.error(t),e.error(new S("ajax error "+i,this,n)))}}(t.onreadystatechange=o).subscriber=this,o.progressSubscriber=r,o.request=e},t.prototype.unsubscribe=function(){var t=this.done,e=this.xhr;!t&&e&&4!==e.readyState&&"function"==typeof e.abort&&e.abort(),n.prototype.unsubscribe.call(this)},t}(s.Subscriber);e.AjaxSubscriber=g;var m=function(t,e,r){this.originalEvent=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=E(this.responseType,e)};e.AjaxResponse=m;var S=function(n){function t(t,e,r){n.call(this,t),this.message=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=E(this.responseType,e)}return i(t,n),t}(Error);function E(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var w=function(r){function t(t,e){r.call(this,"ajax timeout",t,e)}return i(t,r),t}(e.AjaxError=S);e.AjaxTimeoutError=w},function(t,e,r){"use strict";var n=r(274),i=r(275);e.queue=new i.QueueScheduler(n.QueueAction)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.buffer=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingNotifier))},t}(),a=function(r){function t(t,e){r.call(this,t),this.buffer=[],this.add(s.subscribeToResult(this,e))}return n(t,r),t.prototype._next=function(t){this.buffer.push(t)},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.buffer;this.buffer=[],this.destination.next(s)},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.bufferCount=function(e,r){return void 0===r&&(r=null),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?a:o}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),o=function(r){function t(t,e){r.call(this,t),this.bufferSize=e,this.buffer=[]}return i(t,r),t.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),r.prototype._complete.call(this)},t}(n.Subscriber),a=function(n){function t(t,e,r){n.call(this,t),this.bufferSize=e,this.startBufferEvery=r,this.buffers=[],this.count=0}return i(t,n),t.prototype._next=function(t){var e=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var s=n.length;s--;){var o=n[s];o.push(t),o.length===e&&(n.splice(s,1),this.destination.next(o))}},t.prototype._complete=function(){for(var t=this.buffers,e=this.destination;0<t.length;){var r=t.shift();0<r.length&&e.next(r)}n.prototype._complete.call(this)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(4),i=r(1),o=r(12);e.bufferTime=function(e){var t=arguments.length,r=s.async;o.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;2<=t&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=t&&(i=arguments[2]),function(t){return t.lift(new a(e,n,i,r))}};var a=function(){function t(t,e,r,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),u=function(){this.buffer=[]},c=function(c){function t(t,e,r,n,i){c.call(this,t),this.bufferTimeSpan=e,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=i,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==r||r<0,this.timespanOnly){var o={subscriber:this,context:s,bufferTimeSpan:e};this.add(s.closeAction=i.schedule(h,e,o))}else{var a={subscriber:this,context:s},u={bufferTimeSpan:e,bufferCreationInterval:r,subscriber:this,scheduler:i};this.add(s.closeAction=i.schedule(f,e,a)),this.add(i.schedule(l,r,u))}}return n(t,c),t.prototype._next=function(t){for(var e,r=this.contexts,n=r.length,i=0;i<n;i++){var s=r[i],o=s.buffer;o.push(t),o.length==this.maxBufferSize&&(e=s)}e&&this.onBufferFull(e)},t.prototype._error=function(t){this.contexts.length=0,c.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,e=this.destination;0<t.length;){var r=t.shift();e.next(r.buffer)}c.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:t,bufferTimeSpan:r};this.add(t.closeAction=this.scheduler.schedule(h,r,n))}},t.prototype.openContext=function(){var t=new u;return this.contexts.push(t),t},t.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;0<=(e?e.indexOf(t):-1)&&e.splice(e.indexOf(t),1)},t}(i.Subscriber);function h(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function l(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,s=n.openContext();n.closed||(n.add(s.closeAction=i.schedule(f,r,{subscriber:n,context:s})),this.schedule(t,e))}function f(t){var e=t.subscriber,r=t.context;e.closeContext(r)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(6),o=r(3),n=r(2);e.bufferToggle=function(e,r){return function(t){return t.lift(new a(e,r))}};var a=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.openings,this.closingSelector))},t}(),u=function(n){function t(t,e,r){n.call(this,t),this.openings=e,this.closingSelector=r,this.contexts=[],this.add(o.subscribeToResult(this,e))}return i(t,n),t.prototype._next=function(t){for(var e=this.contexts,r=e.length,n=0;n<r;n++)e[n].buffer.push(t)},t.prototype._error=function(t){for(var e=this.contexts;0<e.length;){var r=e.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,n.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;0<t.length;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,n.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,n,i){t?this.closeBuffer(t):this.openBuffer(e)},t.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},t.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},t.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var r=t.buffer,n=t.subscription;this.destination.next(r),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(t){var e=this.contexts,r=new s.Subscription,n={buffer:[],subscription:r};e.push(n);var i=o.subscribeToResult(this,t,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(6),s=r(9),o=r(8),a=r(2),u=r(3);e.bufferWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(r){function t(t,e){r.call(this,t),this.closingSelector=e,this.subscribing=!1,this.openBuffer()}return n(t,r),t.prototype._next=function(t){this.buffer.push(t)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(t,e,r,n,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var r=s.tryCatch(this.closingSelector)();r===o.errorObject?this.error(o.errorObject.e):(t=new i.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(u.subscribeToResult(this,r)),this.subscribing=!1)},t}(a.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(2),s=r(3);e.catchError=function(n){return function(t){var e=new o(n),r=t.lift(e);return e.caught=r}};var o=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.selector=e,this.caught=r}return i(t,n),t.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void n.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(s.subscribeToResult(this,e))}},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var n=r(34);e.combineAll=function(e){return function(t){return t.lift(new n.CombineLatestOperator(e))}}},function(t,e,r){"use strict";var n=r(19),i=r(19);e.concatStatic=i.concat,e.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(n.concat.apply(void 0,[t].concat(e)))}}},function(t,e,r){"use strict";var n=r(53);e.concatMapTo=function(t,e){return n.concatMap(function(){return t},e)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.count=function(e){return function(t){return t.lift(new s(e,t))}};var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.source))},t}(),o=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.source=r,this.count=0,this.index=0}return i(t,n),t.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},t.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.dematerialize=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(t){t.observe(this.destination)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.debounce=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(r){function t(t,e){r.call(this,t),this.durationSelector=e,this.hasValue=!1,this.durationSubscription=null}return n(t,r),t.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(t,e){var r=this.durationSubscription;this.value=t,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=s.subscribeToResult(this,e)).closed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=null,e.unsubscribe(),this.remove(e)),this.value=null,this.hasValue=!1,r.prototype._next.call(this,t)}},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(4);e.debounceTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(t,n),t.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},t}(n.Subscriber);function u(t){t.debouncedNext()}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(4),s=r(38),o=r(1),a=r(20);e.delay=function(t,e){void 0===e&&(e=n.async);var r=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new u(r,e))}};var u=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delay,this.scheduler))},t}(),c=function(n){function e(t,e,r){n.call(this,t),this.delay=e,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return i(e,n),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,i=t.destination;0<r.length&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(0<r.length){var s=Math.max(0,r[0].time-n.now());this.schedule(t,s)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new h(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(a.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},e}(o.Subscriber),h=function(t,e){this.time=t,this.notification=e}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(0),o=r(2),a=r(3);e.delayWhen=function(e,r){return r?function(t){return new h(t,r).lift(new u(e))}:function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delayDurationSelector))},t}(),c=function(r){function t(t,e){r.call(this,t),this.delayDurationSelector=e,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return n(t,r),t.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},t.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),r=null;return-1!==e&&(r=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),r},t.prototype.tryDelay=function(t,e){var r=a.subscribeToResult(this,t,e);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r)),this.values.push(e)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(o.OuterSubscriber),h=function(r){function t(t,e){r.call(this),this.source=t,this.subscriptionDelay=e}return n(t,r),t.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new l(t,this.source))},t}(s.Observable),l=function(r){function t(t,e){r.call(this),this.parent=t,this.source=e,this.sourceSubscribed=!1}return n(t,r),t.prototype._next=function(t){this.subscribeToSource()},t.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(2),s=r(3),o=r(317);e.distinct=function(e,r){return function(t){return t.lift(new a(e,r))}};var a=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.keySelector,this.flushes))},t}(),u=function(n){function t(t,e,r){n.call(this,t),this.keySelector=e,this.values=new o.Set,r&&this.add(s.subscribeToResult(this,r))}return i(t,n),t.prototype.notifyNext=function(t,e,r,n,i){this.values.clear()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},t.prototype._useKeySelector=function(t){var e,r=this.destination;try{e=this.keySelector(t)}catch(t){return void r.error(t)}this._finalizeNext(e,t)},t.prototype._finalizeNext=function(t,e){var r=this.values;r.has(t)||(r.add(t),this.destination.next(e))},t}(n.OuterSubscriber);e.DistinctSubscriber=u},function(t,e,r){"use strict";var i=r(55);e.distinctUntilKeyChanged=function(r,n){return i.distinctUntilChanged(function(t,e){return n?n(t[r],e[r]):t[r]===e[r]})}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(1);e.tap=function(e,r,n){return function(t){return t.lift(new i(e,r,n))}};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(s){function t(t,e,r,n){s.call(this,t);var i=new o.Subscriber(e,r,n);i.syncErrorThrowable=!0,this.add(i),this.safeSubscriber=i}return n(t,s),t.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},t.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},t.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},t}(o.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.exhaust=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return n(t,e),t.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(2),s=r(3);e.exhaustMap=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.project=e,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(t,n),t.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},t.prototype.tryNext=function(t){var e=this.index++,r=this.destination;try{var n=this.project(t,e);this.hasSubscription=!0,this.add(s.subscribeToResult(this,n,t,e))}catch(t){r.error(t)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.resultSelector,o=this.destination;s?this.trySelectResult(t,e,r,n):o.next(e)},t.prototype.trySelectResult=function(t,e,r,n){var i=this.resultSelector,s=this.destination;try{var o=i(t,e,r,n);s.next(o)}catch(t){s.error(t)}},t.prototype.notifyError=function(t){this.destination.error(t)},t.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(9),a=r(8),i=r(2),u=r(3);e.expand=function(e,r,n){return void 0===r&&(r=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),r=(r||0)<1?Number.POSITIVE_INFINITY:r,function(t){return t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){this.project=t,this.concurrent=e,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=s;var c=function(i){function s(t,e,r,n){i.call(this,t),this.project=e,this.concurrent=r,this.scheduler=n,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return n(s,i),s.dispatch=function(t){var e=t.subscriber,r=t.result,n=t.value,i=t.index;e.subscribeToProjection(r,n,i)},s.prototype._next=function(t){var e=this.destination;if(e.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){e.next(t);var n=o.tryCatch(this.project)(t,r);if(n===a.errorObject)e.error(a.errorObject.e);else if(this.scheduler){var i={subscriber:this,result:n,value:t,index:r};this.add(this.scheduler.schedule(s.dispatch,0,i))}else this.subscribeToProjection(n,t,r)}else this.buffer.push(t)}},s.prototype.subscribeToProjection=function(t,e,r){this.active++,this.add(u.subscribeToResult(this,t,e,r))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},s.prototype.notifyNext=function(t,e,r,n,i){this._next(e)},s.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&0<e.length&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},s}(i.OuterSubscriber);e.ExpandSubscriber=c},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(26);e.elementAt=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.index,this.defaultValue))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.index=e,this.defaultValue=r}return i(t,n),t.prototype._next=function(t){0==this.index--&&(this.destination.next(t),this.destination.complete())},t.prototype._complete=function(){var t=this.destination;0<=this.index&&(void 0!==this.defaultValue?t.next(this.defaultValue):t.error(new s.ArgumentOutOfRangeError)),t.complete()},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(6);e.finalize=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.callback))},t}(),a=function(r){function t(t,e){r.call(this,t),this.add(new s.Subscription(e))}return n(t,r),t}(i.Subscriber)},function(t,e,r){"use strict";var n=r(57);e.findIndex=function(e,r){return function(t){return t.lift(new n.FindValueOperator(e,t,!0,r))}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),o=r(41);e.first=function(e,r,n){return function(t){return t.lift(new s(e,r,n,t))}};var s=function(){function t(t,e,r,n){this.predicate=t,this.resultSelector=e,this.defaultValue=r,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),a=function(s){function t(t,e,r,n,i){s.call(this,t),this.predicate=e,this.resultSelector=r,this.defaultValue=n,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,s),t.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},t.prototype._tryPredicate=function(t,e){var r;try{r=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}r&&this._emit(t,e)},t.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},t.prototype._tryResultSelector=function(t,e){var r;try{r=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(r)},t.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new o.EmptyError):(t.next(this.defaultValue),t.complete())},t}(i.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(6),o=r(0),a=r(7),u=r(344),c=r(346);e.groupBy=function(e,r,n,i){return function(t){return t.lift(new h(e,r,n,i))}};var h=function(){function t(t,e,r,n){this.keySelector=t,this.elementSelector=e,this.durationSelector=r,this.subjectSelector=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(s){function t(t,e,r,n,i){s.call(this,t),this.keySelector=e,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(t,s),t.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},t.prototype._group=function(t,e){var r=this.groups;r||(r=this.groups="string"==typeof e?new c.FastMap:new u.Map);var n,i=r.get(e);if(this.elementSelector)try{n=this.elementSelector(t)}catch(t){this.error(t)}else n=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.Subject,r.set(e,i);var s=new p(e,i,this);if(this.destination.next(s),this.durationSelector){var o=void 0;try{o=this.durationSelector(new p(e,i))}catch(t){return void this.error(t)}this.add(o.subscribe(new f(e,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(r){var t=this.groups;t&&(t.forEach(function(t,e){t.error(r)}),t.clear()),this.destination.error(r)},t.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},t.prototype.removeGroup=function(t){this.groups.delete(t)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&s.prototype.unsubscribe.call(this))},t}(n.Subscriber),f=function(n){function t(t,e,r){n.call(this,e),this.key=t,this.group=e,this.parent=r}return i(t,n),t.prototype._next=function(t){this.complete()},t.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},t}(n.Subscriber),p=function(n){function t(t,e,r){n.call(this),this.key=t,this.groupSubject=e,this.refCountSubscription=r}return i(t,n),t.prototype._subscribe=function(t){var e=new s.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&e.add(new d(r)),e.add(n.subscribe(t)),e},t}(o.Observable);e.GroupedObservable=p;var d=function(e){function t(t){e.call(this),(this.parent=t).count++}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(s.Subscription)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(48);e.ignoreElements=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype._next=function(t){s.noop()},e}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.isEmpty=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},t.prototype._next=function(t){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(58),s=r(81);e.auditTime=function(t,e){return void 0===e&&(e=n.async),i.audit(function(){return s.timer(t,e)})}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),o=r(41);e.last=function(e,r,n){return function(t){return t.lift(new s(e,r,n,t))}};var s=function(){function t(t,e,r,n){this.predicate=t,this.resultSelector=e,this.defaultValue=r,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),a=function(s){function t(t,e,r,n,i){s.call(this,t),this.predicate=e,this.resultSelector=r,this.defaultValue=n,this.source=i,this.hasValue=!1,void(this.index=0)!==n&&(this.lastValue=n,this.hasValue=!0)}return n(t,s),t.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},t.prototype._tryPredicate=function(t,e){var r;try{r=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(r){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},t.prototype._tryResultSelector=function(t,e){var r;try{r=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new o.EmptyError)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.every=function(e,r){return function(t){return t.lift(new s(e,r,t))}};var s=function(){function t(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg,this.source))},t}(),o=function(i){function t(t,e,r,n){i.call(this,t),this.predicate=e,this.thisArg=r,this.source=n,this.index=0,this.thisArg=r||this}return n(t,i),t.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},t.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.mapTo=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.value))},t}(),o=function(r){function t(t,e){r.call(this,t),this.value=e}return n(t,r),t.prototype._next=function(t){this.destination.next(this.value)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(20);e.materialize=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},t.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},t.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},t}(i.Subscriber)},function(t,e,r){"use strict";var n=r(27);e.max=function(r){var t="function"==typeof r?function(t,e){return 0<r(t,e)?t:e}:function(t,e){return e<t?t:e};return n.reduce(t)}},function(t,e,r){"use strict";var n=r(37),i=r(37);e.mergeStatic=i.merge,e.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(n.merge.apply(void 0,[t].concat(e)))}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.mergeMapTo=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof r&&(n=r,r=null),function(t){return t.lift(new o(e,r,n))}};var o=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.ish,this.resultSelector,this.concurrent))},t}();e.MergeMapToOperator=o;var a=function(i){function t(t,e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,t),this.ish=e,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,i),t.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,e,t,r)}else this.buffer.push(t)},t.prototype._innerSub=function(t,e,r,n,i){this.add(s.subscribeToResult(this,t,n,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.resultSelector,o=this.destination;s?this.trySelectResult(t,e,r,n):o.next(e)},t.prototype.trySelectResult=function(t,e,r,n){var i,s=this.resultSelector,o=this.destination;try{i=s(t,e,r,n)}catch(t){return void o.error(t)}o.next(i)},t.prototype.notifyError=function(t){this.destination.error(t)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);e.MergeMapToSubscriber=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(9),o=r(8),a=r(3),i=r(2);e.mergeScan=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return t.lift(new u(e,r,n))}};var u=function(){function t(t,e,r){this.accumulator=t,this.seed=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=u;var c=function(i){function t(t,e,r,n){i.call(this,t),this.accumulator=e,this.acc=r,this.concurrent=n,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,i),t.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,r=s.tryCatch(this.accumulator)(this.acc,t),n=this.destination;r===o.errorObject?n.error(o.errorObject.e):(this.active++,this._innerSub(r,t,e))}else this.buffer.push(t)},t.prototype._innerSub=function(t,e,r){this.add(a.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.destination;this.acc=e,this.hasValue=!0,s.next(e)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(i.OuterSubscriber);e.MergeScanSubscriber=c},function(t,e,r){"use strict";var n=r(27);e.min=function(r){var t="function"==typeof r?function(t,e){return r(t,e)<0?t:e}:function(t,e){return t<e?t:e};return n.reduce(t)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(7),s=r(0),o=r(1),a=r(6),u=r(61),c=function(r){function t(t,e){r.call(this),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}return n(t,r),t.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},t.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},t.prototype.refCount=function(){return u.refCount()(this)},t}(s.Observable),h=(e.ConnectableObservable=c).prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var l=function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._error=function(t){this._unsubscribe(),r.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},t}(i.SubjectSubscriber),f=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new f(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(o.Subscriber))},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.pairwise=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return n(t,e),t.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},t}(i.Subscriber)},function(t,e,r){"use strict";var n=r(391),i=r(56);e.partition=function(e,r){return function(t){return[i.filter(e,r)(t),i.filter(n.not(e,r))(t)]}}},function(t,e,r){"use strict";var n=r(25);e.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return n.map((i=e,s=r,function(t){for(var e=t,r=0;r<s;r++){var n=e[i[r]];if(void 0===n)return;e=n}return e}))(t);var i,s}}},function(t,e,r){"use strict";var n=r(7),i=r(17);e.publish=function(t){return t?i.multicast(function(){return new n.Subject},t):i.multicast(new n.Subject)}},function(t,e,r){"use strict";var n=r(128),i=r(17);e.publishBehavior=function(e){return function(t){return i.multicast(new n.BehaviorSubject(e))(t)}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(7),s=r(32),o=function(r){function t(t){r.call(this),this._value=t}return n(t,r),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var e=r.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},t}(i.Subject);e.BehaviorSubject=o},function(t,e,r){"use strict";var o=r(40),a=r(17);e.publishReplay=function(t,e,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,s=new o.ReplaySubject(t,e,n);return function(t){return a.multicast(function(){return s},i)(t)}}},function(t,e,r){"use strict";var n=r(33),i=r(17);e.publishLast=function(){return function(t){return i.multicast(new n.AsyncSubject)(t)}}},function(t,e,r){"use strict";var n=r(13),i=r(51);e.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return 1===e.length&&n.isArray(e[0])&&(e=e[0]),t.lift.call(i.race.apply(void 0,[t].concat(e)))}}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(15);e.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?new s.EmptyObservable:e<0?t.lift(new o(-1,t)):t.lift(new o(e-1,t))}};var o=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.count,this.source))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.count=e,this.source=r}return i(t,n),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return n.prototype.complete.call(this);-1<e&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(n.Subscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(7),o=r(9),a=r(8),n=r(2),u=r(3);e.repeatWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,e))},t}(),h=function(n){function t(t,e,r){n.call(this,t),this.notifier=e,this.source=r,this.sourceIsBeingSubscribedTo=!0}return i(t,n),t.prototype.notifyNext=function(t,e,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return n.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return n.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this.notifications,e=this.retries,r=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,n.prototype._unsubscribeAndRecycle.call(this),this.notifications=t,this.retries=e,this.retriesSubscription=r,this},t.prototype.subscribeToRetries=function(){this.notifications=new s.Subject;var t=o.tryCatch(this.notifier)(this.notifications);if(t===a.errorObject)return n.prototype.complete.call(this);this.retries=t,this.retriesSubscription=u.subscribeToResult(this,t)},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}};var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.count,this.source))},t}(),o=function(n){function t(t,e,r){n.call(this,t),this.count=e,this.source=r}return i(t,n),t.prototype.error=function(t){if(!this.isStopped){var e=this.source,r=this.count;if(0===r)return n.prototype.error.call(this,t);-1<r&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(7),o=r(9),a=r(8),i=r(2),u=r(3);e.retryWhen=function(e){return function(t){return t.lift(new c(e,t))}};var c=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(i){function t(t,e,r){i.call(this,t),this.notifier=e,this.source=r}return n(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(e=new s.Subject,(r=o.tryCatch(this.notifier)(e))===a.errorObject)return i.prototype.error.call(this,a.errorObject.e);n=u.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=e,this.retries=r,this.retriesSubscription=n,e.next(t)}},t.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.errors,o=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=s,this.retries=o,this.retriesSubscription=a,this.source.subscribe(this)},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.sample=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var r=new a(t),n=e.subscribe(r);return n.add(s.subscribeToResult(r,this.notifier)),n},t}(),a=function(t){function e(){t.apply(this,arguments),this.hasValue=!1}return n(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(4);e.sampleTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.period,this.scheduler))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.period=e,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(u,e,{subscriber:this,period:e}))}return i(t,n),t.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(n.Subscriber);function u(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),o=r(9),a=r(8);e.sequenceEqual=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=s;var u=function(n){function t(t,e,r){n.call(this,t),this.compareTo=e,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(e.subscribe(new c(t,this)))}return i(t,n),t.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var t=this._a,e=this._b,r=this.comparor;0<t.length&&0<e.length;){var n=t.shift(),i=e.shift(),s=!1;r?(s=o.tryCatch(r)(n,i))===a.errorObject&&this.destination.error(a.errorObject.e):s=n===i,s||this.emit(!1)}},t.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},t.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},t}(n.Subscriber);e.SequenceEqualSubscriber=u;var c=function(r){function t(t,e){r.call(this,t),this.parent=e}return i(t,r),t.prototype._next=function(t){this.parent.nextB(t)},t.prototype._error=function(t){this.parent.error(t)},t.prototype._complete=function(){this.parent._complete()},t}(n.Subscriber)},function(t,e,r){"use strict";var n=r(17),i=r(61),s=r(7);function o(){return new s.Subject}e.share=function(){return function(t){return i.refCount()(n.multicast(o)(t))}}},function(t,e,r){"use strict";var f=r(40);e.shareReplay=function(e,h,l){return function(t){return t.lift((r=e,n=h,i=l,a=0,c=u=!1,function(t){a++,s&&!u||(u=!1,s=new f.ReplaySubject(r,n,i),o=t.subscribe({next:function(t){s.next(t)},error:function(t){u=!0,s.error(t)},complete:function(){c=!0,s.complete()}}));var e=s.subscribe(this);return function(){a--,e.unsubscribe(),o&&0===a&&c&&o.unsubscribe()}}));var r,n,i,s,o,a,u,c}}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),s=r(41);e.single=function(e){return function(t){return t.lift(new o(e,t))}};var o=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.source=r,this.seenValue=!1,this.index=0}return i(t,n),t.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},t.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},t.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){var t=this.destination;0<this.index?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.skip=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.total))},t}(),o=function(r){function t(t,e){r.call(this,t),this.total=e,this.count=0}return n(t,r),t.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(26);e.skipLast=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new i.Subscriber(t)):e.subscribe(new a(t,this._skipCount))},t}(),a=function(r){function t(t,e){r.call(this,t),this._skipCount=e,this._count=0,this._ring=new Array(e)}return n(t,r),t.prototype._next=function(t){var e=this._skipCount,r=this._count++;if(r<e)this._ring[r]=t;else{var n=r%e,i=this._ring,s=i[n];i[n]=t,this.destination.next(s)}},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.skipUntil=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(r){function t(t,e){r.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(s.subscribeToResult(this,e))}return n(t,r),t.prototype._next=function(t){this.hasValue&&r.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?r.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(t,e,r,n,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&r.prototype._complete.call(this)},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.skipWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate))},t}(),o=function(r){function t(t,e){r.call(this,t),this.predicate=e,this.skipping=!0,this.index=0}return n(t,r),t.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},t.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},t}(i.Subscriber)},function(t,e,r){"use strict";var i=r(14),s=r(49),o=r(15),a=r(19),u=r(12);e.startWith=function(){for(var n=[],t=0;t<arguments.length;t++)n[t-0]=arguments[t];return function(t){var e=n[n.length-1];u.isScheduler(e)?n.pop():e=null;var r=n.length;return 1===r?a.concat(new s.ScalarObservable(n[0],e),t):1<r?a.concat(new i.ArrayObservable(n,e),t):a.concat(new o.EmptyObservable(e),t)}}},function(t,e,r){"use strict";var n=r(442),i=r(446);e.asap=new i.AsapScheduler(n.AsapAction)},function(t,i,s){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new n(r.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new n(r.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s(444),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,s(28))},function(t,e,r){"use strict";var n=r(62),i=r(80);e.switchAll=function(){return n.switchMap(i.identity)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(2),s=r(3);e.switchMapTo=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.observable,this.resultSelector))},t}(),a=function(n){function t(t,e,r){n.call(this,t),this.inner=e,this.resultSelector=r,this.index=0}return i(t,n),t.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,this.inner,t,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||n.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,n,i){var s=this.resultSelector,o=this.destination;s?this.tryResultSelector(t,e,r,n):o.next(e)},t.prototype.tryResultSelector=function(t,e,r,n){var i,s=this.resultSelector,o=this.destination;try{i=s(t,e,r,n)}catch(t){return void o.error(t)}o.next(i)},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(26),o=r(15);e.take=function(e){return function(t){return 0===e?new o.EmptyObservable:t.lift(new a(e))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(r){function t(t,e){r.call(this,t),this.total=e,this.count=0}return n(t,r),t.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),s=r(3);e.takeUntil=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(r){function t(t,e){r.call(this,t),this.notifier=e,this.add(s.subscribeToResult(this,e))}return n(t,r),t.prototype.notifyNext=function(t,e,r,n,i){this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.takeWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate))},t}(),o=function(r){function t(t,e){r.call(this,t),this.predicate=e,this.index=0}return n(t,r),t.prototype._next=function(t){var e,r=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void r.error(t)}this.nextOrComplete(t,e)},t.prototype.nextOrComplete=function(t,e){var r=this.destination;Boolean(e)?r.next(t):r.complete()},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(4),o=r(42);e.throttleTime=function(e,r,n){return void 0===r&&(r=s.async),void 0===n&&(n=o.defaultThrottleConfig),function(t){return t.lift(new a(e,r,n.leading,n.trailing))}};var a=function(){function t(t,e,r,n){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),u=function(s){function t(t,e,r,n,i){s.call(this,t),this.duration=e,this.scheduler=r,this.leading=n,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return n(t,s),t.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},t.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},t}(i.Subscriber);function c(t){t.subscriber.clearThrottle()}},function(t,e,r){"use strict";var n=r(4),i=r(156);e.TimeInterval=i.TimeInterval,e.timeInterval=function(t){return void 0===t&&(t=n.async),i.timeInterval(t)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),s=r(4);e.timeInterval=function(e){return void 0===e&&(e=s.async),function(t){return t.lift(new a(e))}};var o=function(t,e){this.value=t,this.interval=e};e.TimeInterval=o;var a=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler))},t}(),u=function(r){function t(t,e){r.call(this,t),this.scheduler=e,this.lastTime=0,this.lastTime=e.now()}return n(t,r),t.prototype._next=function(t){var e=this.scheduler.now(),r=e-this.lastTime;this.lastTime=e,this.destination.next(new o(t,r))},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(4),s=r(38),o=r(1),a=r(158);e.timeout=function(t,e){void 0===e&&(e=i.async);var r=s.isDate(t),n=r?+t-e.now():Math.abs(t);return function(t){return t.lift(new u(n,r,e,new a.TimeoutError))}};var u=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.scheduler=r,this.errorInstance=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},t}(),c=function(s){function e(t,e,r,n,i){s.call(this,t),this.absoluteTimeout=e,this.waitFor=r,this.scheduler=n,this.errorInstance=i,this.action=null,this.scheduleTimeout()}return n(e,s),e.dispatchTimeout=function(t){t.error(t.errorInstance)},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),s.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},e}(o.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.TimeoutError=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(4),a=r(38),i=r(2),u=r(3);e.timeoutWith=function(n,i,s){return void 0===s&&(s=o.async),function(t){var e=a.isDate(n),r=e?+n-s.now():Math.abs(n);return t.lift(new c(r,e,i,s))}};var c=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),s=function(s){function e(t,e,r,n,i){s.call(this,t),this.absoluteTimeout=e,this.waitFor=r,this.withObservable=n,this.scheduler=i,this.action=null,this.scheduleTimeout()}return n(e,s),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(u.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),s.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=r(27);function i(t,e,r){return 0===r?[e]:(t.push(e),t)}e.toArray=function(){return n.reduce(i,[])}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(7),s=r(2),o=r(3);e.window=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var r=new u(t),n=e.subscribe(r);return n.closed||r.add(o.subscribeToResult(r,this.windowBoundaries)),n},t}(),u=function(e){function t(t){e.call(this,t),this.window=new i.Subject,t.next(this.window)}return n(t,e),t.prototype.notifyNext=function(t,e,r,n,i){this.openWindow()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){this._complete()},t.prototype._next=function(t){this.window.next(t)},t.prototype._error=function(t){this.window.error(t),this.destination.error(t)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,r=this.window=new i.Subject;e.next(r)},t}(s.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),c=r(7);e.windowCount=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.windowSize,this.startWindowEvery))},t}(),o=function(n){function t(t,e,r){n.call(this,t),this.destination=t,this.windowSize=e,this.startWindowEvery=r,this.windows=[new c.Subject],this.count=0,t.next(this.windows[0])}return i(t,n),t.prototype._next=function(t){for(var e=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,s=i.length,o=0;o<s&&!this.closed;o++)i[o].next(t);var a=this.count-n+1;if(0<=a&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new c.Subject;i.push(u),r.next(u)}},t.prototype._error=function(t){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().error(t);this.destination.error(t)},t.prototype._complete=function(){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(7),s=r(4),o=r(1),a=r(22),u=r(12);e.windowTime=function(e){var r=s.async,n=null,i=Number.POSITIVE_INFINITY;return u.isScheduler(arguments[3])&&(r=arguments[3]),u.isScheduler(arguments[2])?r=arguments[2]:a.isNumeric(arguments[2])&&(i=arguments[2]),u.isScheduler(arguments[1])?r=arguments[1]:a.isNumeric(arguments[1])&&(n=arguments[1]),function(t){return t.lift(new c(e,n,i,r))}};var c=function(){function t(t,e,r,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),h=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return n(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i.Subject),l=function(c){function t(t,e,r,n,i){c.call(this,t),this.destination=t,this.windowTimeSpan=e,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=i,this.windows=[];var s=this.openWindow();if(null!==r&&0<=r){var o={subscriber:this,window:s,context:null},a={windowTimeSpan:e,windowCreationInterval:r,subscriber:this,scheduler:i};this.add(i.schedule(d,e,o)),this.add(i.schedule(p,r,a))}else{var u={subscriber:this,window:s,windowTimeSpan:e};this.add(i.schedule(f,e,u))}}return n(t,c),t.prototype._next=function(t){for(var e=this.windows,r=e.length,n=0;n<r;n++){var i=e[n];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(t){for(var e=this.windows;0<e.length;)e.shift().error(t);this.destination.error(t)},t.prototype._complete=function(){for(var t=this.windows;0<t.length;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},t.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},t.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},t}(o.Subscriber);function f(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function p(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,s=r.openWindow(),o={action:this,subscription:null},a={subscriber:r,window:s,context:o};o.subscription=n.schedule(d,e,a),this.add(o.subscription),this.schedule(t,i)}function d(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=r(7),f=r(6),p=r(9),d=r(8),i=r(2),y=r(3);e.windowToggle=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.openings,this.closingSelector))},t}(),o=function(s){function t(t,e,r){s.call(this,t),this.openings=e,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=y.subscribeToResult(this,e,e))}return n(t,s),t.prototype._next=function(t){var e=this.contexts;if(e)for(var r=e.length,n=0;n<r;n++)e[n].window.next(t)},t.prototype._error=function(t){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,n=-1;++n<r;){var i=e[n];i.window.error(t),i.subscription.unsubscribe()}s.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.complete(),n.subscription.unsubscribe()}s.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(t,e,r,n,i){if(t===this.openings){var s=this.closingSelector,o=p.tryCatch(s)(e);if(o===d.errorObject)return this.error(d.errorObject.e);var a=new l.Subject,u=new f.Subscription,c={window:a,subscription:u};this.contexts.push(c);var h=y.subscribeToResult(this,o,c);h.closed?this.closeWindow(this.contexts.length-1):(h.context=c,u.add(h)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))},t.prototype.notifyError=function(t){this.error(t)},t.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},t.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,r=e[t],n=r.window,i=r.subscription;e.splice(t,1),n.complete(),i.unsubscribe()}},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(7),o=r(9),a=r(8),i=r(2),u=r(3);e.windowWhen=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(r){function t(t,e){r.call(this,t),this.destination=t,this.closingSelector=e,this.openWindow()}return n(t,r),t.prototype.notifyNext=function(t,e,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){this.openWindow(t)},t.prototype._next=function(t){this.window.next(t)},t.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var r=this.window=new s.Subject;this.destination.next(r);var n=o.tryCatch(this.closingSelector)();if(n===a.errorObject){var i=a.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=u.subscribeToResult(this,n))},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),a=r(3);e.withLatestFrom=function(){for(var n=[],t=0;t<arguments.length;t++)n[t-0]=arguments[t];return function(t){var e;"function"==typeof n[n.length-1]&&(e=n.pop());var r=n;return t.lift(new s(r,e))}};var s=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.observables,this.project))},t}(),o=function(o){function t(t,e,r){o.call(this,t),this.observables=e,this.project=r,this.toRespond=[];var n=e.length;this.values=new Array(n);for(var i=0;i<n;i++)this.toRespond.push(i);for(i=0;i<n;i++){var s=e[i];this.add(a.subscribeToResult(this,s,s,i))}}return n(t,o),t.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e;var s=this.toRespond;if(0<s.length){var o=s.indexOf(r);-1!==o&&s.splice(o,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=r(39);e.zipAll=function(e){return function(t){return t.lift(new n.ZipOperator(e))}}},function(t,e,r){"use strict";var n=r(169),i=function(){function t(){this.subscriptions=[]}return t.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new n.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},t.prototype.logUnsubscribedFrame=function(t){var e=this.subscriptions,r=e[t];e[t]=new n.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},t}();e.SubscriptionLoggable=i},function(t,e,r){"use strict";var n=function(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e};e.SubscriptionLog=n},function(t,e,r){"use strict";e.applyMixins=function(t,e){for(var r=0,n=e.length;r<n;r++)for(var i=e[r],s=Object.getOwnPropertyNames(i.prototype),o=0,a=s.length;o<a;o++){var u=s[o];t.prototype[u]=i.prototype[u]}}},function(t,e,r){"use strict";var s=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(23),i=function(n){function t(t,e){var r=this;void 0===t&&(t=o),void 0===e&&(e=Number.POSITIVE_INFINITY),n.call(this,t,function(){return r.frame}),this.maxFrames=e,this.frame=0,this.index=-1}return s(t,n),t.prototype.flush=function(){for(var t,e,r=this.actions,n=this.maxFrames;(e=r.shift())&&(this.frame=e.delay)<=n&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},t.frameTimeFactor=10,t}(r(24).AsyncScheduler);e.VirtualTimeScheduler=i;var o=function(n){function i(t,e,r){void 0===r&&(r=t.index+=1),n.call(this,t,e),this.scheduler=t,this.work=e,this.index=r,this.active=!0,this.index=t.index=r}return s(i,n),i.prototype.schedule=function(t,e){if(void 0===e&&(e=0),!this.id)return n.prototype.schedule.call(this,t,e);this.active=!1;var r=new i(this.scheduler,this.work);return this.add(r),r.schedule(t,e)},i.prototype.requestAsyncId=function(t,e,r){void 0===r&&(r=0),this.delay=t.frame+r;var n=t.actions;return n.push(this),n.sort(i.sortActions),!0},i.prototype.recycleAsyncId=function(t,e,r){void 0===r&&(r=0)},i.prototype._execute=function(t,e){if(!0===this.active)return n.prototype._execute.call(this,t,e)},i.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},i}(n.AsyncAction);e.VirtualAction=o},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(504)),n(e(173)),n(e(505)),n(e(506)),n(e(507)),n(e(508)),n(e(509)),n(e(175)),n(e(510)),n(e(551)),n(e(552)),n(e(553))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.TYPE_SYSTEM="System",t.TYPE_USER="User",t}();e.Actor=n;var i=function(){};e.Audit=i;var s=function(){};e.Context=s;var o=function(){this.os="",this.make="",this.id="",this.mem=-1,this.idisk=-1,this.edisk=-1,this.scrn=-1,this.cpu="",this.sims=-1,this.cap=[]};e.DeviceSpecification=o;var a=function(){};e.End=a;var u=function(){};e.Error=u;var c=function(){};e.Etags=c;var h=function(){};e.ExData=h;var l=function(){};e.Feedback=l;var f=function(){};e.GameData=f;var p=function(){};e.CorrelationData=p;var d=function(){};e.Rollup=d;var y=function(){};e.Visit=y;var v=function(){};e.Impression=v;var b=function(){this.pos=[],this.values=[]};e.Interact=b;var g=function(){};e.Interrupt=g;var m=function(){};e.Log=m;var S=function(){};e.ProducerData=S;var E=function(){};e.Search=E;var w=function(){};e.Share=w;var _=function(){};e.Start=_;var A=function(){};e.TelemetryObject=A;var T=function(){};e.ProcessedEventModel=T},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,s=r(16);(n=e.TelemetryEntry||(e.TelemetryEntry={}))._ID="_id",n.TABLE_NAME="telemetry",n.COLUMN_NAME_EVENT_TYPE="event_type",n.COLUMN_NAME_EVENT="event",n.COLUMN_NAME_TIMESTAMP="timestamp",n.COLUMN_NAME_PRIORITY="priority",n.getCreateEntry=function(){return"CREATE TABLE "+n.TABLE_NAME+" ("+n._ID+" INTEGER PRIMARY KEY,"+n.COLUMN_NAME_EVENT_TYPE+s.DbConstants.TEXT_TYPE+s.DbConstants.COMMA_SEP+n.COLUMN_NAME_EVENT+s.DbConstants.TEXT_TYPE+s.DbConstants.COMMA_SEP+n.COLUMN_NAME_TIMESTAMP+s.DbConstants.INT_TYPE+s.DbConstants.COMMA_SEP+n.COLUMN_NAME_PRIORITY+s.DbConstants.INT_TYPE+" )"},n.getDeleteEntry=function(){return"DROP TABLE IF EXISTS "+n.TABLE_NAME},(i=e.TelemetryProcessedEntry||(e.TelemetryProcessedEntry={}))._ID="_id",i.TABLE_NAME="processed_telemetry",i.COLUMN_NAME_MSG_ID="msg_id",i.COLUMN_NAME_DATA="data",i.COLUMN_NAME_NUMBER_OF_EVENTS="event_count",i.COLUMN_NAME_PRIORITY="priority",i.getCreateEntry=function(){return"CREATE TABLE "+i.TABLE_NAME+" ("+i._ID+" INTEGER PRIMARY KEY,"+i.COLUMN_NAME_MSG_ID+s.DbConstants.TEXT_TYPE+s.DbConstants.COMMA_SEP+i.COLUMN_NAME_DATA+s.DbConstants.TEXT_TYPE+s.DbConstants.COMMA_SEP+i.COLUMN_NAME_NUMBER_OF_EVENTS+s.DbConstants.INT_TYPE+s.DbConstants.COMMA_SEP+i.COLUMN_NAME_PRIORITY+s.DbConstants.INT_TYPE+" )"},i.getDeleteEntry=function(){return"DROP TABLE IF EXISTS "+i.TABLE_NAME}},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function i(t,e){var r=n.call(this,t+e)||this;return r.errorCode=t,r.errorType=e,Object.setPrototypeOf(r,i.prototype),r}return s(i,n),i}(Error);e.TelemetryError=i},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(511))},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(519))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(10),s=r(45),o=r(529),a=r(179),u=function(){function t(t,e,r,n){this.dbService=t,this.contentServiceConfig=e,this.sessionAuthenticator=r,this.apiService=n,this.GET_CONTENT_DETAILS_ENDPOINT="read/"}return t.getReadContentQuery=function(t){return{table:s.ContentEntry.TABLE_NAME,selection:(new a.QueryBuilder).where("? = ?").args([s.ContentEntry.COLUMN_NAME_IDENTIFIER,t]).end().build(),limit:"1"}},t.prototype.handle=function(e){var r=this;return this.readContentFromDB(e.contentId).mergeMap(function(t){return t&&t[0]?i.Observable.of(o.ContentMapper.mapContentDBEntryToContent(t[0])):r.fetchFromServer(e).map(function(t){return o.ContentMapper.mapContentDBEntryToContent(o.ContentMapper.mapContentDataToContentDBEntry(t))})})},t.prototype.readContentFromDB=function(t){return this.dbService.read({table:s.ContentEntry.TABLE_NAME,selection:(new a.QueryBuilder).where("? = ?").args([s.ContentEntry.COLUMN_NAME_IDENTIFIER,t]).end().build(),limit:"1"})},t.prototype.getContentFromDB=function(t){return this.dbService.read({table:s.ContentEntry.TABLE_NAME,selection:(new a.QueryBuilder).where("? = ?").args([s.ContentEntry.COLUMN_NAME_IDENTIFIER,t]).end().build(),limit:"1"}).toPromise()},t.prototype.fetchFromServer=function(t){return this.apiService.fetch((new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.contentServiceConfig.apiPath+this.GET_CONTENT_DETAILS_ENDPOINT+t.contentId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build()).map(function(t){return t.body.result})},t}();e.GetContentDetailsHandler=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(){this.query=""}return r.prototype.where=function(t){return this.query+=t.trim(),new r.WhereDecorator(this)},r.prototype.build=function(){return this.query},r.ConstraintDecorator=function(){function t(t){this.queryBuilder=t}return t.prototype.and=function(){return this.queryBuilder.query+=" AND ",this.queryBuilder},t.prototype.or=function(){return this.queryBuilder.query+=" OR ",this.queryBuilder},t.prototype.end=function(){return this.queryBuilder},t}(),r.WhereDecorator=function(){function t(t){this.queryBuilder=t}return t.prototype.args=function(t){var e=this;return t.forEach(function(t){e.interpolate(t)}),new r.ConstraintDecorator(this.queryBuilder)},t.prototype.interpolate=function(t){this.queryBuilder.query=this.queryBuilder.query.replace("?",t)},t}(),r}();e.QueryBuilder=n},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ContentDeleteStatus||(e.ContentDeleteStatus={}))[n.NOT_FOUND=-1]="NOT_FOUND",n[n.DELETED_SUCCESSFULLY=1]="DELETED_SUCCESSFULLY"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._stack=t||[]}return Object.defineProperty(t.prototype,"count",{get:function(){return this._stack.length},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this._stack.push(t)},t.prototype.pop=function(){return this._stack.pop()},t.prototype.clear=function(){this._stack=[]},t.prototype.isEmpty=function(){return!!this._stack.length},t.prototype.addAll=function(t){this._stack=this._stack.concat(t)},t}();e.Stack=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(183),i=function(){function t(t){this._uid=t,this._sid=n.UniqueId.generateUniqueId(),this._createdTime=Date.now()}return Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createdTime",{get:function(){return this._createdTime},enumerable:!0,configurable:!0}),t}();e.ProfileSession=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(534),i=function(){function t(){}return t.generateUniqueId=function(){return n.uuidv4()},t}();e.UniqueId=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,s,o=r(185);(n=e.ProfileEntry||(e.ProfileEntry={}))._ID="_id",n.TABLE_NAME="profiles",n.createTable=function(){return"CREATE TABLE "+n.TABLE_NAME+" (\n            "+n._ID+" INTEGER PRIMARY KEY,\n            "+o.ProfileConstant.UID+" TEXT,\n            "+o.ProfileConstant.HANDLE+" TEXT,\n            "+o.ProfileConstant.CREATED_AT+" INTEGER,\n            "+o.ProfileConstant.MEDIUM+" TEXT DEFAULT '',\n            "+o.ProfileConstant.BOARD+" TEXT DEFAULT '',\n            "+o.ProfileConstant.SUBJECT+" TEXT DEFAULT '',\n            "+o.ProfileConstant.PROFILE_TYPE+" TEXT DEFAULT 'teacher',\n            "+o.ProfileConstant.GRADE+" TEXT DEFAULT '',\n            "+o.ProfileConstant.SYLLABUS+" TEXT DEFAULT '',\n            "+o.ProfileConstant.SOURCE+" TEXT DEFAULT '',\n            "+o.ProfileConstant.GRADE_VALUE+" TEXT DEFAULT '')"},n.deleteTable=function(){return"DROP TABLE IF EXISTS "+n.TABLE_NAME},(i=e.GroupProfileEntry||(e.GroupProfileEntry={}))._ID="_id",i.TABLE_NAME="group_profile",i.createTable=function(){return"CREATE TABLE "+i.TABLE_NAME+" (\n            "+i._ID+" INTEGER PRIMARY KEY,\n            "+o.GroupProfileConstant.UID+" TEXT,\n            "+o.GroupProfileConstant.GID+" TEXT )"},i.deleteTable=function(){return"DROP TABLE IF EXISTS"+i.TABLE_NAME},(s=e.GroupEntry||(e.GroupEntry={}))._ID="_id",s.TABLE_NAME="groups",s.createTable=function(){return"CREATE TABLE "+s.TABLE_NAME+" (\n            "+s._ID+" INTEGER PRIMARY KEY,\n            "+o.GroupsConstant.GID+" TEXT,\n            "+o.GroupsConstant.NAME+" TEXT,\n            "+o.GroupsConstant.SYLLABUS+" TEXT DEFAULT '',\n            "+o.GroupsConstant.GRADE+" TEXT DEFAULT '',\n            "+o.GroupsConstant.GRADE_VALUE+" TEXT DEFAULT '',\n            "+o.GroupsConstant.CREATED_AT+"  INTEGER,\n            "+o.GroupsConstant.UPDATED_AT+" INTEGER\n        )"},s.deleteTable=function(){return"DROP TABLE IF EXISTS"+s.TABLE_NAME}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.UID=" UID",t.HANDLE=" HANDLE",t.CREATED_AT=" CREATED_AT",t.MEDIUM=" MEDIUM",t.BOARD="BOARD",t.PROFILE_TYPE="PROFILE_TYPE",t.GRADE_VALUE=" GRADE_VALUE",t.SUBJECT="SUBJECT",t.GRADE="GRADE",t.SYLLABUS="SYLLABUS",t.SOURCE="PROFILESOURCE",t}();e.ProfileConstant=n;var i=function(){function t(){}return t.UID=" UID",t.GID="GID",t}();e.GroupProfileConstant=i;var s=function(){function t(){}return t.GID=" GID",t.NAME=" NAME",t.SYLLABUS="SYLLABUS",t.GRADE="GRADE",t.GRADE_VALUE=" GRADE_VALUE",t.CREATED_AT="CREATED_AT",t.UPDATED_AT="UPDATED_AT",t}();e.GroupsConstant=s},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.KeyValueStoreEntry||(e.KeyValueStoreEntry={}))._ID="_id",n.KEY="key",n.VALUE="value",n.TABLE_NAME="no_sql",n.createTable=function(){return"CREATE TABLE "+n.TABLE_NAME+" ("+n._ID+" INTEGER PRIMARY KEY,"+n.KEY+" TEXT, "+n.VALUE+" TEXT )"},n.deleteTable=function(){return"DROP TABLE IF EXISTS "+n.TABLE_NAME}},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(16)),n(e(5)),n(e(172)),n(e(176)),n(e(177)),n(e(66)),n(e(554)),n(e(68)),n(e(556)),n(e(43))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.DATE_TYPE="DATE",t.TEXT_TYPE="TEXT",t.INT_TYPE="INTEGER",t.REAL_TYPE="REAL",t.COMMA_SEP=",",t.MAX_NUM_OF_EVENTS=1e3,t.MAX_NUM_OF_PROCESSED_EVENTS=1,t.ERROR="DB_ERROR",t.BLOB_TYPE="BLOB",t.NOT_NULL="NOT NULL",t.NULL="NULL",t}();e.DbConstants=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.targetDbVersion=t}return t.prototype.required=function(t,e){return t<this.targetDbVersion&&this.targetDbVersion<=e},t}();e.Migration=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.DbService=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.map=function(t,e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t[e[n]]);return r},t}();e.ObjectMapper=n;var i=function(){function t(){}return t.toDb=function(t){for(var e in t)t.hasOwnProperty(e)&&"object"==typeof t[e]&&(t[e]=JSON.stringify(t[e]));return t},t.fromDb=function(t){for(var e in t)if(t.hasOwnProperty(e)&&"string"==typeof t[e])try{t[e]=JSON.parse(t[e])}catch(t){}return t},t}();e.NoSqlFormatter=i},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ResponseCode||(e.ResponseCode={}))[n.HTTP_UNAUTHORISED=401]="HTTP_UNAUTHORISED",n[n.HTTP_SUCCESS=200]="HTTP_SUCCESS",n[n.SUCCESS_GENERIC=2e3]="SUCCESS_GENERIC",n[n.ERROR_GENERIC=1e3]="ERROR_GENERIC",n[n.ERROR_DB=1001]="ERROR_DB",n[n.ERROR_IO=1002]="ERROR_IO";var i=function(){function t(){}return Object.defineProperty(t.prototype,"responseCode",{get:function(){return this._responseCode},set:function(t){this._responseCode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorMesg",{get:function(){return this._errorMesg},set:function(t){this._errorMesg=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},set:function(t){this._body=t},enumerable:!0,configurable:!0}),t}();e.Response=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KEY_API_TOKEN="key_api_token",e.KEY_USER_TOKEN="key_user_token",e.KEY_ACCESS_TOKEN="key_user_id",e.KEY_REFRESH_TOKEN="key_refresh_token"},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.HttpRequestType||(e.HttpRequestType={})).GET="GET",n.POST="POST",n.PATCH="PATCH";var i=function(){function e(){this._requiredApiToken=!0,this._responseInterceptors=[],this._authenticators=[]}return e.prototype.addAuthenticator=function(t){this._authenticators.push(t)},Object.defineProperty(e.prototype,"authenticators",{get:function(){return this._authenticators},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredApiToken",{get:function(){return this._requiredApiToken},set:function(t){this._requiredApiToken=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseInterceptors",{get:function(){return this._responseInterceptors},set:function(t){this._responseInterceptors=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},set:function(t){this._headers=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(t){this._body=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return this._parameters},set:function(t){this._parameters=t},enumerable:!0,configurable:!0}),e.Builder=function(){function t(){this.request=new e}return t.prototype.withPath=function(t){return this.request._path=t,this},t.prototype.withType=function(t){return this.request._type=t,this},t.prototype.withApiToken=function(t){return this.request._requiredApiToken=t,this},t.prototype.withInterceptors=function(t){return this.request._responseInterceptors=t,this},t.prototype.withAuthenticator=function(t){return this.request._authenticators.push(t),this},t.prototype.withHeaders=function(t){return this.request._headers=t,this},t.prototype.withBody=function(t){return"object"==typeof t&&(t=JSON.stringify(t)),this.request._body=t,this},t.prototype.withParameters=function(t){return this.request._parameters=t,this},t.prototype.build=function(){if(!this.request._path||!this.request._type)throw new Error;return this.request},t}(),e}();e.Request=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.HttpClient=n},function(t,Ie,e){(function(e){var a={userAgent:!1},t={};
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/
if(void 0===r)var r={};r.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=e.prototype,t.prototype=new n,(t.prototype.constructor=t).superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var i;for(i in r)t.prototype[i]=r[i];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(a.userAgent)&&(s=function(t,e){for(i=0;i<o.length;i+=1){var r=o[i],n=e[r];"function"==typeof n&&n!=Object.prototype[r]&&(t[r]=n)}})}catch(t){}s(t.prototype,r)}}};
/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var h,n,i,s,l,o,u,c,f,p,d,y,v,b,g,m,S,E,w,_,A,T,x,O,C,F,I,P,N,D,R,L,j,B,M,H,k,U,V,K=K||(h=Math,i=(n={}).lib={},s=i.Base=function(){function r(){}return{extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=i.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<i;s+=4)e[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=h.ceil(e/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*h.random()|0);return new l.init(e,t)}}),o=n.enc={},u=o.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new l.init(r,e/2)}},c=o.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new l.init(r,e)}},f=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},p=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,s=n/(4*i),o=(s=t?h.ceil(s):h.max((0|s)-this._minBufferSize,0))*i,a=h.min(4*o,n);if(o){for(var u=0;u<o;u+=i)this._doProcessBlock(r,u);var c=r.splice(0,o);e.sigBytes-=a}return new l.init(c,a)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),i.Hasher=p.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new d.HMAC.init(r,e).finalize(t)}}}),d=n.algo={},n);v=(y=K).lib,b=v.Base,g=v.WordArray,(y=y.x64={}).Word=b.extend({init:function(t,e){this.high=t,this.low=e}}),y.WordArray=b.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var i=t[n];r.push(i.high),r.push(i.low)}return g.create(r,this.sigBytes)},clone:function(){for(var t=b.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}}),K.lib.Cipher||function(t){var e=(p=K).lib,r=e.Base,o=e.WordArray,n=e.BufferedBlockAlgorithm,i=p.enc.Base64,s=p.algo.EvpKDF,a=e.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,e,r){return("string"==typeof e?d:f).encrypt(n,t,e,r)},decrypt:function(t,e,r){return("string"==typeof e?d:f).decrypt(n,t,e,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=p.mode={},c=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},h=(e.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;c.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),h.Decryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),c.call(this,t,e,n),this._prevBlock=i}}),u=u.CBC=h,h=(p.pad={}).Pkcs7={pad:function(t,e){for(var r,n=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(n);r=o.create(i,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:h}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var l=e.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(u=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=o.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return l.create({ciphertext:t,salt:r})}},e.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,l.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=o.random(8)),t=s.create({keySize:e+r}).compute(t,n),r=o.create(t.words.slice(e),4*r),t.sigBytes=4*e,l.create({key:t,iv:r,salt:n})}},d=e.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:p}),encrypt:function(t,e,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=f.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,f.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=K,e=t.lib.BlockCipher,r=t.algo,o=[],n=[],i=[],s=[],a=[],u=[],c=[],h=[],l=[],f=[],p=[],d=0;d<256;d++)p[d]=d<128?d<<1:d<<1^283;var y=0,v=0;for(d=0;d<256;d++){var b=(b=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&b^99;o[y]=b;var g=p[n[b]=y],m=p[g],S=p[m],E=257*p[b]^16843008*b;i[y]=E<<24|E>>>8,s[y]=E<<16|E>>>16,a[y]=E<<8|E>>>24,u[y]=E,E=16843009*S^65537*m^257*g^16843008*y,c[b]=E<<24|E>>>8,h[b]=E<<16|E>>>16,l[b]=E<<8|E>>>24,f[b]=E,y?(y=g^p[p[p[S^g]]],v^=p[p[v]]):y=v=1}var w=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),n=this._keySchedule=[],i=0;i<r;i++)if(i<e)n[i]=t[i];else{var s=n[i-1];i%e?6<e&&4==i%e&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=w[i/e|0]<<24),n[i]=n[i-e]^s}for(t=this._invKeySchedule=[],e=0;e<r;e++)i=r-e,s=e%4?n[i]:n[i-4],t[e]=e<4||i<=4?s:c[o[s>>>24]]^h[o[s>>>16&255]]^l[o[s>>>8&255]]^f[o[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i,s,a,u,o)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,c,h,l,f,n),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,s,o,a){for(var u=this._nRounds,c=t[e]^r[0],h=t[e+1]^r[1],l=t[e+2]^r[2],f=t[e+3]^r[3],p=4,d=1;d<u;d++){var y=n[c>>>24]^i[h>>>16&255]^s[l>>>8&255]^o[255&f]^r[p++],v=n[h>>>24]^i[l>>>16&255]^s[f>>>8&255]^o[255&c]^r[p++],b=n[l>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&h]^r[p++];f=n[f>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&l]^r[p++],c=y,h=v,l=b}y=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^r[p++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^r[p++],b=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^r[p++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],t[e]=y,t[e+1]=v,t[e+2]=b,t[e+3]=f},keySize:8});t.AES=e._createHelper(r)}(),function(){function c(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function h(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}var t=K,e=(r=t.lib).WordArray,r=r.BlockCipher,n=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=n.DES=r.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=o[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(t=this._subKeys=[],n=0;n<16;n++){var i=t[n]=[],s=u[n];for(r=0;r<24;r++)i[r/6|0]|=e[(a[r]-1+s)%28]<<31-r%6,i[4+(r/6|0)]|=e[28+(a[r+24]-1+s)%28]<<31-r%6;for(i[0]=i[0]<<1|i[0]>>>31,r=1;r<7;r++)i[r]>>>=4*(r-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(e=this._invSubKeys=[],r=0;r<16;r++)e[r]=t[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],c.call(this,4,252645135),c.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),c.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],s=this._lBlock,o=this._rBlock,a=0,u=0;u<8;u++)a|=l[u][((o^i[u])&f[u])>>>0];this._lBlock=o,this._rBlock=s^a}r=this._lBlock,this._lBlock=this._rBlock,this._rBlock=r,c.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),c.call(this,16,65535),c.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});t.DES=r._createHelper(i),n=n.TripleDES=r.extend({_doReset:function(){var t=this._key.words;this._des1=i.createEncryptor(e.create(t.slice(0,2))),this._des2=i.createEncryptor(e.create(t.slice(2,4))),this._des3=i.createEncryptor(e.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),t.TripleDES=r._createHelper(n)}(),S=(m=K).lib.WordArray,m.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<r;o++)t.push(n.charAt(s>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map;(n=r.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],i=0,s=0;s<e;s++)if(s%4){var o=r.indexOf(t.charAt(s-1))<<s%4*2,a=r.indexOf(t.charAt(s))>>>6-s%4*2;n[i>>>2]|=(o|a)<<24-i%4*8,i++}return S.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(s){function _(t,e,r,n,i,s,o){return((t=t+(e&r|~e&n)+i+o)<<s|t>>>32-s)+e}function A(t,e,r,n,i,s,o){return((t=t+(e&n|r&~n)+i+o)<<s|t>>>32-s)+e}function T(t,e,r,n,i,s,o){return((t=t+(e^r^n)+i+o)<<s|t>>>32-s)+e}function x(t,e,r,n,i,s,o){return((t=t+(r^(e|~n))+i+o)<<s|t>>>32-s)+e}for(var t=K,e=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,O=[],i=0;i<64;i++)O[i]=4294967296*s.abs(s.sin(i+1))|0;n=n.MD5=r.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=t[o=e+r];t[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}r=this._hash.words;var i,s,o=t[e+0],a=(n=t[e+1],t[e+2]),u=t[e+3],c=t[e+4],h=t[e+5],l=t[e+6],f=t[e+7],p=t[e+8],d=t[e+9],y=t[e+10],v=t[e+11],b=t[e+12],g=t[e+13],m=t[e+14],S=t[e+15],E=r[0],w=x(w=x(w=x(w=x(w=T(w=T(w=T(w=T(w=A(w=A(w=A(w=A(w=_(w=_(w=_(w=_(w=r[1],s=_(s=r[2],i=_(i=r[3],E=_(E,w,s,i,o,7,O[0]),w,s,n,12,O[1]),E,w,a,17,O[2]),i,E,u,22,O[3]),s=_(s,i=_(i,E=_(E,w,s,i,c,7,O[4]),w,s,h,12,O[5]),E,w,l,17,O[6]),i,E,f,22,O[7]),s=_(s,i=_(i,E=_(E,w,s,i,p,7,O[8]),w,s,d,12,O[9]),E,w,y,17,O[10]),i,E,v,22,O[11]),s=_(s,i=_(i,E=_(E,w,s,i,b,7,O[12]),w,s,g,12,O[13]),E,w,m,17,O[14]),i,E,S,22,O[15]),s=A(s,i=A(i,E=A(E,w,s,i,n,5,O[16]),w,s,l,9,O[17]),E,w,v,14,O[18]),i,E,o,20,O[19]),s=A(s,i=A(i,E=A(E,w,s,i,h,5,O[20]),w,s,y,9,O[21]),E,w,S,14,O[22]),i,E,c,20,O[23]),s=A(s,i=A(i,E=A(E,w,s,i,d,5,O[24]),w,s,m,9,O[25]),E,w,u,14,O[26]),i,E,p,20,O[27]),s=A(s,i=A(i,E=A(E,w,s,i,g,5,O[28]),w,s,a,9,O[29]),E,w,f,14,O[30]),i,E,b,20,O[31]),s=T(s,i=T(i,E=T(E,w,s,i,h,4,O[32]),w,s,p,11,O[33]),E,w,v,16,O[34]),i,E,m,23,O[35]),s=T(s,i=T(i,E=T(E,w,s,i,n,4,O[36]),w,s,c,11,O[37]),E,w,f,16,O[38]),i,E,y,23,O[39]),s=T(s,i=T(i,E=T(E,w,s,i,g,4,O[40]),w,s,o,11,O[41]),E,w,u,16,O[42]),i,E,l,23,O[43]),s=T(s,i=T(i,E=T(E,w,s,i,d,4,O[44]),w,s,b,11,O[45]),E,w,S,16,O[46]),i,E,a,23,O[47]),s=x(s,i=x(i,E=x(E,w,s,i,o,6,O[48]),w,s,f,10,O[49]),E,w,m,15,O[50]),i,E,h,21,O[51]),s=x(s,i=x(i,E=x(E,w,s,i,b,6,O[52]),w,s,u,10,O[53]),E,w,y,15,O[54]),i,E,n,21,O[55]),s=x(s,i=x(i,E=x(E,w,s,i,p,6,O[56]),w,s,S,10,O[57]),E,w,l,15,O[58]),i,E,g,21,O[59]),s=x(s,i=x(i,E=x(E,w,s,i,c,6,O[60]),w,s,v,10,O[61]),E,w,a,15,O[62]),i,E,d,21,O[63]);r[0]=r[0]+E|0,r[1]=r[1]+w|0,r[2]=r[2]+s|0,r[3]=r[3]+i|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;var i=s.floor(r/4294967296);for(e[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,r=0;r<4;r++)n=e[r],e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),t.MD5=r._createHelper(n),t.HmacMD5=r._createHmacHelper(n)}(Math),w=(T=(E=K).lib).WordArray,_=T.Hasher,A=[],T=E.algo.SHA1=_.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=0;u<80;u++){if(u<16)A[u]=0|t[e+u];else{var c=A[u-3]^A[u-8]^A[u-14]^A[u-16];A[u]=c<<1|c>>>31}c=(n<<5|n>>>27)+a+A[u],c=u<20?c+(1518500249+(i&s|~i&o)):u<40?c+(1859775393+(i^s^o)):u<60?c+((i&s|i&o|s&o)-1894007588):c+((i^s^o)-899497514),a=o,o=s,s=i<<30|i>>>2,i=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=_.clone.call(this);return t._hash=this._hash.clone(),t}}),E.SHA1=_._createHelper(T),E.HmacSHA1=_._createHmacHelper(T),function(i){for(var t=K,e=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,s=[],d=[],o=function(t){return 4294967296*(t-(0|t))|0},a=2,u=0;u<64;){var c;t:{c=a;for(var h=i.sqrt(c),l=2;l<=h;l++)if(!(c%l)){c=!1;break t}c=!0}c&&(u<8&&(s[u]=o(i.pow(a,.5))),d[u]=o(i.pow(a,1/3)),u++),a++}var y=[];n=n.SHA256=r.extend({_doReset:function(){this._hash=new e.init(s.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],c=r[6],h=r[7],l=0;l<64;l++){if(l<16)y[l]=0|t[e+l];else{var f=y[l-15],p=y[l-2];y[l]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+y[l-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+y[l-16]}f=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+d[l]+y[l],p=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&s^i&s),h=c,c=u,u=a,a=o+f|0,o=s,s=i,i=n,n=f+p|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+c|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=i.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA256=r._createHelper(n),t.HmacSHA256=r._createHmacHelper(n)}(Math),O=(x=K).lib.WordArray,C=(F=x.algo).SHA256,F=F.SHA224=C.extend({_doReset:function(){this._hash=new O.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=C._doFinalize.call(this);return t.sigBytes-=4,t}}),x.SHA224=C._createHelper(F),x.HmacSHA224=C._createHmacHelper(F),function(){function t(){return n.create.apply(n,arguments)}for(var e=K,r=e.lib.Hasher,n=(s=e.x64).Word,i=s.WordArray,s=e.algo,et=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],rt=[],o=0;o<80;o++)rt[o]=t();s=s.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=(c=this._hash.words)[0],n=c[1],i=c[2],s=c[3],o=c[4],a=c[5],u=c[6],c=c[7],h=r.high,l=r.low,f=n.high,p=n.low,d=i.high,y=i.low,v=s.high,b=s.low,g=o.high,m=o.low,S=a.high,E=a.low,w=u.high,_=u.low,A=c.high,T=c.low,x=h,O=l,C=f,F=p,I=d,P=y,N=v,D=b,R=g,L=m,j=S,B=E,M=w,H=_,k=A,U=T,V=0;V<80;V++){var K=rt[V];if(V<16)var q=K.high=0|t[e+2*V],G=K.low=0|t[e+2*V+1];else{q=((G=(q=rt[V-15]).high)>>>1|(Y=q.low)<<31)^(G>>>8|Y<<24)^G>>>7;var Y=(Y>>>1|G<<31)^(Y>>>8|G<<24)^(Y>>>7|G<<25),W=((G=(W=rt[V-2]).high)>>>19|(z=W.low)<<13)^(G<<3|z>>>29)^G>>>6,z=(z>>>19|G<<13)^(z<<3|G>>>29)^(z>>>6|G<<26),X=(G=rt[V-7]).high,J=($=rt[V-16]).high,$=$.low;q=(q=(q=q+X+((G=Y+G.low)>>>0<Y>>>0?1:0))+W+((G=G+z)>>>0<z>>>0?1:0))+J+((G=G+$)>>>0<$>>>0?1:0);K.high=q,K.low=G}X=R&j^~R&M,$=L&B^~L&H,K=x&C^x&I^C&I;var Z=O&F^O&P^F&P,Q=(Y=(x>>>28|O<<4)^(x<<30|O>>>2)^(x<<25|O>>>7),W=(O>>>28|x<<4)^(O<<30|x>>>2)^(O<<25|x>>>7),(z=et[V]).high),tt=z.low;J=k+((R>>>14|L<<18)^(R>>>18|L<<14)^(R<<23|L>>>9))+((z=U+((L>>>14|R<<18)^(L>>>18|R<<14)^(L<<23|R>>>9)))>>>0<U>>>0?1:0),k=M,U=H,M=j,H=B,j=R,B=L,R=N+(J=(J=(J=J+X+((z=z+$)>>>0<$>>>0?1:0))+Q+((z=z+tt)>>>0<tt>>>0?1:0))+q+((z=z+G)>>>0<G>>>0?1:0))+((L=D+z|0)>>>0<D>>>0?1:0)|0,N=I,D=P,I=C,P=F,C=x,F=O,x=J+(K=Y+K+((G=W+Z)>>>0<W>>>0?1:0))+((O=z+G|0)>>>0<z>>>0?1:0)|0}l=r.low=l+O,r.high=h+x+(l>>>0<O>>>0?1:0),p=n.low=p+F,n.high=f+C+(p>>>0<F>>>0?1:0),y=i.low=y+P,i.high=d+I+(y>>>0<P>>>0?1:0),b=s.low=b+D,s.high=v+N+(b>>>0<D>>>0?1:0),m=o.low=m+L,o.high=g+R+(m>>>0<L>>>0?1:0),E=a.low=E+B,a.high=S+j+(E>>>0<B>>>0?1:0),_=u.low=_+H,u.high=w+M+(_>>>0<H>>>0?1:0),T=c.low=T+U,c.high=A+k+(T>>>0<U>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=r._createHelper(s),e.HmacSHA512=r._createHmacHelper(s)}(),P=(R=(I=K).x64).Word,N=R.WordArray,D=(R=I.algo).SHA512,R=R.SHA384=D.extend({_doReset:function(){this._hash=new N.init([new P.init(3418070365,3238371032),new P.init(1654270250,914150663),new P.init(2438529370,812702999),new P.init(355462360,4144912697),new P.init(1731405415,4290775857),new P.init(2394180231,1750603025),new P.init(3675008525,1694076839),new P.init(1203062813,3204075428)])},_doFinalize:function(){var t=D._doFinalize.call(this);return t.sigBytes-=16,t}}),I.SHA384=D._createHelper(R),I.HmacSHA384=D._createHmacHelper(R),function(){var t=K,e=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,E=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),w=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),_=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),A=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),T=e.create([0,1518500249,1859775393,2400959708,2840853838]),x=e.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=t[d=e+r];t[d]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i,s,o,a,u,c,h,l,f,p,d=this._hash.words,y=(n=T.words,x.words),v=E.words,b=w.words,g=_.words,m=A.words;c=i=d[0],h=s=d[1],l=o=d[2],f=a=d[3],p=u=d[4];var S;for(r=0;r<80;r+=1)S=i+t[e+v[r]]|0,S=r<16?S+((s^o^a)+n[0]):r<32?S+((s&o|~s&a)+n[1]):r<48?S+(((s|~o)^a)+n[2]):r<64?S+((s&a|o&~a)+n[3]):S+((s^(o|~a))+n[4]),S=(S=(S|=0)<<g[r]|S>>>32-g[r])+u|0,i=u,u=a,a=o<<10|o>>>22,o=s,s=S,S=c+t[e+b[r]]|0,S=r<16?S+((h^(l|~f))+y[0]):r<32?S+((h&f|l&~f)+y[1]):r<48?S+(((h|~l)^f)+y[2]):r<64?S+((h&l|~h&f)+y[3]):S+((h^l^f)+y[4]),S=(S=(S|=0)<<m[r]|S>>>32-m[r])+p|0,c=p,p=f,f=l<<10|l>>>22,l=h,h=S;S=d[1]+o+f|0,d[1]=d[2]+a+p|0,d[2]=d[3]+u+c|0,d[3]=d[4]+i+h|0,d[4]=d[0]+s+l|0,d[0]=S},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;for(e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,r=0;r<5;r++)n=e[r],e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.RIPEMD160=r._createHelper(n),t.HmacRIPEMD160=r._createHmacHelper(n)}(Math),j=(L=K).enc.Utf8,L.algo.HMAC=L.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=j.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),s=this._iKey=e.clone(),o=i.words,a=s.words,u=0;u<r;u++)o[u]^=1549556828,a[u]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}}),H=(B=(M=K).lib).Base,k=B.WordArray,U=(B=M.algo).HMAC,V=B.PBKDF2=H.extend({cfg:H.extend({keySize:4,hasher:B.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var r=this.cfg,n=U.create(r.hasher,t),i=k.create(),s=k.create([1]),o=i.words,a=s.words,u=r.keySize;for(r=r.iterations;o.length<u;){var c=n.update(e).finalize(s);n.reset();for(var h=c.words,l=h.length,f=c,p=1;p<r;p++){f=n.finalize(f),n.reset();for(var d=f.words,y=0;y<l;y++)h[y]^=d[y]}i.concat(c),a[0]++}return i.sigBytes=4*u,i}}),M.PBKDF2=function(t,e,r){return V.create(r).compute(t,e)};
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
var q,G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="=";function W(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=G.charAt(r>>6)+G.charAt(63&r);if(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=G.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=G.charAt(r>>2)+G.charAt((3&r)<<4)),Y)for(;0<(3&n.length);)n+=Y;return n}function z(t){var e,r,n,i="",s=0;for(e=0;e<t.length&&t.charAt(e)!=Y;++e)(n=G.indexOf(t.charAt(e)))<0||(s=0==s?(i+=rt(n>>2),r=3&n,1):1==s?(i+=rt(r<<2|n>>4),r=15&n,2):2==s?(i+=rt(r),i+=rt(n>>2),r=3&n,3):(i+=rt(r<<2|n>>4),i+=rt(15&n),0));return 1==s&&(i+=rt(r<<2)),i}function X(t){var e,r=z(t),n=new Array;for(e=0;2*e<r.length;++e)n[e]=parseInt(r.substring(2*e,2*e+2),16);return n}function J(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function $(){return new J(null)}q="Microsoft Internet Explorer"==a.appName?(J.prototype.am=function(t,e,r,n,i,s){for(var o=32767&e,a=e>>15;0<=--s;){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*o;i=((u=o*u+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i},30):"Netscape"!=a.appName?(J.prototype.am=function(t,e,r,n,i,s){for(;0<=--s;){var o=e*this[t++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i},26):(J.prototype.am=function(t,e,r,n,i,s){for(var o=16383&e,a=e>>14;0<=--s;){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*o;i=((u=o*u+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*c,r[n++]=268435455&u}return i},28),J.prototype.DB=q,J.prototype.DM=(1<<q)-1,J.prototype.DV=1<<q;J.prototype.FV=Math.pow(2,52),J.prototype.F1=52-q,J.prototype.F2=2*q-52;var Z,Q,tt="0123456789abcdefghijklmnopqrstuvwxyz",et=new Array;for(Z="0".charCodeAt(0),Q=0;Q<=9;++Q)et[Z++]=Q;for(Z="a".charCodeAt(0),Q=10;Q<36;++Q)et[Z++]=Q;for(Z="A".charCodeAt(0),Q=10;Q<36;++Q)et[Z++]=Q;function rt(t){return tt.charAt(t)}function nt(t,e){var r=et[t.charCodeAt(e)];return null==r?-1:r}function it(t){var e=$();return e.fromInt(t),e}function st(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function ot(t){this.m=t}function at(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function ut(t,e){return t&e}function ct(t,e){return t|e}function ht(t,e){return t^e}function lt(t,e){return t&~e}function ft(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function pt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function dt(){}function yt(t){return t}function vt(t){this.r2=$(),this.q3=$(),J.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}ot.prototype.convert=function(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t},ot.prototype.revert=function(t){return t},ot.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},ot.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},ot.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},at.prototype.convert=function(t){var e=$();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&0<e.compareTo(J.ZERO)&&this.m.subTo(e,e),e},at.prototype.revert=function(t){var e=$();return t.copyTo(e),this.reduce(e),e},at.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},at.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},at.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},J.prototype.copyTo=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},J.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},J.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;0<=--n;){var o=8==r?255&t[n]:nt(t,n);o<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,0<s&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&J.ZERO.subTo(this,this)},J.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},J.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;0<=r;--r)e[r+t]=this[r];for(r=t-1;0<=r;--r)e[r]=0;e.t=this.t+t,e.s=this.s},J.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},J.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;0<=r;--r)e[r+o+1]=this[r]>>i|a,a=(this[r]&s)<<n;for(r=o-1;0<=r;--r)e[r]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},J.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;0<n&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}},J.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:0<n&&(e[r++]=n),e.t=r,e.clamp()},J.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;0<=--i;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&J.ZERO.subTo(e,e)},J.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;0<=--r;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},J.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=$());var s=$(),o=this.s,a=t.s,u=this.DB-st(n[n.t-1]);0<u?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,h=s[c-1];if(0!=h){var l=h*(1<<this.F1)+(1<c?s[c-2]>>this.F2:0),f=this.FV/l,p=(1<<this.F1)/l,d=1<<this.F2,y=r.t,v=y-c,b=null==e?$():e;for(s.dlShiftTo(v,b),0<=r.compareTo(b)&&(r[r.t++]=1,r.subTo(b,r)),J.ONE.dlShiftTo(c,b),b.subTo(s,s);s.t<c;)s[s.t++]=0;for(;0<=--v;){var g=r[--y]==h?this.DM:Math.floor(r[y]*f+(r[y-1]+d)*p);if((r[y]+=s.am(0,g,r,v,0,c))<g)for(s.dlShiftTo(v,b),r.subTo(b,r);r[y]<--g;)r.subTo(b,r)}null!=e&&(r.drShiftTo(c,e),o!=a&&J.ZERO.subTo(e,e)),r.t=c,r.clamp(),0<u&&r.rShiftTo(u,r),o<0&&J.ZERO.subTo(r,r)}}},J.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},J.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},J.prototype.exp=function(t,e){if(4294967295<t||t<1)return J.ONE;var r=$(),n=$(),i=e.convert(this),s=st(t)-1;for(i.copyTo(r);0<=--s;)if(e.sqrTo(r,n),0<(t&1<<s))e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)},J.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(0<o--)for(a<this.DB&&0<(r=this[o]>>a)&&(i=!0,s=rt(r));0<=o;)a<e?(r=(this[o]&(1<<a)-1)<<e-a,r|=this[--o]>>(a+=this.DB-e)):(r=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),0<r&&(i=!0),i&&(s+=rt(r));return i?s:"0"},J.prototype.negate=function(){var t=$();return J.ZERO.subTo(this,t),t},J.prototype.abs=function(){return this.s<0?this.negate():this},J.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;0<=--r;)if(0!=(e=this[r]-t[r]))return e;return 0},J.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+st(this[this.t-1]^this.s&this.DM)},J.prototype.mod=function(t){var e=$();return this.abs().divRemTo(t,null,e),this.s<0&&0<e.compareTo(J.ZERO)&&t.subTo(e,e),e},J.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new ot(e):new at(e),this.exp(t,r)},J.ZERO=it(0),J.ONE=it(1),dt.prototype.convert=yt,dt.prototype.revert=yt,dt.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},dt.prototype.sqrTo=function(t,e){t.squareTo(e)},vt.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=$();return t.copyTo(e),this.reduce(e),e},vt.prototype.revert=function(t){return t},vt.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},vt.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},vt.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var bt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],gt=(1<<26)/bt[bt.length-1];
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function mt(){this.i=0,this.j=0,this.S=new Array}J.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},J.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=it(r),i=$(),s=$(),o="";for(this.divRemTo(n,i,s);0<i.signum();)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o},J.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=nt(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),o=s=0))}0<s&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&J.ZERO.subTo(this,this)},J.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(J.ONE.shiftLeft(t-1),ct,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(J.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),0<i?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},J.prototype.bitwiseTo=function(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},J.prototype.changeBit=function(t,e){var r=J.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},J.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,0<n?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},J.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},J.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},J.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;0<i;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},J.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;0<=--n;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},J.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(0<this.t)if(0==e)r=this[0]%t;else for(var n=this.t-1;0<=n;--n)r=(e*r+this[n])%t;return r},J.prototype.millerRabin=function(t){var e=this.subtract(J.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);bt.length<(t=t+1>>1)&&(t=bt.length);for(var i=$(),s=0;s<t;++s){i.fromInt(bt[Math.floor(Math.random()*bt.length)]);var o=i.modPow(n,this);if(0!=o.compareTo(J.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<r&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(J.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},J.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function(){var t=$();return this.copyTo(t),t},J.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},J.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},J.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},J.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},J.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(0<t--)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);0<=t;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(0<i||r!=this.s)&&(e[i++]=r);return e},J.prototype.equals=function(t){return 0==this.compareTo(t)},J.prototype.min=function(t){return this.compareTo(t)<0?this:t},J.prototype.max=function(t){return 0<this.compareTo(t)?this:t},J.prototype.and=function(t){var e=$();return this.bitwiseTo(t,ut,e),e},J.prototype.or=function(t){var e=$();return this.bitwiseTo(t,ct,e),e},J.prototype.xor=function(t){var e=$();return this.bitwiseTo(t,ht,e),e},J.prototype.andNot=function(t){var e=$();return this.bitwiseTo(t,lt,e),e},J.prototype.not=function(){for(var t=$(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},J.prototype.shiftLeft=function(t){var e=$();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},J.prototype.shiftRight=function(t){var e=$();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},J.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+ft(this[t]);return this.s<0?this.t*this.DB:-1},J.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=pt(this[r]^e);return t},J.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},J.prototype.setBit=function(t){return this.changeBit(t,ct)},J.prototype.clearBit=function(t){return this.changeBit(t,lt)},J.prototype.flipBit=function(t){return this.changeBit(t,ht)},J.prototype.add=function(t){var e=$();return this.addTo(t,e),e},J.prototype.subtract=function(t){var e=$();return this.subTo(t,e),e},J.prototype.multiply=function(t){var e=$();return this.multiplyTo(t,e),e},J.prototype.divide=function(t){var e=$();return this.divRemTo(t,e,null),e},J.prototype.remainder=function(t){var e=$();return this.divRemTo(t,null,e),e},J.prototype.divideAndRemainder=function(t){var e=$(),r=$();return this.divRemTo(t,e,r),new Array(e,r)},J.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),s=it(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new ot(e):e.isEven()?new vt(e):new at(e);var o=new Array,a=3,u=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),1<r){var h=$();for(n.sqrTo(o[1],h);a<=c;)o[a]=$(),n.mulTo(h,o[a-2],o[a]),a+=2}var l,f,p=t.t-1,d=!0,y=$();for(i=st(t[p])-1;0<=p;){for(u<=i?l=t[p]>>i-u&c:(l=(t[p]&(1<<i+1)-1)<<u-i,0<p&&(l|=t[p-1]>>this.DB+i-u)),a=r;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),d)o[l].copyTo(s),d=!1;else{for(;1<a;)n.sqrTo(s,y),n.sqrTo(y,s),a-=2;0<a?n.sqrTo(s,y):(f=s,s=y,y=f),n.mulTo(y,o[l],s)}for(;0<=p&&0==(t[p]&1<<i);)n.sqrTo(s,y),f=s,s=y,y=f,--i<0&&(i=this.DB-1,--p)}return n.revert(s)},J.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return J.ZERO;for(var r=t.clone(),n=this.clone(),i=it(1),s=it(0),o=it(0),a=it(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);0<=r.compareTo(n)?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=n.compareTo(J.ONE)?J.ZERO:0<=a.compareTo(t)?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},J.prototype.pow=function(t){return this.exp(t,new dt)},J.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),0<s&&(e.rShiftTo(s,e),r.rShiftTo(s,r));0<e.signum();)0<(i=e.getLowestSetBit())&&e.rShiftTo(i,e),0<(i=r.getLowestSetBit())&&r.rShiftTo(i,r),0<=e.compareTo(r)?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return 0<s&&r.lShiftTo(s,r),r},J.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=bt[bt.length-1]){for(e=0;e<bt.length;++e)if(r[0]==bt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<bt.length;){for(var n=bt[e],i=e+1;i<bt.length&&n<gt;)n*=bt[i++];for(n=r.modInt(n);e<i;)if(n%bt[e++]==0)return!1}return r.millerRabin(t)},J.prototype.square=function(){var t=$();return this.squareTo(t),t},mt.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(e=r=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},mt.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var St,Et,wt,_t=256;
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function At(){var t;t=(new Date).getTime(),Et[wt++]^=255&t,Et[wt++]^=t>>8&255,Et[wt++]^=t>>16&255,Et[wt++]^=t>>24&255,_t<=wt&&(wt-=_t)}if(null==Et){var Tt;if(Et=new Array,void(wt=0)!==t&&(void 0!==t.crypto||void 0!==t.msCrypto)){var xt=t.crypto||t.msCrypto;if(xt.getRandomValues){var Ot=new Uint8Array(32);for(xt.getRandomValues(Ot),Tt=0;Tt<32;++Tt)Et[wt++]=Ot[Tt]}else if("Netscape"==a.appName&&a.appVersion<"5"){var Ct=t.crypto.random(32);for(Tt=0;Tt<Ct.length;++Tt)Et[wt++]=255&Ct.charCodeAt(Tt)}}for(;wt<_t;)Tt=Math.floor(65536*Math.random()),Et[wt++]=Tt>>>8,Et[wt++]=255&Tt;wt=0,At()}function Ft(){if(null==St){for(At(),(St=new mt).init(Et),wt=0;wt<Et.length;++wt)Et[wt]=0;wt=0}return St.next()}function It(){}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Pt(t,e){return new J(t,e)}function Nt(t,e,r){for(var n="",i=0;n.length<e;)n+=r(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function Dt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Rt(t,e,r){for(var n="",i=0;n.length<e;)n+=r(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return n}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Lt(t,e){this.x=e,this.q=t}function jt(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=null==n?J.ONE:n,this.zinv=null}function Bt(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new jt(this,null,null)}It.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=Ft()},Dt.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},Dt.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&0<t.length&&0<e.length))throw"Invalid RSA public key";this.n=Pt(t,16),this.e=parseInt(e,16)}},Dt.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var r=new Array,n=t.length-1;0<=n&&0<e;){var i=t.charCodeAt(n--);r[--e]=i<128?i:127<i&&i<2048?(r[--e]=63&i|128,i>>6|192):(r[--e]=63&i|128,r[--e]=i>>6&63|128,i>>12|224)}r[--e]=0;for(var s=new It,o=new Array;2<e;){for(o[0]=0;0==o[0];)s.nextBytes(o);r[--e]=o[0]}return r[--e]=2,r[--e]=0,new J(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},Dt.prototype.encryptOAEP=function(t,e,r){var n=function(t,e,r,n){var i=Ht.crypto.MessageDigest,s=Ht.crypto.Util,o=null;if(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(t){return Qt(s.hashHex(te(t),o))}),t.length+2*n+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*n-2;a+=1)u+="\0";var c=r("")+u+""+t,h=new Array(n);(new It).nextBytes(h);var l=Nt(h,c.length,r),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^l.charCodeAt(a);var p=Nt(f,h.length,r),d=[0];for(a=0;a<h.length;a+=1)d[a+1]=h[a]^p.charCodeAt(a);return new J(d.concat(f))}(t,this.n.bitLength()+7>>3,e,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},Dt.prototype.type="RSA",Dt.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},Dt.prototype.setPrivate=function(t,e,r){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=r;else{if(!(null!=t&&null!=e&&0<t.length&&0<e.length))throw"Invalid RSA private key";this.n=Pt(t,16),this.e=parseInt(e,16),this.d=Pt(r,16)}},Dt.prototype.setPrivateEx=function(t,e,r,n,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&0<t.length&&0<e.length))throw"Invalid RSA private key in RSASetPrivateEx";this.n=Pt(t,16),this.e=parseInt(e,16),this.d=Pt(r,16),this.p=Pt(n,16),this.q=Pt(i,16),this.dmp1=Pt(s,16),this.dmq1=Pt(o,16),this.coeff=Pt(a,16)},Dt.prototype.generate=function(t,e){var r=new It,n=t>>1;this.e=parseInt(e,16);for(var i=new J(e,16);;){for(;this.p=new J(t-n,1,r),0!=this.p.subtract(J.ONE).gcd(i).compareTo(J.ONE)||!this.p.isProbablePrime(10););for(;this.q=new J(n,1,r),0!=this.q.subtract(J.ONE).gcd(i).compareTo(J.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(J.ONE),a=this.q.subtract(J.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo(J.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},Dt.prototype.decrypt=function(t){var e=Pt(t,16),r=this.doPrivate(e);return null==r?null:
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function(t,e){for(var r=t.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=e-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var s=255&r[n];s<128?i+=String.fromCharCode(s):191<s&&s<224?(i+=String.fromCharCode((31&s)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&s)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}(r,this.n.bitLength()+7>>3)},Dt.prototype.decryptOAEP=function(t,e,r){var n=Pt(t,16),i=this.doPrivate(n);return null==i?null:function(t,e,r,n){var i=Ht.crypto.MessageDigest,s=Ht.crypto.Util,o=null;for(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(t){return Qt(s.hashHex(te(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*n+2)throw"Cipher too short";var a,u=t.substr(1,n),c=t.substr(n+1),h=Rt(c,n,r),l=[];for(a=0;a<u.length;a+=1)l[a]=u.charCodeAt(a)^h.charCodeAt(a);var f=Rt(String.fromCharCode.apply(String,l),t.length-n,r),p=[];for(a=0;a<c.length;a+=1)p[a]=c.charCodeAt(a)^f.charCodeAt(a);if((p=String.fromCharCode.apply(String,p)).substr(0,n)!==r(""))throw"Hash mismatch";var d=(p=p.substr(n)).indexOf("");if((-1!=d?p.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return p.substr(d+1)}(i,this.n.bitLength()+7>>3,e,r)},Lt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},Lt.prototype.toBigInteger=function(){return this.x},Lt.prototype.negate=function(){return new Lt(this.q,this.x.negate().mod(this.q))},Lt.prototype.add=function(t){return new Lt(this.q,this.x.add(t.toBigInteger()).mod(this.q))},Lt.prototype.subtract=function(t){return new Lt(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},Lt.prototype.multiply=function(t){return new Lt(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},Lt.prototype.square=function(){return new Lt(this.q,this.x.square().mod(this.q))},Lt.prototype.divide=function(t){return new Lt(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},jt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},jt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},jt.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(J.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(J.ZERO))},jt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(J.ZERO)&&!this.y.toBigInteger().equals(J.ZERO)},jt.prototype.negate=function(){return new jt(this.curve,this.x,this.y.negate(),this.z)},jt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(J.ZERO.equals(r))return J.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new J("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),r.square()),a=o.multiply(r),u=i.multiply(o),c=e.square().multiply(this.z),h=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),l=u.multiply(n).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new jt(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(l),f)},jt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new J("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);J.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new jt(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},jt.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new J("3")),i=this.negate(),s=this;for(e=n.bitLength()-2;0<e;--e){s=s.twice();var o=n.testBit(e);o!=r.testBit(e)&&(s=s.add(o?this:i))}return s},jt.prototype.multiplyTwo=function(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);0<=n;)i=i.twice(),t.testBit(n)?i=r.testBit(n)?i.add(s):i.add(this):r.testBit(n)&&(i=i.add(e)),--n;return i},Bt.prototype.getQ=function(){return this.q},Bt.prototype.getA=function(){return this.a},Bt.prototype.getB=function(){return this.b},Bt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},Bt.prototype.getInfinity=function(){return this.infinity},Bt.prototype.fromBigInteger=function(t){return new Lt(this.q,t)},Bt.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new jt(this,this.fromBigInteger(new J(r,16)),this.fromBigInteger(new J(n,16)));default:return null}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */
Lt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},jt.prototype.getEncoded=function(t){var e=function(t,e){var r=t.toByteArrayUnsigned();if(e<r.length)r=r.slice(r.length-e);else for(;e>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=e(r,32);return t?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(n,32))),i},jt.decodeFrom=function(t,e){e[0];var r=e.length-1,n=e.slice(1,1+r/2),i=e.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var s=new J(n),o=new J(i);return new jt(t,t.fromBigInteger(s),t.fromBigInteger(o))},jt.decodeFromHex=function(t,e){e.substr(0,2);var r=e.length-2,n=e.substr(2,r/2),i=e.substr(2+r/2,r/2),s=new J(n,16),o=new J(i,16);return new jt(t,t.fromBigInteger(s),t.fromBigInteger(o))},jt.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),r=t.y.subtract(this.y).divide(e),n=r.square().subtract(this.x).subtract(t.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new jt(this.curve,n,i)},jt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(J.valueOf(2)),e=this.curve.fromBigInteger(J.valueOf(3)),r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=r.square().subtract(this.x.multiply(t)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new jt(this.curve,n,i)},jt.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new J("3")),i=this.negate(),s=this;for(e=n.bitLength()-2;0<e;--e){s=s.twice();var o=n.testBit(e);o!=r.testBit(e)&&(s=s.add2D(o?this:i))}return s},jt.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);return s.equals(o)},jt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},jt.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(e.compareTo(J.ONE)<0||0<e.compareTo(t.subtract(J.ONE)))throw new Error("x coordinate out of bounds");if(r.compareTo(J.ONE)<0||0<r.compareTo(t.subtract(J.ONE)))throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};
/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */
var Mt=function(){var f=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),p=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function d(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var y=new String(""),v=(Object,Array,Object.hasOwnProperty);return function(t,a){var e,r,n=t.match(f),i=n[0],s=!1;"{"===i?e={}:"["===i?e=[]:(e=[],s=!0);for(var o=[e],u=1-s,c=n.length;u<c;++u){var h;switch((i=n[u]).charCodeAt(0)){default:(h=o[0])[r||h.length]=+i,r=void 0;break;case 34:if(-1!==(i=i.substring(1,i.length-1)).indexOf("\\")&&(i=i.replace(p,d)),h=o[0],!r){if(!(h instanceof Array)){r=i||y;break}r=h.length}h[r]=i,r=void 0;break;case 91:h=o[0],o.unshift(h[r||h.length]=[]),r=void 0;break;case 93:o.shift();break;case 102:(h=o[0])[r||h.length]=!1,r=void 0;break;case 110:(h=o[0])[r||h.length]=null,r=void 0;break;case 116:(h=o[0])[r||h.length]=!0,r=void 0;break;case 123:h=o[0],o.unshift(h[r||h.length]={}),r=void 0;break;case 125:o.shift()}}if(s){if(1!==o.length)throw new Error;e=e[0]}else if(o.length)throw new Error;if(a){var l=function(t,e){var r=t[e];if(r&&"object"==typeof r){var n=null;for(var i in r)if(v.call(r,i)&&r!==t){var s=l(r,i);void 0!==s?r[i]=s:(n||(n=[]),n.push(i))}if(n)for(var o=n.length;0<=--o;)delete r[n[o]]}return a.call(t,e,r)};e=l({"":e},"")}return e}}();void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),Ht.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";e=new J(n,16).xor(t).add(J.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return ie(t,e)},this.newObject=function(t){var e=Ht.asn1,r=e.DERBoolean,n=e.DERInteger,i=e.DERBitString,s=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,u=e.DEREnumerated,c=e.DERUTF8String,h=e.DERNumericString,l=e.DERPrintableString,f=e.DERTeletexString,p=e.DERIA5String,d=e.DERUTCTime,y=e.DERGeneralizedTime,v=e.DERSequence,b=e.DERSet,g=e.DERTaggedObject,m=e.ASN1Util.newObject,S=Object.keys(t);if(1!=S.length)throw"key of param shall be only one.";var E=S[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+E+":"))throw"undefined key: "+E;if("bool"==E)return new r(t[E]);if("int"==E)return new n(t[E]);if("bitstr"==E)return new i(t[E]);if("octstr"==E)return new s(t[E]);if("null"==E)return new o(t[E]);if("oid"==E)return new a(t[E]);if("enum"==E)return new u(t[E]);if("utf8str"==E)return new c(t[E]);if("numstr"==E)return new h(t[E]);if("prnstr"==E)return new l(t[E]);if("telstr"==E)return new f(t[E]);if("ia5str"==E)return new p(t[E]);if("utctime"==E)return new d(t[E]);if("gentime"==E)return new y(t[E]);if("seq"==E){for(var w=t[E],_=[],A=0;A<w.length;A++){var T=m(w[A]);_.push(T)}return new v({array:_})}if("set"==E){for(w=t[E],_=[],A=0;A<w.length;A++){T=m(w[A]);_.push(T)}return new b({array:_})}if("tag"==E){var x=t[E];if("[object Array]"===Object.prototype.toString.call(x)&&3==x.length){var O=m(x[2]);return new g({tag:x[0],explicit:x[1],obj:O})}var C={};if(void 0!==x.explicit&&(C.explicit=x.explicit),void 0!==x.tag&&(C.tag=x.tag),void 0===x.obj)throw"obj shall be specified for 'tag'.";return C.obj=m(x.obj),new g(C)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},Ht.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=(e=Math.floor(r/40)+"."+r%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);if(n+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new J(n,2).toString(10),n=""}return e},Ht.asn1.ASN1Util.oidIntToHex=function(t){var a=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},e=function(t){var e="",r=new J(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";r=i+r;for(s=0;s<r.length-1;s+=7){var o=r.substr(s,7);s!=r.length-7&&(o="1"+o),e+=a(parseInt(o,2))}return e};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),i=40*parseInt(n[0])+parseInt(n[1]);r+=a(i),n.splice(0,2);for(var s=0;s<n.length;s++)r+=e(n[s]);return r},Ht.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var r=e.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+r).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},Ht.asn1.DERAbstractString=function(t){Ht.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=$t(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},r.lang.extend(Ht.asn1.DERAbstractString,Ht.asn1.ASN1Object),Ht.asn1.DERAbstractTime=function(t){Ht.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,r){var n=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var u=n(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Yt(t)},this.setByDateValue=function(t,e,r,n,i,s){var o=new Date(Date.UTC(t,e-1,r,n,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},r.lang.extend(Ht.asn1.DERAbstractTime,Ht.asn1.ASN1Object),Ht.asn1.DERAbstractStructured=function(t){Ht.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},r.lang.extend(Ht.asn1.DERAbstractStructured,Ht.asn1.ASN1Object),Ht.asn1.DERBoolean=function(){Ht.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},r.lang.extend(Ht.asn1.DERBoolean,Ht.asn1.ASN1Object),Ht.asn1.DERInteger=function(t){Ht.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Ht.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new J(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},r.lang.extend(Ht.asn1.DERInteger,Ht.asn1.ASN1Object),Ht.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Ht.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}Ht.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var i=t.substr(r,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),n+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},r.lang.extend(Ht.asn1.DERBitString,Ht.asn1.ASN1Object),Ht.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Ht.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}Ht.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},r.lang.extend(Ht.asn1.DEROctetString,Ht.asn1.DERAbstractString),Ht.asn1.DERNull=function(){Ht.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},r.lang.extend(Ht.asn1.DERNull,Ht.asn1.ASN1Object),Ht.asn1.DERObjectIdentifier=function(t){var a=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},s=function(t){var e="",r=new J(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";r=i+r;for(s=0;s<r.length-1;s+=7){var o=r.substr(s,7);s!=r.length-7&&(o="1"+o),e+=a(parseInt(o,2))}return e};Ht.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var e="",r=t.split("."),n=40*parseInt(r[0])+parseInt(r[1]);e+=a(n),r.splice(0,2);for(var i=0;i<r.length;i++)e+=s(r[i]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=Ht.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},r.lang.extend(Ht.asn1.DERObjectIdentifier,Ht.asn1.ASN1Object),Ht.asn1.DEREnumerated=function(t){Ht.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Ht.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new J(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},r.lang.extend(Ht.asn1.DEREnumerated,Ht.asn1.ASN1Object),Ht.asn1.DERUTF8String=function(t){Ht.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},r.lang.extend(Ht.asn1.DERUTF8String,Ht.asn1.DERAbstractString),Ht.asn1.DERNumericString=function(t){Ht.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},r.lang.extend(Ht.asn1.DERNumericString,Ht.asn1.DERAbstractString),Ht.asn1.DERPrintableString=function(t){Ht.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},r.lang.extend(Ht.asn1.DERPrintableString,Ht.asn1.DERAbstractString),Ht.asn1.DERTeletexString=function(t){Ht.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},r.lang.extend(Ht.asn1.DERTeletexString,Ht.asn1.DERAbstractString),Ht.asn1.DERIA5String=function(t){Ht.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},r.lang.extend(Ht.asn1.DERIA5String,Ht.asn1.DERAbstractString),Ht.asn1.DERUTCTime=function(t){Ht.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=Yt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Yt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},r.lang.extend(Ht.asn1.DERUTCTime,Ht.asn1.DERAbstractTime),Ht.asn1.DERGeneralizedTime=function(t){Ht.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Yt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Yt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},r.lang.extend(Ht.asn1.DERGeneralizedTime,Ht.asn1.DERAbstractTime),Ht.asn1.DERSequence=function(t){Ht.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},r.lang.extend(Ht.asn1.DERSequence,Ht.asn1.DERAbstractStructured),Ht.asn1.DERSet=function(t){Ht.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},r.lang.extend(Ht.asn1.DERSet,Ht.asn1.DERAbstractStructured),Ht.asn1.DERTaggedObject=function(t){Ht.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},r.lang.extend(Ht.asn1.DERTaggedObject,Ht.asn1.ASN1Object);var Ht,kt,Ut,Vt=new function(){};function Kt(t){for(var e=new Array,r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function qt(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function Gt(t){for(var e="",r=0;r<t.length;r++){var n=t[r].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function Yt(t){return Gt(Kt(t))}function Wt(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function zt(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function Xt(t){return t.length%2==1&&(t="0"+t),Wt(W(t))}function Jt(t){return z(zt(t))}function $t(t){return ue(pe(t))}function Zt(t){return decodeURIComponent(ce(t))}function Qt(t){for(var e="",r=0;r<t.length-1;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e}function te(t){for(var e="",r=0;r<t.length;r++)e+=("0"+t.charCodeAt(r).toString(16)).slice(-2);return e}function ee(t){return W(t)}function re(t){var e=ee(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function ne(t){return z(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function ie(t,e){return"-----BEGIN "+e+"-----\r\n"+re(t)+"\r\n-----END "+e+"-----\r\n"}function se(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return ne(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function oe(t){var e,r,n,i,s,o,a,u,c,h,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=l[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),r=parseInt(l[2])-1,n=parseInt(l[3]),i=parseInt(l[4]),s=parseInt(l[5]),o=parseInt(l[6]),a=0,""!==(c=l[7])&&(h=(c.substr(1)+"00").substr(0,3),a=parseInt(h)),Date.UTC(e,r,n,i,s,o,a);throw"unsupported zulu format: "+t}function ae(t){return~~(oe(t)/1e3)}function ue(t){return t.replace(/%/g,"")}function ce(t){return t.replace(/(..)/g,"%$1")}function he(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var r=(t=t.toLowerCase()).split(":").length-1;if(r<2)throw e;var n=":".repeat(7-r+2),i=(t=t.replace("::",n)).split(":");if(8!=i.length)throw e;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function le(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)e[r]=e[r].replace(/^0+/,""),""==e[r]&&(e[r]="0");var n=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===n)return t.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(t=t.replace(i,"::")).slice(1,-1)}function fe(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?le(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}function pe(t){for(var e=encodeURIComponent(t),r="",n=0;n<e.length;n++)"%"==e[n]?(r+=e.substr(n,3),n+=2):r=r+"%"+Yt(e[n]);return r}function de(t){return t.length%2==1?"0"+t:"7"<t.substr(0,1)?"00"+t:t}function ye(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map(function(t,e,r){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)}).join("")}catch(t){throw"malformed integer array string: "+t}}Vt.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var r=parseInt(t.substr(e+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},Vt.getL=function(t,e){var r=Vt.getLblen(t,e);return r<1?"":t.substr(e+2,2*r)},Vt.getVblen=function(t,e){var r;return""==(r=Vt.getL(t,e))?-1:("8"===r.substr(0,1)?new J(r.substr(2),16):new J(r,16)).intValue()},Vt.getVidx=function(t,e){var r=Vt.getLblen(t,e);return r<0?r:e+2*(r+1)},Vt.getV=function(t,e){var r=Vt.getVidx(t,e),n=Vt.getVblen(t,e);return t.substr(r,2*n)},Vt.getTLV=function(t,e){return t.substr(e,2)+Vt.getL(t,e)+Vt.getV(t,e)},Vt.getNextSiblingIdx=function(t,e){return Vt.getVidx(t,e)+2*Vt.getVblen(t,e)},Vt.getChildIdx=function(t,e){var r=Vt,n=new Array,i=r.getVidx(t,e);"03"==t.substr(e,2)?n.push(i+2):n.push(i);for(var s=r.getVblen(t,e),o=i,a=0;;){var u=r.getNextSiblingIdx(t,o);if(null==u||2*s<=u-i)break;if(200<=a)break;n.push(u),o=u,a++}return n},Vt.getNthChildIdx=function(t,e,r){return Vt.getChildIdx(t,e)[r]},Vt.getIdxbyList=function(t,e,r,n){var i,s,o=Vt;if(0!=r.length)return i=r.shift(),s=o.getChildIdx(t,e),o.getIdxbyList(t,s[i],r,n);if(void 0!==n&&t.substr(e,2)!==n)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+n;return e},Vt.getTLVbyList=function(t,e,r,n){var i=Vt,s=i.getIdxbyList(t,e,r);if(void 0===s)throw"can't find nthList object";if(void 0!==n&&t.substr(s,2)!=n)throw"checking tag doesn't match: "+t.substr(s,2)+"!="+n;return i.getTLV(t,s)},Vt.getVbyList=function(t,e,r,n,i){var s,o,a=Vt;if(void 0===(s=a.getIdxbyList(t,e,r,n)))throw"can't find nthList object";return o=a.getV(t,s),!0===i&&(o=o.substr(2)),o},Vt.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},r=[],n=t.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var h=r.join(".");return 0<u.length&&(h=h+"."+u.join(".")),h},Vt.dump=function(t,e,r,n){var i=Vt,s=i.getV,o=i.dump,a=i.getChildIdx,u=t;t instanceof Ht.asn1.ASN1Object&&(u=t.getEncodedHex());var c=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var h=e.ommit_long_octet;if("01"==u.substr(r,2))return"00"==(l=s(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==u.substr(r,2))return n+"INTEGER "+c(l=s(u,r),h)+"\n";if("03"==u.substr(r,2))return n+"BITSTRING "+c(l=s(u,r),h)+"\n";if("04"==u.substr(r,2)){var l=s(u,r);if(i.isASN1HEX(l)){var f=n+"OCTETSTRING, encapsulates\n";return f+=o(l,e,0,n+"  ")}return n+"OCTETSTRING "+c(l,h)+"\n"}if("05"==u.substr(r,2))return n+"NULL\n";if("06"==u.substr(r,2)){var p=s(u,r),d=Ht.asn1.ASN1Util.oidHexToInt(p),y=Ht.asn1.x509.OID.oid2name(d),v=d.replace(/\./g," ");return""!=y?n+"ObjectIdentifier "+y+" ("+v+")\n":n+"ObjectIdentifier ("+v+")\n"}if("0c"==u.substr(r,2))return n+"UTF8String '"+Zt(s(u,r))+"'\n";if("13"==u.substr(r,2))return n+"PrintableString '"+Zt(s(u,r))+"'\n";if("14"==u.substr(r,2))return n+"TeletexString '"+Zt(s(u,r))+"'\n";if("16"==u.substr(r,2))return n+"IA5String '"+Zt(s(u,r))+"'\n";if("17"==u.substr(r,2))return n+"UTCTime "+Zt(s(u,r))+"\n";if("18"==u.substr(r,2))return n+"GeneralizedTime "+Zt(s(u,r))+"\n";if("30"==u.substr(r,2)){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";f=n+"SEQUENCE\n";var b=e;if((2==(S=a(u,r)).length||3==S.length)&&"06"==u.substr(S[0],2)&&"04"==u.substr(S[S.length-1],2)){y=i.oidname(s(u,S[0]));var g=JSON.parse(JSON.stringify(e));g.x509ExtName=y,b=g}for(var m=0;m<S.length;m++)f+=o(u,b,S[m],n+"  ");return f}if("31"==u.substr(r,2)){f=n+"SET\n";var S=a(u,r);for(m=0;m<S.length;m++)f+=o(u,e,S[m],n+"  ");return f}var E=parseInt(u.substr(r,2),16);if(0==(128&E))return n+"UNKNOWN("+u.substr(r,2)+") "+s(u,r)+"\n";var w=31&E;if(0==(32&E))return"68747470"==(l=s(u,r)).substr(0,8)&&(l=Zt(l)),"subjectAltName"===e.x509ExtName&&2==w&&(l=Zt(l)),f=n+"["+w+"] "+l+"\n";var f=n+"["+w+"]\n";for(S=a(u,r),m=0;m<S.length;m++)f+=o(u,e,S[m],n+"  ");return f},Vt.isASN1HEX=function(t){var e=Vt;if(t.length%2==1)return!1;var r=e.getVblen(t,0),n=t.substr(0,2),i=e.getL(t,0);return t.length-n.length-i.length==2*r},Vt.oidname=function(t){var e=Ht.asn1;Ht.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var r=e.x509.OID.oid2name(t);return""===r&&(r=t),r},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),void 0!==Ht.asn1.x509&&Ht.asn1.x509||(Ht.asn1.x509={}),Ht.asn1.x509.Certificate=function(t){Ht.asn1.x509.Certificate.superclass.constructor.call(this);var e=Ht,r=(e.crypto,e.asn1),n=r.DERSequence,i=r.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new Ht.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+re(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},r.lang.extend(Ht.asn1.x509.Certificate,Ht.asn1.ASN1Object),Ht.asn1.x509.TBSCertificate=function(t){Ht.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=Ht.asn1,i=e.DERSequence,r=e.DERInteger,s=e.DERTaggedObject,n=e.x509,o=n.Time,a=n.X500Name,u=n.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new s({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new r(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new n.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new a(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new o(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new o(t)},this.setSubjectByParam=function(t){this.asn1Subject=new a(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new u(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Ae.getKey(t);this.asn1SubjPKey=new u(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){Ht.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new i({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),0<this.extensionsArray.length){var e=new i({array:this.extensionsArray}),r=new s({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(r)}var n=new i({array:this.asn1Array});return this.hTLV=n.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},r.lang.extend(Ht.asn1.x509.TBSCertificate,Ht.asn1.ASN1Object),Ht.asn1.x509.Extension=function(t){Ht.asn1.x509.Extension.superclass.constructor.call(this);var e=Ht.asn1,n=e.DERObjectIdentifier,i=e.DEROctetString,s=(e.DERBitString,e.DERBoolean),o=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new i({hex:this.getExtnValueHex()}),r=new Array;return r.push(t),this.critical&&r.push(new s),r.push(e),new o({array:r}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},r.lang.extend(Ht.asn1.x509.Extension,Ht.asn1.ASN1Object),Ht.asn1.x509.Extension.appendByNameToArray=function(t,e,r){var n=t.toLowerCase(),i=Ht.asn1.x509;if("basicconstraints"==n){var s=new i.BasicConstraints(e);r.push(s)}else if("keyusage"==n){s=new i.KeyUsage(e);r.push(s)}else if("crldistributionpoints"==n){s=new i.CRLDistributionPoints(e);r.push(s)}else if("extkeyusage"==n){s=new i.ExtKeyUsage(e);r.push(s)}else if("authoritykeyidentifier"==n){s=new i.AuthorityKeyIdentifier(e);r.push(s)}else if("authorityinfoaccess"==n){s=new i.AuthorityInfoAccess(e);r.push(s)}else if("subjectaltname"==n){s=new i.SubjectAltName(e);r.push(s)}else{if("issueraltname"!=n)throw"unsupported extension name: "+t;s=new i.IssuerAltName(e);r.push(s)}},Ht.asn1.x509.KeyUsage=function(t){Ht.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Fe.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new Ht.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var r=t.names,n="000000000",i=0;i<r.length;i++)for(var s=0;s<e.length;s++)r[i]===e[s]&&(n=n.substring(0,s)+"1"+n.substring(s+1,n.length));this.asn1ExtnValue=new Ht.asn1.DERBitString({bin:n})}},r.lang.extend(Ht.asn1.x509.KeyUsage,Ht.asn1.x509.Extension),Ht.asn1.x509.BasicConstraints=function(t){Ht.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new Ht.asn1.DERBoolean),-1<this.pathLen&&t.push(new Ht.asn1.DERInteger({int:this.pathLen}));var e=new Ht.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},r.lang.extend(Ht.asn1.x509.BasicConstraints,Ht.asn1.x509.Extension),Ht.asn1.x509.CRLDistributionPoints=function(t){Ht.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=Ht.asn1,i=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new i.GeneralNames([{uri:t}]),r=new i.DistributionPointName(e),n=new i.DistributionPoint({dpobj:r});this.setByDPArray([n])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},r.lang.extend(Ht.asn1.x509.CRLDistributionPoints,Ht.asn1.x509.Extension),Ht.asn1.x509.ExtKeyUsage=function(t){Ht.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var n=Ht.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new n.DERSequence;for(var e=0;e<t.length;e++){var r=new n.DERObjectIdentifier(t[e]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},r.lang.extend(Ht.asn1.x509.ExtKeyUsage,Ht.asn1.x509.Extension),Ht.asn1.x509.AuthorityKeyIdentifier=function(t){Ht.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var r=Ht.asn1,n=r.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var e=new r.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new Ht.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new Ht.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new Ht.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},r.lang.extend(Ht.asn1.x509.AuthorityKeyIdentifier,Ht.asn1.x509.Extension),Ht.asn1.x509.AuthorityInfoAccess=function(t){Ht.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,r=Ht.asn1,n=r.DERSequence,i=0;i<t.length;i++){var s=new n({array:[new r.DERObjectIdentifier(t[i].accessMethod),new r.x509.GeneralName(t[i].accessLocation)]});e.push(s)}this.asn1ExtnValue=new n({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},r.lang.extend(Ht.asn1.x509.AuthorityInfoAccess,Ht.asn1.x509.Extension),Ht.asn1.x509.SubjectAltName=function(t){Ht.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new Ht.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},r.lang.extend(Ht.asn1.x509.SubjectAltName,Ht.asn1.x509.Extension),Ht.asn1.x509.IssuerAltName=function(t){Ht.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new Ht.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},r.lang.extend(Ht.asn1.x509.IssuerAltName,Ht.asn1.x509.Extension),Ht.asn1.x509.CRL=function(t){Ht.asn1.x509.CRL.superclass.constructor.call(this);this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new Ht.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new Ht.asn1.DERBitString({hex:"00"+this.hexSig});var t=new Ht.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+re(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},r.lang.extend(Ht.asn1.x509.CRL,Ht.asn1.ASN1Object),Ht.asn1.x509.TBSCertList=function(t){Ht.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=Ht.asn1,r=e.DERSequence,i=e.x509,n=i.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new i.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new n(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new n(t)},this.addRevokedCert=function(t,e){var r={};null!=t&&null!=t&&(r.sn=t),null!=e&&null!=e&&(r.time=e);var n=new i.CRLEntry(r);this.aRevokedCert.push(n)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),0<this.aRevokedCert.length){var t=new r({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new r({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},r.lang.extend(Ht.asn1.x509.TBSCertList,Ht.asn1.ASN1Object),Ht.asn1.x509.CRLEntry=function(t){Ht.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=Ht.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},r.lang.extend(Ht.asn1.x509.CRLEntry,Ht.asn1.ASN1Object),Ht.asn1.x509.X500Name=function(t){Ht.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e=Ht.asn1,s=e.x509,r=se;if(this.setByString=function(t){var e=t.split("/");e.shift();for(var r=[],n=0;n<e.length;n++)if(e[n].match(/^[^=]+=.+$/))r.push(e[n]);else{var i=r.length-1;r[i]=r[i]+"/"+e[n]}for(n=0;n<r.length;n++)this.asn1Array.push(new s.RDN({str:r[n]}))},this.setByLdapString=function(t){var e=s.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var r=new Ht.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(r):this.asn1Array=[r]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var n;if(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer)(n=new Fe).hex=r(t.certissuer),this.hTLV=n.getIssuerHex();if(void 0!==t.certsubject)(n=new Fe).hex=r(t.certsubject),this.hTLV=n.getSubjectHex()}},r.lang.extend(Ht.asn1.x509.X500Name,Ht.asn1.ASN1Object),Ht.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map(function(t){return t.replace(/,/,"\\,")})).join(",")},Ht.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),r=!1,n=[],i=0;0<e.length;i++){var s=e.shift();if(!0===r){var o=(n.pop()+","+s).replace(/\\,/g,",");n.push(o),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}return(n=n.map(function(t){return t.replace("/","\\/")})).reverse(),"/"+n.join("/")},Ht.asn1.x509.RDN=function(t){Ht.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new Ht.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=Ht.asn1.x509.RDN.parseString(t),r=0;r<e.length;r++)this.addByString(e[r])},this.getEncodedHex=function(){var t=new Ht.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},r.lang.extend(Ht.asn1.x509.RDN,Ht.asn1.ASN1Object),Ht.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),r=!1,n=[],i=0;0<e.length;i++){var s=e.shift();if(!0===r){var o=(n.pop()+"+"+s).replace(/\\\+/g,"+");n.push(o),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}var a=!1,u=[];for(i=0;0<n.length;i++){s=n.shift();if(!0===a){var c=u.pop();if(s.match(/"$/)){o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),a=!1}else u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},Ht.asn1.x509.AttributeTypeAndValue=function(t){Ht.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var r=Ht.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=Ht.asn1.x509.OID.atype2obj(t);var r="utf8";"C"==t&&(r="prn"),this.valueObj=this.getValueObj(r,e)},this.getValueObj=function(t,e){if("utf8"==t)return new r.DERUTF8String({str:e});if("prn"==t)return new r.DERPrintableString({str:e});if("tel"==t)return new r.DERTeletexString({str:e});if("ia5"==t)return new r.DERIA5String({str:e});throw"unsupported directory string type: type="+t+" value="+e},this.getEncodedHex=function(){var t=new r.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},r.lang.extend(Ht.asn1.x509.AttributeTypeAndValue,Ht.asn1.ASN1Object),Ht.asn1.x509.SubjectPublicKeyInfo=function(t){Ht.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=Ht,r=e.asn1,i=r.DERInteger,s=r.DERBitString,o=r.DERObjectIdentifier,n=r.DERSequence,a=r.ASN1Util.newObject,u=r.x509.AlgorithmIdentifier,c=e.crypto;c.ECDSA,c.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new n({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof Dt){var e=a({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new s({hex:"00"+e})}}catch(t){}try{if(t instanceof Ht.crypto.ECDSA){var r=new o({name:t.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new s({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof Ht.crypto.DSA){r=new a({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]});this.asn1AlgId=new u({name:"dsa",asn1params:r});var n=new i({bigint:t.y});this.asn1SubjPKey=new s({hex:"00"+n.getEncodedHex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},r.lang.extend(Ht.asn1.x509.SubjectPublicKeyInfo,Ht.asn1.ASN1Object),Ht.asn1.x509.Time=function(t){Ht.asn1.x509.Time.superclass.constructor.call(this);var e=Ht.asn1,r=e.DERUTCTime,n=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},r.lang.extend(Ht.asn1.x509.Time,Ht.asn1.ASN1Object),Ht.asn1.x509.AlgorithmIdentifier=function(t){Ht.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var r=Ht.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var e=new r.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var e=this.nameAlg.toLowerCase();"withdsa"!==e.substr(-7,7)&&"withecdsa"!==e.substr(-9,9)&&(this.asn1Params=new r.DERNull)}},r.lang.extend(Ht.asn1.x509.AlgorithmIdentifier,Ht.asn1.ASN1Object),Ht.asn1.x509.GeneralName=function(t){Ht.asn1.x509.GeneralName.superclass.constructor.call(this);var c={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},e=Ht.asn1,h=(e.DERSequence,e.DEROctetString),l=e.DERIA5String,f=e.DERTaggedObject,p=e.ASN1Object,d=e.x509.X500Name,y=se;this.explicit=!1,this.setByParam=function(t){var e=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",e=new l({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",e=new l({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",e=new l({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,e=new d({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,e=new d({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var r=null;if((i=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=i.indexOf("-----BEGIN ")&&(r=y(i)),null==r)throw"certissuer param not cert";(s=new Fe).hex=r;var n=s.getIssuerHex();(e=new p).hTLV=n}if(void 0!==t.certsubj){this.type="dn",this.explicit=!0;var i,s;r=null;if((i=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=i.indexOf("-----BEGIN ")&&(r=y(i)),null==r)throw"certsubj param not cert";(s=new Fe).hex=r;n=s.getSubjectHex();(e=new p).hTLV=n}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var o,a=t.ip,u="malformed IP address";if(a.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(o=ye("["+a.split(".").join(",")+"]")).length)throw u}else if(a.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))o=he(a);else{if(!a.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw u;o=a}e=new h({hex:o})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new f({explicit:this.explicit,tag:c[this.type],obj:e})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},r.lang.extend(Ht.asn1.x509.GeneralName,Ht.asn1.ASN1Object),Ht.asn1.x509.GeneralNames=function(t){Ht.asn1.x509.GeneralNames.superclass.constructor.call(this);var n=Ht.asn1;this.setByParamArray=function(t){for(var e=0;e<t.length;e++){var r=new n.x509.GeneralName(t[e]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new n.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},r.lang.extend(Ht.asn1.x509.GeneralNames,Ht.asn1.ASN1Object),Ht.asn1.x509.DistributionPointName=function(t){Ht.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=Ht.asn1,r=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},r.lang.extend(Ht.asn1.x509.DistributionPointName,Ht.asn1.ASN1Object),Ht.asn1.x509.DistributionPoint=function(t){Ht.asn1.x509.DistributionPoint.superclass.constructor.call(this);var r=Ht.asn1;this.getEncodedHex=function(){var t=new r.DERSequence;if(null!=this.asn1DP){var e=new r.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(e)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},r.lang.extend(Ht.asn1.x509.DistributionPoint,Ht.asn1.ASN1Object),Ht.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=this.name2oidList[t],r=new Ht.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=r},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=this.atype2oidList[t],r=new Ht.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=r}},Ht.asn1.x509.OID.oid2name=function(t){var e=Ht.asn1.x509.OID.name2oidList;for(var r in e)if(e[r]==t)return r;return""},Ht.asn1.x509.OID.oid2atype=function(t){var e=Ht.asn1.x509.OID.atype2oidList;for(var r in e)if(e[r]==t)return r;return t},Ht.asn1.x509.OID.name2oid=function(t){var e=Ht.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},Ht.asn1.x509.X509Util={},Ht.asn1.x509.X509Util.newCertPEM=function(t){var e=Ht.asn1.x509,r=e.TBSCertificate,n=e.Certificate,i=new r;if(void 0===t.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(i.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])i.appendExtensionByName(key,t.ext[s][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var o=null;return t.cakey&&(o=new n({tbscertobj:i,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Ae.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(o=new n({tbscertobj:i})).setSignatureHex(t.sighex),o.getPEMString()},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),void 0!==Ht.asn1.cms&&Ht.asn1.cms||(Ht.asn1.cms={}),Ht.asn1.cms.Attribute=function(t){var n=Ht.asn1;n.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,e,r;t=new n.DERObjectIdentifier({oid:this.attrTypeOid}),e=new n.DERSet({array:this.valueList});try{e.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}r=new n.DERSequence({array:[t,e]});try{this.hTLV=r.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},r.lang.extend(Ht.asn1.cms.Attribute,Ht.asn1.ASN1Object),Ht.asn1.cms.ContentType=function(t){var e=Ht.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var r=null;if(void 0!==t){r=new e.DERObjectIdentifier(t);this.valueList=[r]}},r.lang.extend(Ht.asn1.cms.ContentType,Ht.asn1.cms.Attribute),Ht.asn1.cms.MessageDigest=function(t){var e=Ht,r=e.asn1,n=r.DEROctetString,i=r.cms;if(i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t)if(t.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof t.hashAlg){var s=t.eciObj.eContentValueHex,o=t.hashAlg;(a=new n({hex:e.crypto.Util.hashHex(s,o)})).getEncodedHex(),this.valueList=[a]}else{var a;(a=new n(t)).getEncodedHex(),this.valueList=[a]}},r.lang.extend(Ht.asn1.cms.MessageDigest,Ht.asn1.cms.Attribute),Ht.asn1.cms.SigningTime=function(t){var e=Ht.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var r=new e.x509.Time(t);try{r.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[r]}},r.lang.extend(Ht.asn1.cms.SigningTime,Ht.asn1.cms.Attribute),Ht.asn1.cms.SigningCertificate=function(t){var c=Ht,h=c.asn1,l=h.DERSequence,f=h.cms;c.crypto;f.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var e=[],r=0;r<t.length;r++){var n=se(t[r]),i=c.crypto.Util.hashHex(n,"sha1"),s=new h.DEROctetString({hex:i});s.getEncodedHex();var o=new f.IssuerAndSerialNumber({cert:t[r]});o.getEncodedHex();var a=new l({array:[s,o]});a.getEncodedHex(),e.push(a)}var u=new l({array:e});u.getEncodedHex(),this.valueList=[u]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},r.lang.extend(Ht.asn1.cms.SigningCertificate,Ht.asn1.cms.Attribute),Ht.asn1.cms.SigningCertificateV2=function(t){var e=Ht,l=e.asn1,f=l.DERSequence,p=l.x509,d=l.cms,y=e.crypto;if(d.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=se(t[n]),s=[];"sha256"!==e&&s.push(new p.AlgorithmIdentifier({name:e}));var o=y.Util.hashHex(i,e),a=new l.DEROctetString({hex:o});a.getEncodedHex(),s.push(a);var u=new d.IssuerAndSerialNumber({cert:t[n]});u.getEncodedHex(),s.push(u);var c=new f({array:s});c.getEncodedHex(),r.push(c)}var h=new f({array:r});h.getEncodedHex(),this.valueList=[h]},void 0!==t&&"object"==typeof t.array){var r="sha256";"string"==typeof t.hashAlg&&(r=t.hashAlg),this.setCerts(t.array,r)}},r.lang.extend(Ht.asn1.cms.SigningCertificateV2,Ht.asn1.cms.Attribute),Ht.asn1.cms.IssuerAndSerialNumber=function(t){var e=Ht.asn1,s=e.DERInteger,r=e.cms,o=e.x509.X500Name,a=Fe;r.IssuerAndSerialNumber.superclass.constructor.call(this);this.setByCertPEM=function(t){var e=se(t),r=new a;r.hex=e;var n=r.getIssuerHex();this.dIssuer=new o,this.dIssuer.hTLV=n;var i=r.getSerialNumberHex();this.dSerial=new s({hex:i})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(t.issuer instanceof o?this.dIssuer=t.issuer:this.dIssuer=new o(t.issuer),t.serial instanceof s?this.dSerial=t.serial:this.dSerial=new s(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},r.lang.extend(Ht.asn1.cms.IssuerAndSerialNumber,Ht.asn1.ASN1Object),Ht.asn1.cms.AttributeList=function(t){var e=Ht.asn1,r=e.cms;r.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof r.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},r.lang.extend(Ht.asn1.cms.AttributeList,Ht.asn1.ASN1Object),Ht.asn1.cms.SignerInfo=function(t){var e=Ht,o=e.asn1,i=o.DERTaggedObject,r=o.cms,s=r.AttributeList,n=r.ContentType,a=r.EncapsulatedContentInfo,u=r.MessageDigest,c=r.SignedData,h=o.x509.AlgorithmIdentifier,l=e.crypto,f=Ae;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new o.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new s,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new s,this.setSignerIdentifier=function(t){if("string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")){this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:t})}},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof a&&(this.dSignedAttrs.add(new n({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new u({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof c&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new h({name:t.hashAlg})))},this.sign=function(t,e){this.dSigAlg=new h({name:e});var r=this.dSignedAttrs.getEncodedHex(),n=f.getKey(t),i=new l.Signature({alg:e});i.init(n),i.updateHex(r);var s=i.sign();this.dSig=new o.DEROctetString({hex:s})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof s&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new i({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),e=null;0<this.dUnsignedAttrs.length()&&(e=new i({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=e&&r.push(e);var n=new o.DERSequence({array:r});return this.hTLV=n.getEncodedHex(),this.hTLV}},r.lang.extend(Ht.asn1.cms.SignerInfo,Ht.asn1.ASN1Object),Ht.asn1.cms.EncapsulatedContentInfo=function(t){var e=Ht.asn1,n=e.DERTaggedObject,i=e.DERSequence,r=e.DERObjectIdentifier,s=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new r({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){t.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new r({oid:t}):this.dEContentType=new r({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=$t(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=$t(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new s({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var r=new i({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV}},r.lang.extend(Ht.asn1.cms.EncapsulatedContentInfo,Ht.asn1.ASN1Object),Ht.asn1.cms.ContentInfo=function(t){var e=Ht.asn1,r=e.DERTaggedObject,n=e.DERSequence,i=e.x509;Ht.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=i.OID.name2obj(t))},this.getEncodedHex=function(){var t=new r({obj:this.dContent,tag:"a0",explicit:!0}),e=new n({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},r.lang.extend(Ht.asn1.cms.ContentInfo,Ht.asn1.ASN1Object),Ht.asn1.cms.SignedData=function(t){var e=Ht.asn1,n=e.ASN1Object,r=e.DERInteger,u=e.DERSet,c=e.DERSequence,h=e.DERTaggedObject,i=e.cms,s=i.EncapsulatedContentInfo,o=i.SignerInfo,a=i.ContentInfo,l=e.x509.AlgorithmIdentifier;Ht.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new s,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new o],this.addCertificatesByPEM=function(t){var e=se(t),r=new n;r.hTLV=e,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var r=this.digestAlgNameList[e],n=new l({name:r});t.push(n)}this.dDigestAlgs=new u({array:t})}var i=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&0<this.certificateList.length){var s=new u({array:this.certificateList});this.dCerts=new h({obj:s,tag:"a0",explicit:!1})}null!=this.dCerts&&i.push(this.dCerts);var o=new u({array:this.signerInfoList});i.push(o);var a=new c({array:i});return this.hTLV=a.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new a({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return ie(this.getContentInfoEncodedHex(),"CMS")}},r.lang.extend(Ht.asn1.cms.SignedData,Ht.asn1.ASN1Object),Ht.asn1.cms.CMSUtil=new function(){},Ht.asn1.cms.CMSUtil.newSignedData=function(t){var e=Ht.asn1,r=e.cms,n=r.SignerInfo,i=r.SignedData,s=r.SigningTime,o=r.SigningCertificate,a=r.SigningCertificateV2,u=e.cades.SignaturePolicyIdentifier,c=new i;if(c.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var h=0;h<t.certs.length;h++)c.addCertificatesByPEM(t.certs[h]);c.signerInfoList=[];for(h=0;h<t.signerInfos.length;h++){var l=t.signerInfos[h],f=new n;for(attrName in f.setSignerIdentifier(l.signerCert),f.setForContentAndHash({sdObj:c,eciObj:c.dEncapContentInfo,hashAlg:l.hashAlg}),l.sAttr){var p=l.sAttr[attrName];if("SigningTime"==attrName){var d=new s(p);f.dSignedAttrs.add(d)}if("SigningCertificate"==attrName){d=new o(p);f.dSignedAttrs.add(d)}if("SigningCertificateV2"==attrName){d=new a(p);f.dSignedAttrs.add(d)}if("SignaturePolicyIdentifier"==attrName){d=new u(p);f.dSignedAttrs.add(d)}}f.sign(l.signerPrvKey,l.sigAlg),c.signerInfoList.push(f)}return c},Ht.asn1.cms.CMSUtil.verifySignedData=function(t){var e=Ht,r=e.asn1,n=r.cms,i=(n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2,r.cades.SignaturePolicyIdentifier,e.lang.String.isHex),s=Vt,u=s.getVbyList,o=s.getTLVbyList,a=s.getIdxbyList,p=s.getChildIdx,d=s.getTLV,c=s.oidname,y=e.crypto.Util.hashHex;void 0===t.cms&&i(t.cms);var h=t.cms,l=function(t,e){var r=e.idx;e.signerid_issuer1=o(t,r,[1,0],"30"),e.signerid_serial1=u(t,r,[1,1],"02"),e.hashalg=c(u(t,r,[2,0],"06"));var n=a(t,r,[3],"a0");e.idxSignedAttrs=n,f(t,e,n);var i=p(t,r).length;if(i<6)throw"malformed SignerInfo";e.sigalg=c(u(t,r,[i-2,0],"06")),e.sigval=u(t,r,[i-1],"04")},f=function(t,e,r){var n=p(t,r);e.signedAttrIdxList=n;for(var i=0;i<n.length;i++){var s,o=n[i],a=u(t,o,[0],"06");"2a864886f70d010905"===a?(s=Zt(u(t,o,[1,0])),e.saSigningTime=s):"2a864886f70d010904"===a&&(s=u(t,o,[1,0],"04"),e.saMessageDigest=s)}},v=function(t,e,r,n){r.verifyDetail={};var i=r.verifyDetail,s=e.parse.econtent,o=r.hashalg,a=r.saMessageDigest;i.validMessageDigest=!1,y(s,o)===a&&(i.validMessageDigest=!0),function(t,e,r,n){var i,s=e.parse.certsIdx;if(void 0===e.certs){i=[],e.certkeys=[];for(var o=p(t,s),a=0;a<o.length;a++){var u=d(t,o[a]),c=new Fe;c.readCertHex(u),i[a]=c,e.certkeys[a]=c.getPublicKey()}e.certs=i}else i=e.certs;e.cccc=i.length,e.cccci=o.length;for(a=0;a<i.length;a++){var h=c.getIssuerHex(),l=c.getSerialNumberHex();r.signerid_issuer1===h&&r.signerid_serial1===l&&(r.certkey_idx=a)}}(t,e,r),i.validSignatureValue=!1;var u=r.sigalg,c="31"+d(t,r.idxSignedAttrs).substr(2);r.signedattrshex=c;var h=e.certs[r.certkey_idx].getPublicKey(),l=new Ht.crypto.Signature({alg:u});l.init(h),l.updateHex(c);var f=l.verify(r.sigval);!0===(i.validSignatureValue_isValid=f)&&(i.validSignatureValue=!0),r.isValid=!1,i.validMessageDigest&&i.validSignatureValue&&(r.isValid=!0)},b={isValid:!1,parse:{}};return function(t,e){if("2a864886f70d010702"!==u(t,0,[0],"06"))return;e.cmsType="signedData",e.econtent=u(t,0,[1,0,2,1,0]),function(t,e){for(var r,n=3;n<6;n++)if(void 0!==(r=a(t,0,[1,0,n]))){var i=t.substr(r,2);"a0"===i&&(e.certsIdx=r),"a1"===i&&(e.revinfosIdx=r),"31"===i&&(e.signerinfosIdx=r)}}(t,e),e.signerInfos=[],function(t,e){var r=e.signerinfosIdx;if(void 0!==r){var n=p(t,r);e.signerInfoIdxList=n;for(var i=0;i<n.length;i++){var s={idx:n[i]};l(t,s),e.signerInfos.push(s)}}}(t,e)}(h,b.parse),function(t,e){for(var r=e.parse.signerInfos,n=r.length,i=!0,s=0;s<n;s++){var o=r[s];v(t,e,o,s),o.isValid||(i=!1)}e.isValid=i}(h,b),b},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),void 0!==Ht.asn1.tsp&&Ht.asn1.tsp||(Ht.asn1.tsp={}),Ht.asn1.tsp.Accuracy=function(t){var e=Ht.asn1,a=e.DERInteger,u=e.DERSequence,c=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,r=null,n=[];if(null!=this.seconds&&(t=new a({int:this.seconds}),n.push(t)),null!=this.millis){var i=new a({int:this.millis});e=new c({obj:i,tag:"80",explicit:!1}),n.push(e)}if(null!=this.micros){var s=new a({int:this.micros});r=new c({obj:s,tag:"81",explicit:!1}),n.push(r)}var o=new u({array:n});return this.hTLV=o.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},r.lang.extend(Ht.asn1.tsp.Accuracy,Ht.asn1.ASN1Object),Ht.asn1.tsp.MessageImprint=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new r({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new i({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new n({hex:t.hashValue})))},r.lang.extend(Ht.asn1.tsp.MessageImprint,Ht.asn1.ASN1Object),Ht.asn1.tsp.TimeStampReq=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.DERInteger,i=e.DERBoolean,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof a?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new a(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new i);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new s(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new n(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},r.lang.extend(Ht.asn1.tsp.TimeStampReq,Ht.asn1.ASN1Object),Ht.asn1.tsp.TSTInfo=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.DERInteger,i=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.tsp,u=a.MessageImprint,c=a.Accuracy,h=e.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new u(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new n(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new c(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new i),void 0!==t.nonce&&(this.dNonce=new n(t.nonce)),void 0!==t.tsa&&(this.dTsa=new h(t.tsa))}},r.lang.extend(Ht.asn1.tsp.TSTInfo,Ht.asn1.ASN1Object),Ht.asn1.tsp.TimeStampResp=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.ASN1Object,i=e.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),void 0!==t.tst&&t.tst instanceof n&&(this.dTST=t.tst.getContentInfo()))},r.lang.extend(Ht.asn1.tsp.TimeStampResp,Ht.asn1.ASN1Object),Ht.asn1.tsp.PKIStatusInfo=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.tsp,i=n.PKIStatus,s=n.PKIFreeText,o=n.PKIFailureInfo;n.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new s({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},r.lang.extend(Ht.asn1.tsp.PKIStatusInfo,Ht.asn1.ASN1Object),Ht.asn1.tsp.PKIStatus=function(t){var e=Ht.asn1,r=e.DERInteger,n=e.tsp,i=n.PKIStatus;n.PKIStatus.superclass.constructor.call(this);if(this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var s=i.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.dStatus=new r({int:s[t.name]})}else this.dStatus=new r(t)},r.lang.extend(Ht.asn1.tsp.PKIStatus,Ht.asn1.ASN1Object),Ht.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},Ht.asn1.tsp.PKIFreeText=function(t){var e=Ht.asn1,n=e.DERSequence,i=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new i({str:this.textList[e]}));var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},r.lang.extend(Ht.asn1.tsp.PKIFreeText,Ht.asn1.ASN1Object),Ht.asn1.tsp.PKIFailureInfo=function(t){var e=Ht.asn1,r=e.DERBitString,n=e.tsp.PKIFailureInfo;if(n.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new r;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var i=n.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.value=i[t.name]}else"number"==typeof t.int&&(this.value=t.int)},r.lang.extend(Ht.asn1.tsp.PKIFailureInfo,Ht.asn1.ASN1Object),Ht.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},Ht.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},Ht.asn1.tsp.SimpleTSAAdapter=function(t){var e=Ht,i=e.asn1.tsp,s=e.crypto.Util.hashHex;i.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var r=s(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:r},this.params.tstInfo.serialNumber={int:this.serial++};var n=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:n},i.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},r.lang.extend(Ht.asn1.tsp.SimpleTSAAdapter,Ht.asn1.tsp.AbstractTSAAdapter),Ht.asn1.tsp.FixedTSAAdapter=function(t){var e=Ht,n=e.asn1.tsp,i=e.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var r=i(t,e);return this.params.tstInfo.messageImprint={hashAlg:e,hashValue:r},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},r.lang.extend(Ht.asn1.tsp.FixedTSAAdapter,Ht.asn1.tsp.AbstractTSAAdapter),Ht.asn1.tsp.TSPUtil=new function(){},Ht.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=Ht.asn1,r=e.cms,n=(e.tsp,e.tsp.TSTInfo),i=new r.SignedData,s=new n(t.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)i.addCertificatesByPEM(t.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:t.hashAlg});var u=new r.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(u),a.sign(t.signerPrvKey,t.sigAlg),i},Ht.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i=e.getTLV,s={certreq:!1},o=r(t,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var a=i(t,o[1]);s.mi=Ht.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var u=2;u<o.length;u++){var c=o[u],h=t.substr(c,2);if("06"==h){var l=n(t,c);s.policy=e.hextooidstr(l)}"02"==h&&(s.nonce=n(t,c)),"01"==h&&(s.certreq=!0)}return s},Ht.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i=e.getIdxbyList,s={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";r(t,0);var o=n(t,i(t,0,[0,0])),a=e.hextooidstr(o),u=Ht.asn1.x509.OID.oid2name(a);if(""==u)throw"hashAlg name undefined: "+a;var c=u,h=i(t,0,[1]);return s.hashAlg=c,s.hashValue=n(t,h),s},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),void 0!==Ht.asn1.cades&&Ht.asn1.cades||(Ht.asn1.cades={}),Ht.asn1.cades.SignaturePolicyIdentifier=function(t){var e=Ht.asn1,r=e.DERObjectIdentifier,n=e.DERSequence,i=e.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new n({array:[new r({oid:t.oid}),new s(t.hash)]});this.valueList=[o]}},r.lang.extend(Ht.asn1.cades.SignaturePolicyIdentifier,Ht.asn1.cms.Attribute),Ht.asn1.cades.OtherHashAlgAndValue=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new r({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new i({name:t.alg}),this.dHash=new n({hex:t.hash}))},r.lang.extend(Ht.asn1.cades.OtherHashAlgAndValue,Ht.asn1.ASN1Object),Ht.asn1.cades.SignatureTimeStamp=function(t){var e=Ht.asn1,r=e.ASN1Object;e.x509;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof r))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var n=new r;this.tstHex=t.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(t.tst instanceof r))throw"tst param shall be ASN1Object or hex string"}},r.lang.extend(Ht.asn1.cades.SignatureTimeStamp,Ht.asn1.cms.Attribute),Ht.asn1.cades.CompleteCertificateRefs=function(t){var n=Ht.asn1.cades;n.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var e=0;e<t.length;e++){var r=new n.OtherCertID(t[e]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},r.lang.extend(Ht.asn1.cades.CompleteCertificateRefs,Ht.asn1.cms.Attribute),Ht.asn1.cades.OtherCertID=function(t){var r=Ht.asn1,e=r.cms,n=r.cades;n.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new n.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new e.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var e=new r.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},r.lang.extend(Ht.asn1.cades.OtherCertID,Ht.asn1.ASN1Object),Ht.asn1.cades.OtherHash=function(t){var e=Ht,r=e.asn1,n=(r.cms,r.cades),i=n.OtherHashAlgAndValue,s=e.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=se(t),r=s(e,this.alg);this.dOtherHash=new i({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new r.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new i(t))},r.lang.extend(Ht.asn1.cades.OtherHash,Ht.asn1.ASN1Object),Ht.asn1.cades.CAdESUtil=new function(){},Ht.asn1.cades.CAdESUtil.addSigTS=function(t,e,r){},Ht.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=Vt,r=e.getChildIdx,n=e.getTLV,i=e.getTLVbyList,s=e.getIdxbyList,o=Ht.asn1,a=o.ASN1Object,u=o.cms.SignedData,c=o.cades.CAdESUtil,h={};if("06092a864886f70d010702"!=i(t,0,[0]))throw"hex is not CMS SignedData";var l=r(t,s(t,0,[1,0]));if(l.length<4)throw"num of SignedData elem shall be 4 at least";var f=l.shift();h.version=n(t,f);var p=l.shift();h.algs=n(t,p);var d=l.shift();h.encapcontent=n(t,d),h.certs=null,h.revs=null,h.si=[];var y=l.shift();"a0"==t.substr(y,2)&&(h.certs=n(t,y),y=l.shift()),"a1"==t.substr(y,2)&&(h.revs=n(t,y),y=l.shift());var v=y;if("31"!=t.substr(v,2))throw"Can't find signerInfos";for(var b=r(t,v),g=0;g<b.length;g++){var m=b[g],S=c.parseSignerInfoForAddingUnsigned(t,m,g);h.si[g]=S}var E=null;h.obj=new u,(E=new a).hTLV=h.version,h.obj.dCMSVersion=E,(E=new a).hTLV=h.algs,h.obj.dDigestAlgs=E,(E=new a).hTLV=h.encapcontent,h.obj.dEncapContentInfo=E,(E=new a).hTLV=h.certs,h.obj.dCerts=E,h.obj.signerInfoList=[];for(g=0;g<h.si.length;g++)h.obj.signerInfoList.push(h.si[g].obj);return h},Ht.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,r){var n=Vt,i=n.getChildIdx,s=n.getTLV,o=n.getV,a=Ht.asn1,u=a.ASN1Object,c=a.cms,h=c.AttributeList,l=c.SignerInfo,f={},p=i(t,e);if(6!=p.length)throw"not supported items for SignerInfo (!=6)";var d=p.shift();f.version=s(t,d);var y=p.shift();f.si=s(t,y);var v=p.shift();f.digalg=s(t,v);var b=p.shift();f.sattrs=s(t,b);var g=p.shift();f.sigalg=s(t,g);var m=p.shift();f.sig=s(t,m),f.sigval=o(t,m);var S=null;return f.obj=new l,(S=new u).hTLV=f.version,f.obj.dCMSVersion=S,(S=new u).hTLV=f.si,f.obj.dSignerIdentifier=S,(S=new u).hTLV=f.digalg,f.obj.dDigestAlgorithm=S,(S=new u).hTLV=f.sattrs,f.obj.dSignedAttrs=S,(S=new u).hTLV=f.sigalg,f.obj.dSigAlg=S,(S=new u).hTLV=f.sig,f.obj.dSig=S,f.obj.dUnsignedAttrs=new h,f},void 0!==Ht.asn1.csr&&Ht.asn1.csr||(Ht.asn1.csr={}),Ht.asn1.csr.CertificationRequest=function(t){var n=Ht,e=n.asn1,i=e.DERBitString,s=e.DERSequence,r=e.csr,o=e.x509;r.CertificationRequest.superclass.constructor.call(this);this.sign=function(t,e){null==this.prvKey&&(this.prvKey=e),this.asn1SignatureAlg=new o.AlgorithmIdentifier({name:t}),sig=new n.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var r=new s({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=r.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return ie(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},r.lang.extend(Ht.asn1.csr.CertificationRequest,Ht.asn1.ASN1Object),Ht.asn1.csr.CertificationRequestInfo=function(t){var e=Ht.asn1,r=e.DERInteger,s=e.DERSequence,o=e.DERSet,a=e.DERNull,u=e.DERTaggedObject,c=e.DERObjectIdentifier,n=e.csr,i=e.x509,h=i.X500Name,l=i.Extension,f=Ae;n.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new r({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new h(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=f.getKey(t);this.asn1SubjPKey=new i.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){l.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),0<this.extensionsArray.length){var t=new s({array:this.extensionsArray}),e=new o({array:[t]}),r=new s({array:[new c({oid:"1.2.840.113549.1.9.14"}),e]}),n=new u({explicit:!0,tag:"a0",obj:r});this.asn1Array.push(n)}else{n=new u({explicit:!1,tag:"a0",obj:new a});this.asn1Array.push(n)}var i=new s({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},r.lang.extend(Ht.asn1.csr.CertificationRequestInfo,Ht.asn1.ASN1Object),Ht.asn1.csr.CSRUtil=new function(){},Ht.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Ae,r=Ht.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new r.CertificationRequestInfo;if(n.setSubjectByParam(t.subject),n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var i=0;i<t.ext.length;i++)for(key in t.ext[i])n.appendExtensionByName(key,t.ext[i][key]);var s=new r.CertificationRequest({csrinfo:n}),o=e.getKey(t.sbjprvkey);return s.sign(t.sigalg,o),s.getPEMString()},Ht.asn1.csr.CSRUtil.getInfo=function(t){var e=Vt.getTLVbyList,r={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var n=se(t,"CERTIFICATE REQUEST");return r.subject.hex=e(n,0,[0,1]),r.subject.name=Fe.hex2dn(r.subject.hex),r.pubkey.hex=e(n,0,[0,2]),r.pubkey.obj=Ae.getKey(r.pubkey.hex,null,"pkcs8pub"),r},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.asn1&&Ht.asn1||(Ht.asn1={}),void 0!==Ht.asn1.ocsp&&Ht.asn1.ocsp||(Ht.asn1.ocsp={}),Ht.asn1.ocsp.DEFAULT_HASH="sha1",Ht.asn1.ocsp.CertID=function(t){var e=Ht,r=e.asn1,i=r.DEROctetString,s=r.DERInteger,n=r.DERSequence,o=r.x509.AlgorithmIdentifier,a=r.ocsp,h=a.DEFAULT_HASH,l=e.crypto.Util.hashHex,f=Fe,p=Vt;if(a.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,r,n){void 0===n&&(n=h),this.dHashAlg=new o({name:n}),this.dIssuerNameHash=new i({hex:t}),this.dIssuerKeyHash=new i({hex:e}),this.dSerialNumber=new s({hex:r})},this.setByCert=function(t,e,r){void 0===r&&(r=h);var n=new f;n.readCertPEM(e);var i=new f;i.readCertPEM(t);var s=i.getPublicKeyHex(),o=p.getTLVbyList(s,0,[1,0],"30"),a=n.getSerialNumberHex(),u=l(i.getSubjectHex(),r),c=l(o,r);this.setByValue(u,c,a,r),this.hoge=n.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var u=t;if(void 0!==u.issuerCert&&void 0!==u.subjectCert){var c=h;void 0===u.alg&&(c=void 0),this.setByCert(u.issuerCert,u.subjectCert,c)}else{if(void 0===u.namehash||void 0===u.keyhash||void 0===u.serial)throw"invalid constructor arguments";c=h;void 0===u.alg&&(c=void 0),this.setByValue(u.namehash,u.keyhash,u.serial,c)}}},r.lang.extend(Ht.asn1.ocsp.CertID,Ht.asn1.ASN1Object),Ht.asn1.ocsp.Request=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var i=new n.CertID(t);this.dReqCert=i}},r.lang.extend(Ht.asn1.ocsp.Request,Ht.asn1.ASN1Object),Ht.asn1.ocsp.TBSRequest=function(t){var e=Ht.asn1,n=e.DERSequence,i=e.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],r=0;r<t.length;r++){var n=new i.Request(t[0]);e.push(n)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},r.lang.extend(Ht.asn1.ocsp.TBSRequest,Ht.asn1.ASN1Object),Ht.asn1.ocsp.OCSPRequest=function(t){var e=Ht.asn1,r=e.DERSequence,n=e.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var i=new n.TBSRequest(t);this.dTbsRequest=i}},r.lang.extend(Ht.asn1.ocsp.OCSPRequest,Ht.asn1.ASN1Object),Ht.asn1.ocsp.OCSPUtil={},Ht.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,r){var n=Ht.asn1.ocsp;void 0===r&&(r=n.DEFAULT_HASH);var i={alg:r,issuerCert:t,subjectCert:e};return new n.OCSPRequest({reqList:[i]}).getEncodedHex()},Ht.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=Vt,r=e.getVbyList,n=e.getIdxbyList,i=(r=e.getVbyList,e.getV),s={};try{var o=r(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(t){}if(0!==s.responseStatus)return s;try{var a=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(a,2)?s.certStatus="good":"a1"===t.substr(a,2)?(s.certStatus="revoked",s.revocationTime=Zt(r(t,a,[0]))):"82"===t.substr(a,2)&&(s.certStatus="unknown")}catch(t){}try{var u=n(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=Zt(i(t,u))}catch(t){}try{var c=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(c,2)&&(s.nextUpdate=Zt(r(t,c,[0])))}catch(t){}return s},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.lang&&Ht.lang||(Ht.lang={}),Ht.lang.String=function(){},Ut="function"==typeof e?(kt=function(t){return Wt(new e(t,"utf8").toString("base64"))},function(t){return new e(zt(t),"base64").toString("utf8")}):(kt=function(t){return Xt(ue(pe(t)))},function(t){return decodeURIComponent(ce(Jt(t)))}),Ht.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},Ht.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},Ht.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},Ht.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=zt(t),Ht.lang.String.isBase64(t))},Ht.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)};void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.crypto&&Ht.crypto||(Ht.crypto={}),Ht.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:K.algo.MD5,sha1:K.algo.SHA1,sha224:K.algo.SHA224,sha256:K.algo.SHA256,sha384:K.algo.SHA384,sha512:K.algo.SHA512,ripemd160:K.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,r){var n=this.getDigestInfoHex(t,e),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+e;for(var s="00"+n,o="",a=i-"0001".length-s.length,u=0;u<a;u+=2)o+="ff";return"0001"+o+s},this.hashString=function(t,e){return new Ht.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new Ht.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new Ht.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new Ht.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new Ht.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new Ht.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new Ht.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},Ht.crypto.Util.md5=function(t){return new Ht.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},Ht.crypto.Util.ripemd160=function(t){return new Ht.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},Ht.crypto.Util.SECURERANDOMGEN=new It,Ht.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return Ht.crypto.Util.SECURERANDOMGEN.nextBytes(e),Gt(e)},Ht.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new J(Ht.crypto.Util.getRandomHexOfNbytes(t),16)},Ht.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,r=new Array((t-e)/8+1);return Ht.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<e&255^255)&r[0],Gt(r)},Ht.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new J(Ht.crypto.Util.getRandomHexOfNbits(t),16)},Ht.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var r=Ht.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(r))return r}},Ht.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var r=t.compareTo(e);if(1==r)throw"biMin is greater than biMax";if(0==r)return t;var n=e.subtract(t);return Ht.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t)},Ht.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(e,t){if(null!==(e=Ht.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=Ht.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=Ht.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=K.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(K.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Ht.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Ht.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},Ht.crypto.MessageDigest.getHashLength=function(t){var e=Ht.crypto.MessageDigest,r=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[r])throw"not supported algorithm: "+t;return e.HASHLENGTH[r]},Ht.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Ht.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=Ht.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var r=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==e){try{var n=Ht.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=K.algo.HMAC.create(n,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=K.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(K.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=te(t)),void(this.pass=K.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=$t(t.utf8)),void 0!==t.rstr&&(e=te(t.rstr)),void 0!==t.b64&&(e=z(t.b64)),void 0!==t.b64u&&(e=Jt(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=K.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Ht.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Ht.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Ht.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var r=null;try{r=void 0===e?Ae.getKey(t):Ae.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new Ht.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof Dt&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Dt&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Ht.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Ht.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new Ht.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof Dt&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Dt&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Ht.crypto.ECDSA&&this.pubKey instanceof Ht.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Ht.crypto.DSA&&this.pubKey instanceof Ht.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},void 0!==(this.initParams=t)&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=Ht.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Ae.getKey(t.prvkeypem);this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},Ht.crypto.Cipher=function(t){},Ht.crypto.Cipher.encrypt=function(t,e,r){if(e instanceof Dt&&e.isPublic){var n=Ht.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},Ht.crypto.Cipher.decrypt=function(t,e,r){if(e instanceof Dt&&e.isPrivate){var n=Ht.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},Ht.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof Dt){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},Ht.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.crypto&&Ht.crypto||(Ht.crypto={}),Ht.crypto.ECDSA=function(t){var e=new It;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new J(t.bitLength(),e).mod(t.subtract(J.ONE)).add(J.ONE)},this.setNamedCurve=function(t){this.ecparams=Ht.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var r={};return r.x=t.substr(2,e),r.y=t.substr(2+e),r},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),r=this.ecparams.G.multiply(e),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),s=this.ecparams.keylen/4,o=("0000000000"+e.toString(16)).slice(-s),a="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPrivateKeyHex(o),this.setPublicKeyHex(a),{ecprvhex:o,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var r=new J(e,16),n=this.ecparams.n,i=new J(t,16);do{var s=this.getBigRandom(n),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n)}while(o.compareTo(J.ZERO)<=0);var a=s.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return Ht.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var r=e,n=this.ecparams.n,i=J.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(n),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n)}while(o.compareTo(J.ZERO)<=0);var a=s.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,r){var n,i,s,o=Ht.crypto.ECDSA.parseSigHex(e);n=o.r,i=o.s,s=jt.decodeFromHex(this.ecparams.curve,r);var a=new J(t,16);return this.verifyRaw(a,n,i,s)},this.verify=function(t,e,r){var n,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);n=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";n=e.r,i=e.s}if(r instanceof jt)s=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=jt.decodeFrom(this.ecparams.curve,r)}var a=J.fromByteArrayUnsigned(t);return this.verifyRaw(a,n,i,s)},this.verifyRaw=function(t,e,r,n){var i=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(J.ONE)<0||0<=e.compareTo(i))return!1;if(r.compareTo(J.ONE)<0||0<=r.compareTo(i))return!1;var o=r.modInverse(i),a=t.multiply(o).mod(i),u=e.multiply(o).mod(i);return s.multiply(a).add(n.multiply(u)).getX().toBigInteger().mod(i).equals(e)},this.serializeSig=function(t,e){var r=t.toByteArraySigned(),n=e.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if((e=2)!=t[e])throw new Error("First element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:J.fromByteArrayUnsigned(r),s:J.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||7<e)throw"Invalid signature type";var r=this.ecparams.n;return{r:J.fromByteArrayUnsigned(t.slice(1,33)).mod(r),s:J.fromByteArrayUnsigned(t.slice(33,65)).mod(r),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,r,n,i=Vt,s=Ht.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[2,0],"06"),r=o(t,0,[1],"04");try{n=o(t,0,[3,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,r,n,i=Vt,s=Ht.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{o(t,0,[1,0],"06"),e=o(t,0,[1,1],"06"),r=o(t,0,[2,0,1],"04");try{n=o(t,0,[2,0,2,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,r,n=Vt,i=Ht.crypto.ECDSA.getName,s=n.getVbyList;if(!1===n.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[0,0],"06"),e=s(t,0,[0,1],"06"),r=s(t,0,[1],"03").substr(2)}catch(t){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var r,n,i=Vt,s=Ht.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{r=o(t,0,[0,e,0,1],"06"),n=o(t,0,[0,e,1],"03").substr(2)}catch(t){throw"malformed X.509 certificate ECC public key"}if(this.curveName=s(r),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},Ht.crypto.ECDSA.parseSigHex=function(t){var e=Ht.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new J(e.r,16),s:new J(e.s,16)}},Ht.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=Vt,r=e.getChildIdx,n=e.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var i=r(t,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var s=i[0],o=i[1];if("02"!=t.substr(s,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(o,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,s),s:n(t,o)}},Ht.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=Ht.crypto.ECDSA.parseSigHexInHexRS(t),r=e.r,n=e.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},Ht.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),r=t.substr(t.length/2);return Ht.crypto.ECDSA.hexRSSigToASN1Sig(e,r)},Ht.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var r=new J(t,16),n=new J(e,16);return Ht.crypto.ECDSA.biRSSigToASN1Sig(r,n)},Ht.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var r=Ht.asn1,n=new r.DERInteger({bigint:t}),i=new r.DERInteger({bigint:e});return new r.DERSequence({array:[n,i]}).getEncodedHex()},Ht.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.crypto&&Ht.crypto||(Ht.crypto={}),Ht.crypto.ECParameterDB=new function(){var S={},E={};function w(t){return new J(t,16)}this.getByName=function(t){var e=t;if(void 0!==E[e]&&(e=E[t]),void 0!==S[e])return S[e];throw"unregistered EC curve name: "+e},this.regist=function(t,e,r,n,i,s,o,a,u,c,h,l){S[t]={};var f=w(r),p=w(n),d=w(i),y=w(s),v=w(o),b=new Bt(f,p,d),g=b.decodePointHex("04"+a+u);S[t].name=t,S[t].keylen=e,S[t].curve=b,S[t].G=g,S[t].n=y,S[t].h=v,S[t].oid=h,S[t].info=l;for(var m=0;m<c.length;m++)E[c[m]]=t}},Ht.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Ht.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Ht.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Ht.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Ht.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Ht.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Ht.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Ht.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Ht.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Ht.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.crypto&&Ht.crypto||(Ht.crypto={}),Ht.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,r,n,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=r,this.y=n,this.x=i},this.setPrivateHex=function(t,e,r,n,i){var s,o,a,u,c;s=new J(t,16),o=new J(e,16),a=new J(r,16),u="string"==typeof n&&1<n.length?new J(n,16):null,c=new J(i,16),this.setPrivate(s,o,a,u,c)},this.setPublic=function(t,e,r,n){this.isPublic=!0,this.p=t,this.q=e,this.g=r,this.y=n,this.x=null},this.setPublicHex=function(t,e,r,n){var i,s,o,a;i=new J(t,16),s=new J(e,16),o=new J(r,16),a=new J(n,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,r=this.q,n=this.g,i=(this.y,this.x),s=Ht.crypto.Util.getRandomBigIntegerMinToMax(J.ONE.add(J.ONE),r.subtract(J.ONE)),o=new J(t.substr(0,r.bitLength()/4),16),a=n.modPow(s,e).mod(r),u=s.modInverse(r).multiply(o.add(i.multiply(a))).mod(r);return Ht.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(t,e){var r=this.p,n=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],u=o[1],c=new J(t.substr(0,n.bitLength()/4),16);if(0<J.ZERO.compareTo(a)||0<a.compareTo(n))throw"invalid DSA signature";if(0<=J.ZERO.compareTo(u)||0<u.compareTo(n))throw"invalid DSA signature";var h=u.modInverse(n),l=c.multiply(h).mod(n),f=a.multiply(h).mod(n);return 0==i.modPow(l,r).multiply(s.modPow(f,r)).mod(r).mod(n).compareTo(a)},this.parseASN1Signature=function(t){try{return[new J(Vt.getVbyList(t,0,[0],"02"),16),new J(Vt.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,r,n,i,s,o=Vt,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{e=a(t,0,[1],"02"),r=a(t,0,[2],"02"),n=a(t,0,[3],"02"),i=a(t,0,[4],"02"),s=a(t,0,[5],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,r,n,i,s)},this.readPKCS8PrvKeyHex=function(t){var e,r,n,i,s=Vt,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[1,1,0],"02"),r=o(t,0,[1,1,1],"02"),n=o(t,0,[1,1,2],"02"),i=o(t,0,[2,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,r,n,null,i)},this.readPKCS8PubKeyHex=function(t){var e,r,n,i,s=Vt,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[0,1,0],"02"),r=o(t,0,[0,1,1],"02"),n=o(t,0,[0,1,2],"02"),i=o(t,0,[1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,r,n,i)},this.readCertPubKeyHex=function(t,e){var r,n,i,s;5!==e&&(e=6);var o=Vt,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{r=a(t,0,[0,e,0,1,0],"02"),n=a(t,0,[0,e,0,1,1],"02"),i=a(t,0,[0,e,0,1,2],"02"),s=a(t,0,[0,e,1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed X.509 certificate DSA public key"}this.setPublicHex(r,n,i,s)}};var ve,be,ge,me,Se,Ee,we,_e,Ae=(ve=function(t,e,r){return be(K.AES,t,e,r)},be=function(t,e,r,n){var i=K.enc.Hex.parse(e),s=K.enc.Hex.parse(r),o=K.enc.Hex.parse(n),a={};a.key=s,a.iv=o,a.ciphertext=i;var u=t.decrypt(a,s,{iv:o});return K.enc.Hex.stringify(u)},ge=function(t,e,r){return me(K.AES,t,e,r)},me=function(t,e,r,n){var i=K.enc.Hex.parse(e),s=K.enc.Hex.parse(r),o=K.enc.Hex.parse(n),a=t.encrypt(i,s,{iv:o}),u=K.enc.Hex.parse(a.toString());return K.enc.Base64.stringify(u)},Se={"AES-256-CBC":{proc:ve,eproc:ge,keylen:32,ivlen:16},"AES-192-CBC":{proc:ve,eproc:ge,keylen:24,ivlen:16},"AES-128-CBC":{proc:ve,eproc:ge,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,e,r){return be(K.TripleDES,t,e,r)},eproc:function(t,e,r){return me(K.TripleDES,t,e,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,e,r){return be(K.DES,t,e,r)},eproc:function(t,e,r){return me(K.DES,t,e,r)},keylen:8,ivlen:8}},Ee=function(t){var e={},r=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(e.cipher=r[1],e.ivsalt=r[2]);var n=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(e.type=n[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},we=function(t,e,r){for(var n=r.substring(0,16),i=K.enc.Hex.parse(n),s=K.enc.Utf8.parse(e),o=Se[t].keylen+Se[t].ivlen,a="",u=null;;){var c=K.algo.MD5.create();if(null!=u&&c.update(u),c.update(s),c.update(i),u=c.finalize(),(a+=K.enc.Hex.stringify(u)).length>=2*o)break}var h={};return h.keyhex=a.substr(0,2*Se[t].keylen),h.ivhex=a.substr(2*Se[t].keylen,2*Se[t].ivlen),h},_e=function(t,e,r,n){var i=K.enc.Base64.parse(t),s=K.enc.Hex.stringify(i);return(0,Se[e].proc)(s,r,n)},{version:"1.0.0",parsePKCS5PEM:function(t){return Ee(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,r){return we(t,e,r)},decryptKeyB64:function(t,e,r,n){return _e(t,e,r,n)},getDecryptedKeyHex:function(t,e){var r=Ee(t),n=(r.type,r.cipher),i=r.ivsalt,s=r.data,o=we(n,e,i).keyhex;return _e(s,n,o,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,r,n,i){var s,o,a="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===Se[n])throw"KEYUTIL unsupported algorithm: "+n;if(void 0===i||null==i){var u=Se[n].ivlen;i=(s=u,o=K.lib.WordArray.random(s),K.enc.Hex.stringify(o)).toUpperCase()}var c,h,l,f=we(n,r,i).keyhex;return a="-----BEGIN "+t+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+n+","+i+"\r\n",a+="\r\n",a+=(c=e,h=f,l=i,(0,Se[n].eproc)(c,h,l)).replace(/(.{64})/g,"$1\r\n"),a+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i={},s=r(t,0);if(2!=s.length)throw"malformed format: SEQUENCE(0).items != 2: "+s.length;i.ciphertext=n(t,s[1]);var o=r(t,s[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+o.length;if("2a864886f70d01050d"!=n(t,o[0]))throw"this only supports pkcs5PBES2";var a=r(t,o[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+a.length;var u=r(t,a[1]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length;if("2a864886f70d0307"!=n(t,u[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(t,u[1]);var c=r(t,a[0]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length;if("2a864886f70d01050c"!=n(t,c[0]))throw"this only supports pkcs5PBKDF2";var h=r(t,c[1]);if(h.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+h.length;i.pbkdf2Salt=n(t,h[0]);var l=n(t,h[1]);try{i.pbkdf2Iter=parseInt(l,16)}catch(t){throw"malformed format pbkdf2Iter: "+l}return i},getPBKDF2KeyHexFromParam:function(t,e){var r=K.enc.Hex.parse(t.pbkdf2Salt),n=t.pbkdf2Iter,i=K.PBKDF2(e,r,{keySize:6,iterations:n});return K.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var r=se(t,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=Ae.getPBKDF2KeyHexFromParam(n,e),s={};s.ciphertext=K.enc.Hex.parse(n.ciphertext);var o=K.enc.Hex.parse(i),a=K.enc.Hex.parse(n.encryptionSchemeIV),u=K.TripleDES.decrypt(s,o,{iv:a});return K.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(t,e){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=r(t,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=r(t,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=n(t,o[0]),"06"==t.substr(o[1],2)&&(i.algparam=n(t,o[1])),"04"!=t.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=e.getVidx(t,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=se(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,r=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==r.algoid)e=new Dt;else if("2a8648ce380401"==r.algoid)e=new Ht.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw"unsupported private key algorithm";e=new Ht.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,r=Vt.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===r)e=new Dt;else if("2a8648ce380401"===r)e=new Ht.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw"unsupported PKCS#8 public key hex";e=new Ht.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var s=r(t,0);if(2!=s.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(s[0],2))throw"malformed RSA key(code:003)";if(i.n=n(t,s[0]),"02"!=t.substr(s[1],2))throw"malformed RSA key(code:004)";return i.e=n(t,s[1]),i},parsePublicPKCS8Hex:function(t){var e=Vt,r=e.getChildIdx,n=e.getV,i={algparam:null},s=r(t,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=r(t,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=n(t,a[0]),"06"==t.substr(a[1],2)?i.algparam=n(t,a[1]):"30"==t.substr(a[1],2)&&(i.algparam={},i.algparam.p=e.getVbyList(t,a[1],[0],"02"),i.algparam.q=e.getVbyList(t,a[1],[1],"02"),i.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=n(t,s[1]).substr(2),i}});Ae.getKey=function(t,e,r){var n=(v=Vt).getChildIdx,i=(v.getV,v.getVbyList),s=Ht.crypto,o=s.ECDSA,a=s.DSA,u=Dt,c=se,h=Ae;if(void 0!==u&&t instanceof u)return t;if(void 0!==o&&t instanceof o)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new o({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new o({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new u).setPublic(t.n,t.e),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(O=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(O=new u).setPrivate(t.n,t.e,t.d),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(O=new a).setPublic(t.p,t.q,t.g,t.y),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(O=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new u).setPublic(Jt(t.n),Jt(t.e)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(O=new u).setPrivateEx(Jt(t.n),Jt(t.e),Jt(t.d),Jt(t.p),Jt(t.q),Jt(t.dp),Jt(t.dq),Jt(t.qi)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(O=new u).setPrivate(Jt(t.n),Jt(t.e),Jt(t.d)),O;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var l=(x=new o({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Jt(t.x)).slice(-l)+("0000000000"+Jt(t.y)).slice(-l);return x.setPublicKeyHex(f),x}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){l=(x=new o({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Jt(t.x)).slice(-l)+("0000000000"+Jt(t.y)).slice(-l);var p=("0000000000"+Jt(t.d)).slice(-l);return x.setPublicKeyHex(f),x.setPrivateKeyHex(p),x}if("pkcs5prv"===r){var d,y=t,v=Vt;if(9===(d=n(y,0)).length)(O=new u).readPKCS5PrvKeyHex(y);else if(6===d.length)(O=new a).readPKCS5PrvKeyHex(y);else{if(!(2<d.length&&"04"===y.substr(d[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(O=new o).readPKCS5PrvKeyHex(y)}return O}if("pkcs8prv"===r)return O=h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===r)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===r)return Fe.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Fe.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var b=se(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(b)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var g=c(t,"RSA PRIVATE KEY");return h.getKey(g,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var m=i(I=c(t,"DSA PRIVATE KEY"),0,[1],"02"),S=i(I,0,[2],"02"),E=i(I,0,[3],"02"),w=i(I,0,[4],"02"),_=i(I,0,[5],"02");return(O=new a).setPrivate(new J(m,16),new J(S,16),new J(E,16),new J(w,16),new J(_,16)),O}if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var A=h.getDecryptedKeyHex(t,e),T=new Dt;return T.readPKCS5PrvKeyHex(A),T}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var x,O=i(I=h.getDecryptedKeyHex(t,e),0,[1],"04"),C=i(I,0,[2,0],"06"),F=i(I,0,[3,0],"03").substr(2);if(void 0===Ht.crypto.OID.oidhex2name[C])throw"undefined OID(hex) in KJUR.crypto.OID: "+C;return(x=new o({curve:Ht.crypto.OID.oidhex2name[C]})).setPublicKeyHex(F),x.setPrivateKeyHex(O),x.isPublic=!1,x}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I;m=i(I=h.getDecryptedKeyHex(t,e),0,[1],"02"),S=i(I,0,[2],"02"),E=i(I,0,[3],"02"),w=i(I,0,[4],"02"),_=i(I,0,[5],"02");return(O=new a).setPrivate(new J(m,16),new J(S,16),new J(E,16),new J(w,16),new J(_,16)),O}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Ae.generateKeypair=function(t,e){if("RSA"==t){var r=e;(o=new Dt).generate(r,"10001"),o.isPrivate=!0,o.isPublic=!0;var n=new Dt,i=o.n.toString(16),s=o.e.toString(16);return n.setPublic(i,s),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a}if("EC"!=t)throw"unknown algorithm: "+t;var o,a,u=e,c=new Ht.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new Ht.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(n=new Ht.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a},Ae.getPEM=function(t,e,r,n,i,s){var o=Ht,a=o.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,h=a.ASN1Util.newObject,l=a.x509.SubjectPublicKeyInfo,f=o.crypto,p=f.DSA,d=f.ECDSA,y=Dt;function v(t){return h({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function b(t){return h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function g(t){return h({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==y&&t instanceof y||void 0!==p&&t instanceof p||void 0!==d&&t instanceof d)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return ie(w=new l(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==y&&t instanceof y&&(void 0===r||null==r)&&1==t.isPrivate)return ie(w=v(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===r||null==r)&&1==t.isPrivate){var m=new u({name:t.curveName}).getEncodedHex(),S=b(t).getEncodedHex(),E="";return E+=ie(m,"EC PARAMETERS"),E+=ie(S,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===r||null==r)&&1==t.isPrivate)return ie(w=g(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==y&&t instanceof y&&void 0!==r&&null!=r&&1==t.isPrivate){var w=v(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,r,n,s)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==r&&null!=r&&1==t.isPrivate){w=b(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,r,n,s)}if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==r&&null!=r&&1==t.isPrivate){w=g(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,r,n,s)}var _=function(t,e){var r=A(t,e);return new h({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},A=function(t,e){var r=K.lib.WordArray.random(8),n=K.lib.WordArray.random(8),i=K.PBKDF2(e,r,{keySize:6,iterations:100}),s=K.enc.Hex.parse(t),o=K.TripleDES.encrypt(s,i,{iv:n})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=K.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=K.enc.Hex.stringify(n),a};if("PKCS8PRV"==e&&null!=y&&t instanceof y&&1==t.isPrivate){var T=v(t).getEncodedHex();w=h({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:T}}]}).getEncodedHex();return void 0===r||null==r?ie(w,"PRIVATE KEY"):ie(S=_(w,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate){T=new h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),w=h({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:T}}]}).getEncodedHex();return void 0===r||null==r?ie(w,"PRIVATE KEY"):ie(S=_(w,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==p&&t instanceof p&&1==t.isPrivate){T=new c({bigint:t.x}).getEncodedHex(),w=h({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:T}}]}).getEncodedHex();return void 0===r||null==r?ie(w,"PRIVATE KEY"):ie(S=_(w,r),"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},Ae.getKeyFromCSRPEM=function(t){var e=se(t,"CERTIFICATE REQUEST");return Ae.getKeyFromCSRHex(e)},Ae.getKeyFromCSRHex=function(t){var e=Ae.parseCSRHex(t);return Ae.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Ae.parseCSRHex=function(t){var e=Vt,r=e.getChildIdx,n=e.getTLV,i={},s=t;if("30"!=s.substr(0,2))throw"malformed CSR(code:001)";var o=r(s,0);if(o.length<1)throw"malformed CSR(code:002)";if("30"!=s.substr(o[0],2))throw"malformed CSR(code:003)";var a=r(s,o[0]);if(a.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(s,a[2]),i},Ae.getJWKFromKey=function(t){var e={};if(t instanceof Dt&&t.isPrivate)return e.kty="RSA",e.n=Xt(t.n.toString(16)),e.e=Xt(t.e.toString(16)),e.d=Xt(t.d.toString(16)),e.p=Xt(t.p.toString(16)),e.q=Xt(t.q.toString(16)),e.dp=Xt(t.dmp1.toString(16)),e.dq=Xt(t.dmq1.toString(16)),e.qi=Xt(t.coeff.toString(16)),e;if(t instanceof Dt&&t.isPublic)return e.kty="RSA",e.n=Xt(t.n.toString(16)),e.e=Xt(t.e.toString(16)),e;if(t instanceof Ht.crypto.ECDSA&&t.isPrivate){if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=Xt(r.x),e.y=Xt(r.y),e.d=Xt(t.prvKeyHex),e}if(t instanceof Ht.crypto.ECDSA&&t.isPublic){var n;if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=Xt(r.x),e.y=Xt(r.y),e}throw"not supported key object"},Dt.getPosArrayOfChildrenFromHex=function(t){return Vt.getChildIdx(t,0)},Dt.getHexValueArrayOfChildrenFromHex=function(t){var e,r=Vt.getV,n=r(t,(e=Dt.getPosArrayOfChildrenFromHex(t))[0]),i=r(t,e[1]),s=r(t,e[2]),o=r(t,e[3]),a=r(t,e[4]),u=r(t,e[5]),c=r(t,e[6]),h=r(t,e[7]),l=r(t,e[8]);return(e=new Array).push(n,i,s,o,a,u,c,h,l),e},Dt.prototype.readPrivateKeyFromPEMString=function(t){var e=se(t),r=Dt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},Dt.prototype.readPKCS5PrvKeyHex=function(t){var e=Dt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Dt.prototype.readPKCS8PrvKeyHex=function(t){var e,r,n,i,s,o,a,u,c=Vt,h=c.getVbyList;if(!1===c.isASN1HEX(t))throw"not ASN.1 hex string";try{e=h(t,0,[2,0,1],"02"),r=h(t,0,[2,0,2],"02"),n=h(t,0,[2,0,3],"02"),i=h(t,0,[2,0,4],"02"),s=h(t,0,[2,0,5],"02"),o=h(t,0,[2,0,6],"02"),a=h(t,0,[2,0,7],"02"),u=h(t,0,[2,0,8],"02")}catch(t){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,r,n,i,s,o,a,u)},Dt.prototype.readPKCS5PubKeyHex=function(t){var e=Vt,r=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var n=e.getChildIdx(t,0);if(2!==n.length||"02"!==t.substr(n[0],2)||"02"!==t.substr(n[1],2))throw"wrong hex for PKCS#5 public key";var i=r(t,n[0]),s=r(t,n[1]);this.setPublic(i,s)},Dt.prototype.readPKCS8PubKeyHex=function(t){var e=Vt;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var r=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(r)},Dt.prototype.readCertPubKeyHex=function(t,e){var r,n;(r=new Fe).readCertHex(t),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var Te=new RegExp("");function xe(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t}function Oe(t,e,r){for(var n="",i=0;n.length<e;)n+=Qt(r(te(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function Ce(t){for(var e in Ht.crypto.Util.DIGESTINFOHEAD){var r=Ht.crypto.Util.DIGESTINFOHEAD[e],n=r.length;if(t.substring(0,n)==r)return[e,t.substring(n)]}return[]}function Fe(){var o=Vt,h=o.getChildIdx,l=o.getV,f=o.getTLV,p=o.getVbyList,s=o.getTLVbyList,a=o.getIdxbyList,u=o.getVidx,d=o.oidname,t=Fe,e=se;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):this.version=3},this.getSerialNumberHex=function(){return p(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return d(p(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return t.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return t.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=p(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=p(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return o.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return a(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return a(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Ae.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return d(p(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return p(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),r=this.getSignatureValueHex(),n=s(this.hex,0,[0],"30"),i=new Ht.crypto.Signature({alg:e});return i.init(t),i.updateHex(n),i.verify(r)},this.parseExt=function(){if(3!==this.version)return-1;var t=a(this.hex,0,[0,7,0],"30"),e=h(this.hex,t);this.aExtInfo=new Array;for(var r=0;r<e.length;r++){var n={critical:!1},i=0;3===h(this.hex,e[r]).length&&(n.critical=!0,i=1),n.oid=o.hextooidstr(p(this.hex,e[r],[0],"06"));var s=a(this.hex,e[r],[1+i]);n.vidx=u(this.hex,s),this.aExtInfo.push(n)}},this.getExtInfo=function(t){var e=this.aExtInfo,r=t;if(t.match(/^[0-9.]+$/)||(r=Ht.asn1.x509.OID.name2oid(t)),""!==r)for(var n=0;n<e.length;n++)if(e[n].oid===r)return e[n]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=l(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"!==e.substr(0,8))throw"basicConstraints parse error";var r=l(e,6);return{cA:!0,pathLen:parseInt(r,16)}},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=l(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var r=parseInt(e.substr(0,2)),n=parseInt(e.substr(2),16).toString(2);return n.substr(0,n.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&e.push(Fe.KEYUSAGE_NAME[r]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:l(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var e={},r=f(this.hex,t.vidx),n=h(r,0),i=0;i<n.length;i++)"80"===r.substr(n[i],2)&&(e.kid=l(r,n[i]));return e},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,r=f(this.hex,t.vidx);if(""===r)return e;for(var n=h(r,0),i=0;i<n.length;i++)e.push(d(l(r,n[i])));return e},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,r=0;r<t.length;r++)"DNS"===t[r][0]&&e.push(t[r][1]);return e},this.getExtSubjectAltName2=function(){var t,e,r,n=this.getExtInfo("subjectAltName");if(void 0===n)return n;for(var i=new Array,s=f(this.hex,n.vidx),o=h(s,0),a=0;a<o.length;a++)r=s.substr(o[a],2),t=l(s,o[a]),"81"===r&&(e=Zt(t),i.push(["MAIL",e])),"82"===r&&(e=Zt(t),i.push(["DNS",e])),"84"===r&&(e=Fe.hex2dn(t,0),i.push(["DN",e])),"86"===r&&(e=Zt(t),i.push(["URI",e])),"87"===r&&(e=fe(t),i.push(["IP",e]));return i},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var e=new Array,r=h(this.hex,t.vidx),n=0;n<r.length;n++)try{var i=Zt(p(this.hex,r[n],[0,0,0],"86"));e.push(i)}catch(t){}return e},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var e={ocsp:[],caissuer:[]},r=h(this.hex,t.vidx),n=0;n<r.length;n++){var i=p(this.hex,r[n],[0],"06"),s=p(this.hex,r[n],[1],"86");"2b06010505073001"===i&&e.ocsp.push(Zt(s)),"2b06010505073002"===i&&e.caissuer.push(Zt(s))}return e},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var e=f(this.hex,t.vidx),r=[],n=h(e,0),i=0;i<n.length;i++){var s={},o=h(e,n[i]);if(s.id=d(l(e,o[0])),2===o.length)for(var a=h(e,o[1]),u=0;u<a.length;u++){var c=p(e,a[u],[0],"06");"2b06010505070201"===c?s.cps=Zt(p(e,a[u],[1])):"2b06010505070202"===c&&(s.unotice=Zt(p(e,a[u],[1,0])))}r.push(s)}return r},this.readCertPEM=function(t){this.readCertHex(e(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{a(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var t,e,r;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+de(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+de(e.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var n=0;n<r.length;n++){var i=r[n],s=Ht.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),t+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?t+="    {}\n":(t+="    cA=true",void 0!==a.pathLen&&(t+=", pathLen="+a.pathLen),t+="\n")}else if("keyUsage"===s)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var u=this.getExtAuthorityKeyIdentifier();void 0!==u.kid&&(t+="    kid="+u.kid+"\n")}else{if("extKeyUsage"===s)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var c=this.getExtAIAInfo();void 0!==c.ocsp&&(t+="    ocsp: "+c.ocsp.join(",")+"\n"),void 0!==c.caissuer&&(t+="    caissuer: "+c.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var h=this.getExtCertificatePolicies(),l=0;l<h.length;l++)void 0!==h[l].id&&(t+="    policy oid: "+h[l].id+"\n"),void 0!==h[l].cps&&(t+="    cps: "+h[l].cps+"\n")}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Te.compile("[^0-9a-f]","gi"),Dt.prototype.sign=function(t,e){var r,n=(r=t,Ht.crypto.Util.hashString(r,e));return this.signWithMessageHash(n,e)},Dt.prototype.signWithMessageHash=function(t,e){var r=Pt(Ht.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return xe(this.doPrivate(r).toString(16),this.n.bitLength())},Dt.prototype.signPSS=function(t,e,r){var n,i=(n=te(t),Ht.crypto.Util.hashHex(n,e));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,e,r)},Dt.prototype.signWithMessageHashPSS=function(t,e,r){var n,i=Qt(t),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(t){return Ht.crypto.Util.hashHex(t,e)};if(-1===r||void 0===r)r=s;else if(-2===r)r=a-s-2;else if(r<-2)throw"invalid salt length";if(a<s+r+2)throw"data too long";var c="";0<r&&(c=new Array(r),(new It).nextBytes(c),c=String.fromCharCode.apply(String,c));var h=Qt(u(te("\0\0\0\0\0\0\0\0"+i+c))),l=[];for(n=0;n<a-r-s-2;n+=1)l[n]=0;var f=String.fromCharCode.apply(String,l)+""+c,p=Oe(h,f.length,u),d=[];for(n=0;n<f.length;n+=1)d[n]=f.charCodeAt(n)^p.charCodeAt(n);var y=65280>>8*a-o&255;for(d[0]&=~y,n=0;n<s;n++)d.push(h.charCodeAt(n));return d.push(188),xe(this.doPrivate(new J(d)).toString(16),this.n.bitLength())},Dt.prototype.verify=function(t,e){var r=Pt(e=(e=e.replace(Te,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=Ce(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var i,s=n[0];return n[1]==(i=t,Ht.crypto.Util.hashString(i,s))},Dt.prototype.verifyWithMessageHash=function(t,e){var r=Pt(e=(e=e.replace(Te,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=Ce(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;n[0];return n[1]==t},Dt.prototype.verifyPSS=function(t,e,r,n){var i,s=(i=te(t),Ht.crypto.Util.hashHex(i,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(s,e,r,n)},Dt.prototype.verifyWithMessageHashPSS=function(t,e,r,n){var i=new J(e,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(t){return Ht.crypto.Util.hashHex(t,r)},a=Qt(t),u=a.length,c=this.n.bitLength()-1,h=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=h-u-2;else if(n<-2)throw"invalid salt length";if(h<u+n+2)throw"data too long";var l=this.doPublic(i).toByteArray();for(s=0;s<l.length;s+=1)l[s]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw"encoded message does not end in 0xbc";var f=(l=String.fromCharCode.apply(String,l)).substr(0,h-u-1),p=l.substr(f.length,u),d=65280>>8*h-c&255;if(0!=(f.charCodeAt(0)&d))throw"bits beyond keysize not zero";var y=Oe(p,f.length,o),v=[];for(s=0;s<f.length;s+=1)v[s]=f.charCodeAt(s)^y.charCodeAt(s);v[0]&=~d;var b=h-u-n-2;for(s=0;s<b;s+=1)if(0!==v[s])throw"leftmost octets not zero";if(1!==v[b])throw"0x01 marker not found";return p===Qt(o(te("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-n)))))},Dt.SALT_LEN_HLEN=-1,Dt.SALT_LEN_MAX=-2,Dt.SALT_LEN_RECOVER=-2,Fe.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var r=new Array,n=Vt.getChildIdx(t,e),i=0;i<n.length;i++)r.push(Fe.hex2rdn(t,n[i]));return"/"+(r=r.map(function(t){return t.replace("/","\\/")})).join("/")},Fe.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var r=new Array,n=Vt.getChildIdx(t,e),i=0;i<n.length;i++)r.push(Fe.hex2attrTypeValue(t,n[i]));return(r=r.map(function(t){return t.replace("+","\\+")})).join("+")},Fe.hex2attrTypeValue=function(t,e){var r=Vt,n=r.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var i=r.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var s=n(t,i[0]),o=Ht.asn1.ASN1Util.oidHexToInt(s);return Ht.asn1.x509.OID.oid2atype(o)+"="+Qt(n(t,i[1]))},Fe.getPublicKeyFromCertHex=function(t){var e=new Fe;return e.readCertHex(t),e.getPublicKey()},Fe.getPublicKeyFromCertPEM=function(t){var e=new Fe;return e.readCertPEM(t),e.getPublicKey()},Fe.getPublicKeyInfoPropOfCertPEM=function(t){var e,r,n=Vt.getVbyList,i={};return i.algparam=null,(e=new Fe).readCertPEM(t),r=e.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},Fe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.jws&&Ht.jws||(Ht.jws={}),Ht.jws.JWS=function(){var l=Ht.jws.JWS.isSafeJSONString;this.parseJWS=function(t,e){if(void 0===this.parsedJWS||!e&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var n=r[1],i=r[2],s=r[3],o=n+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=n,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=o,!e){var a=Jt(s),u=Pt(a,16);this.parsedJWS.sigvalH=a,this.parsedJWS.sigvalBI=u}var c=Ut(n),h=Ut(i);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!l(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},Ht.jws.JWS.sign=function(t,e,r,n,i){var s,o,a,u=Ht,c=u.jws.JWS,h=c.readSafeJSONString,l=c.isSafeJSONString,f=u.crypto,p=(f.ECDSA,f.Mac),d=f.Signature,y=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(o=e,s=y.stringify(o)),"string"==typeof e){if(!l(s=e))throw"JWS Head is not safe JSON string: "+s;o=h(s)}if("object"==typeof(a=r)&&(a=y.stringify(r)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=y.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var v=null;if(void 0===c.jwsalg2sigalg[t])throw"unsupported alg name: "+t;v=c.jwsalg2sigalg[t];var b=kt(s)+"."+kt(a),g="";if("Hmac"==v.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var m=new p({alg:v,prov:"cryptojs",pass:n});m.updateString(b),g=m.doFinal()}else{var S;if(-1!=v.indexOf("withECDSA"))(S=new d({alg:v})).init(n,i),S.updateString(b),hASN1Sig=S.sign(),g=Ht.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig);else if("none"!=v)(S=new d({alg:v})).init(n,i),S.updateString(b),g=S.sign()}return b+"."+Xt(g)},Ht.jws.JWS.verify=function(t,e,r){var n,i=Ht,s=i.jws.JWS,o=s.readSafeJSONString,a=i.crypto,u=a.ECDSA,c=a.Mac,h=a.Signature;n=Dt;var l=t.split(".");if(3!==l.length)return!1;var f=l[0]+"."+l[1],p=Jt(l[2]),d=o(Ut(l[0])),y=null,v=null;if(void 0===d.alg)throw"algorithm not specified in header";if((v=(y=d.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&0<r.length)&&-1==(":"+r.join(":")+":").indexOf(":"+y+":"))throw"algorithm '"+y+"' not accepted in the list";if("none"!=y&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Ae.getKey(e)),!("RS"!=v&&"PS"!=v||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==v&&!(e instanceof u))throw"key shall be a ECDSA obj for ES* algs";var b=null;if(void 0===s.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+y;if("none"==(b=s.jwsalg2sigalg[y]))throw"not supported";if("Hmac"==b.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var g=new c({alg:b,pass:e});return g.updateString(f),p==g.doFinal()}if(-1==b.indexOf("withECDSA"))return(m=new h({alg:b})).init(e),m.updateString(f),m.verify(p);var m,S=null;try{S=u.concatSigToASN1Sig(p)}catch(t){return!1}return(m=new h({alg:b})).init(e),m.updateString(f),m.verify(S)},Ht.jws.JWS.parse=function(t){var e,r,n,i=t.split("."),s={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],r=i[1],3==i.length&&(n=i[2]),s.headerObj=Ht.jws.JWS.readSafeJSONString(Ut(e)),s.payloadObj=Ht.jws.JWS.readSafeJSONString(Ut(r)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=Ut(r):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=Jt(n)),s},Ht.jws.JWS.verifyJWT=function(t,e,r){var n=Ht.jws,i=n.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,u=t.split("."),c=u[0],h=u[1],l=(Jt(u[2]),s(Ut(c))),f=s(Ut(h));if(void 0===l.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!o(l.alg,r.alg))return!1;if(void 0!==f.iss&&"object"==typeof r.iss&&!o(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"==typeof r.sub&&!o(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"==typeof r.aud)if("string"==typeof f.aud){if(!o(f.aud,r.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,r.aud))return!1;var p=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(p=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<p)&&(!(void 0!==f.nbf&&"number"==typeof f.nbf&&p<f.nbf-r.gracePeriod)&&(!(void 0!==f.iat&&"number"==typeof f.iat&&p<f.iat-r.gracePeriod)&&((void 0===f.jti||void 0===r.jti||f.jti===r.jti)&&!!i.verify(t,e,r.alg))))},Ht.jws.JWS.includedArray=function(t,e){var r=Ht.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e))return!1;return!0},Ht.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1},Ht.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Ht.jws.JWS.isSafeJSONString=function(t,e,r){var n=null;try{return"object"!=typeof(n=Mt(t))?0:n.constructor===Array?0:(e&&(e[r]=n),1)}catch(t){return 0}},Ht.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=Mt(t))?null:e.constructor===Array?null:e}catch(t){return null}},Ht.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},Ht.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var r=te(e);return Xt(Ht.crypto.Util.hashHex(r,"sha256"))},Ht.jws.IntDate={},Ht.jws.IntDate.get=function(t){var e=Ht.jws.IntDate,r=e.getNow,n=e.getZulu;if("now"==t)return r();if("now + 1hour"==t)return r()+3600;if("now + 1day"==t)return r()+86400;if("now + 1month"==t)return r()+2592e3;if("now + 1year"==t)return r()+31536e3;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},Ht.jws.IntDate.getZulu=function(t){return ae(t)},Ht.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Ht.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},Ht.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==Ht&&Ht||(Ht={}),void 0!==Ht.jws&&Ht.jws||(Ht.jws={}),Ht.jws.JWSJS=function(){var a=Ht.jws.JWS,r=a.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=Ht.jws.JWS.sign(t,e,this.sPayload,r,n).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var r=t[e];if(2!==r.length)return!1;if(!1===this.verifyNth(e,r[0],r[1]))return!1}return!0},this.verifyNth=function(t,e,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var n=this.aHeader[t],i=this.aSignature[t],s=n+"."+this.sPayload+"."+i,o=!1;try{o=a.verify(s,e,r)}catch(t){return!1}return o},this.readJWSJS=function(t){if("string"==typeof t){var e=r(t);if(null==e)throw"argument is not safe JSON object string";this.aHeader=e.headers,this.sPayload=e.payload,this.aSignature=e.signatures}else try{if(!(0<t.headers.length))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(0<t.signatures.length))throw"malformed signatures";this.aSignatures=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},Ie.SecureRandom=It,Ie.rng_seed_time=At,Ie.BigInteger=J,Ie.RSAKey=Dt,Ie.ECDSA=Ht.crypto.ECDSA,Ie.DSA=Ht.crypto.DSA,Ie.Signature=Ht.crypto.Signature,Ie.MessageDigest=Ht.crypto.MessageDigest,Ie.Mac=Ht.crypto.Mac,Ie.Cipher=Ht.crypto.Cipher,Ie.KEYUTIL=Ae,Ie.ASN1HEX=Vt,Ie.X509=Fe,Ie.CryptoJS=K,Ie.b64tohex=z,Ie.b64toBA=X,Ie.stoBA=Kt,Ie.BAtos=qt,Ie.BAtohex=Gt,Ie.stohex=Yt,Ie.stob64=function(t){return W(Yt(t))},Ie.stob64u=function(t){return Wt(W(Yt(t)))},Ie.b64utos=function(t){return qt(X(zt(t)))},Ie.b64tob64u=Wt,Ie.b64utob64=zt,Ie.hex2b64=W,Ie.hextob64u=Xt,Ie.b64utohex=Jt,Ie.utf8tob64u=kt,Ie.b64utoutf8=Ut,Ie.utf8tob64=function(t){return W(ue(pe(t)))},Ie.b64toutf8=function(t){return decodeURIComponent(ce(z(t)))},Ie.utf8tohex=$t,Ie.hextoutf8=Zt,Ie.hextorstr=Qt,Ie.rstrtohex=te,Ie.hextob64=ee,Ie.hextob64nl=re,Ie.b64nltohex=ne,Ie.hextopem=ie,Ie.pemtohex=se,Ie.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),r=new DataView(e),n=0;n<t.length/2;n++)r.setUint8(n,parseInt(t.substr(2*n,2),16));return e},Ie.ArrayBuffertohex=function(t){for(var e="",r=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+r.getUint8(n).toString(16)).slice(-2);return e},Ie.zulutomsec=oe,Ie.zulutosec=ae,Ie.zulutodate=function(t){return new Date(oe(t))},Ie.datetozulu=function(t,e,r){var n,i=t.getUTCFullYear();if(e){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),r){var s=t.getUTCMilliseconds();0!==s&&(n+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return n+="Z"},Ie.uricmptohex=ue,Ie.hextouricmp=ce,Ie.ipv6tohex=he,Ie.hextoipv6=le,Ie.hextoip=fe,Ie.iptohex=function(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return he(t);throw e}var r=t.split(".");if(4!==r.length)throw e;var n="";try{for(var i=0;i<4;i++)n+=("0"+parseInt(r[i]).toString(16)).slice(-2);return n}catch(t){throw e}},Ie.encodeURIComponentAll=pe,Ie.newline_toUnix=function(t){return t=t.replace(/\r\n/gm,"\n")},Ie.newline_toDos=function(t){return t=(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},Ie.hextoposhex=de,Ie.intarystrtohex=ye,Ie.strdiffidx=function(t,e){var r=t.length;t.length>e.length&&(r=e.length);for(var n=0;n<r;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?r:-1},Ie.KJUR=Ht,Ie.crypto=Ht.crypto,Ie.asn1=Ht.asn1,Ie.jws=Ht.jws,Ie.lang=Ht.lang}).call(this,e(197).Buffer)},function(t,M,e){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=e(198),s=e(199),o=e(200);function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"!=typeof t)return i(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}function i(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=h(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|f(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|f(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(n)return L(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var s,o=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=o=2,u/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var h=-1;for(s=r;s<a;s++)if(c(t,s)===c(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(a<r+u&&(r=a-u),s=r;0<=s;s--){for(var l=!0,f=0;f<u;f++)if(c(t,s+f)!==c(e,f)){l=!1;break}if(l)return s}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?i<(n=Number(n))&&(n=i):n=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");s/2<n&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function g(t,e,r,n){return B(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function m(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,u,c=t[i],h=null,l=239<c?4:223<c?3:191<c?2:1;if(i+l<=r)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(s=t[i+1]))&&127<(u=(31&c)<<6|63&s)&&(h=u);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&2047<(u=(15&c)<<12|(63&s)<<6|63&o)&&(u<55296||57343<u)&&(h=u);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)&&u<1114112&&(h=u)}null===h?(h=65533,l=1):65535<h&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}M.Buffer=l,M.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},M.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),M.kMaxLength=r(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return i(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return n=null,s=e,o=r,u(i=t),i<=0?a(n,i):void 0!==s?"string"==typeof o?a(n,i).fill(s,o):a(n,i).fill(s):a(n,i);var n,i,s,o},l.allocUnsafe=function(t){return c(null,t)},l.allocUnsafeSlow=function(t){return c(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return w(this,e,r);case"latin1":case"binary":return _(this,e,r);case"base64":return m(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",e=M.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),a=Math.min(s,o),u=this.slice(n,i),c=t.slice(e,r),h=0;h<a;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s,o,a,u,c,h,l,f,p,d=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return f=e,p=r,B(L(t,(l=this).length-f),l,f,p);case"ascii":return g(this,t,e,r);case"latin1":case"binary":return g(this,t,e,r);case"base64":return u=this,c=e,h=r,B(j(t),u,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=e,a=r,B(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,(s=this).length-o),s,o,a);default:if(d)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function w(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function _(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",s=e;s<r;++s)i+=R(t[s]);return i}function T(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function x(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,s){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function C(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function F(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function I(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(t,e,r,n,i){return i||I(t,0,r,4),s.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,i){return i||I(t,0,r,8),s.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=e,i=1,s=this[t+--n];0<n&&(i*=256);)s+=this[t+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*e)),s},l.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),s.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),s.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),s.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),s.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;0<=--i&&(s*=256);)this[e+i]=t/s&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;0<=--s&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return P(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return P(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;0<=i;--i)t[i+e]=this[i+r];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=l.isBuffer(t)?t:L(new l(t,n).toString()),a=o.length;for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if(55295<(r=t.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&s.push(239,191,189);continue}if(o+1===n){-1<(e-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function j(t){return n.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,e(28))},function(t,e,r){"use strict";e.byteLength=function(t){var e=p(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=p(t),n=r[0],i=r[1],s=new f((c=n,h=i,3*(c+h)/4-h)),o=0,a=0<i?n-4:n,u=0;u<a;u+=4)e=l[t.charCodeAt(u)]<<18|l[t.charCodeAt(u+1)]<<12|l[t.charCodeAt(u+2)]<<6|l[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=255&e;var c,h;2===i&&(e=l[t.charCodeAt(u)]<<2|l[t.charCodeAt(u+1)]>>4,s[o++]=255&e);1===i&&(e=l[t.charCodeAt(u)]<<10|l[t.charCodeAt(u+1)]<<4|l[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=255&e);return s},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],s=0,o=r-n;s<o;s+=16383)i.push(u(t,s,o<s+16383?o:s+16383));1===n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)a[i]=n[i],l[n.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var n,i,s=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(a[(i=n)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return s.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,f=r?-1:1,p=t[e+l];for(l+=f,s=p&(1<<-h)-1,p>>=-h,h+=a;0<h;s=256*s+t[e+l],l+=f,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;0<h;o=256*o+t[e+l],l+=f,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=c}return(p?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(e+=1<=o+l?f/u:f*Math.pow(2,1-l))*u&&(o++,u/=2),h<=o+l?(a=0,o=h):1<=o+l?(a=(e*u-1)*Math.pow(2,i),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));8<=i;t[r+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,c+=i;0<c;t[r+p]=255&o,p+=d,o/=256,c-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(202),i=function(){function t(t){this.apiConfig=t}return t.prototype.fetch=function(t){return new n.FetchHandler(t,this.apiConfig).doFetch()},t}();e.ApiServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(203),i=r(499),s=r(502),o=function(){function t(t,e){this.request=t,this.apiConfig=e;var r=new n.HttpClientImpl;this.baseConnection=new i.BaseConnection(r,this.apiConfig)}return t.prototype.doFetch=function(){return this.handleBearerToken(),this.baseConnection.invoke(this.request)},t.prototype.handleBearerToken=function(){!0===this.request.requiredApiToken&&this.request.authenticators.push(new s.ApiAuthenticator(this.apiConfig))},t}();e.FetchHandler=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(5),o=r(10),n=function(){function t(){this.http=cordova.plugin.http}return t.prototype.addHeaders=function(t){for(var e in t)t.hasOwnProperty(e)&&this.http.setHeader("*",e,t[e])},t.prototype.addHeader=function(t,e){this.http.setHeader("*",t,e)},t.prototype.get=function(t,e,r,n){return this.invokeRequest(s.HttpRequestType.GET,t+e,n,r)},t.prototype.patch=function(t,e,r,n){return this.invokeRequest(s.HttpRequestType.PATCH,t+e,n,r)},t.prototype.post=function(t,e,r,n){return this.invokeRequest(s.HttpRequestType.POST,t+e,n,r)},t.prototype.invokeRequest=function(t,e,r,n){var i=new o.Subject;return this.http[t.toLowerCase()](e,r,n,function(t){var e=new s.Response;e.body=JSON.parse(t.data),e.responseCode=t.status,e.errorMesg=t.error,i.next(e),i.complete()},function(t){var e=new s.Response;e.body=JSON.parse(t.data),e.responseCode=t.status,e.errorMesg=t.error,i.error(e)}),i},t}();e.HttpClientImpl=n},function(t,e,r){"use strict";var n=r(1),i=r(30),s=r(72);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(s.empty)}},function(t,e,r){"use strict";var n=r(0),i=r(206);n.Observable.bindCallback=i.bindCallback},function(t,e,r){"use strict";var n=r(207);e.bindCallback=n.BoundCallbackObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),h=r(9),l=r(8),f=r(33),s=function(s){function o(t,e,r,n,i){s.call(this),this.callbackFunc=t,this.selector=e,this.args=r,this.context=n,this.scheduler=i}return n(o,s),o.create=function(r,n,i){return void 0===n&&(n=void 0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return new o(r,n,t,this,i)}},o.prototype._subscribe=function(t){var e=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(o.dispatch,0,{source:this,subscriber:t,context:this.context});if(!i){i=this.subject=new f.AsyncSubject;var s=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=t.source,i=n.selector,s=n.subject;if(i){var o=h.tryCatch(i).apply(this,e);o===l.errorObject?s.error(l.errorObject.e):(s.next(o),s.complete())}else s.next(e.length<=1?e[0]:e),s.complete()};s.source=this,h.tryCatch(e).apply(this.context,r.concat(s))===l.errorObject&&i.error(l.errorObject.e)}return i.subscribe(t)},o.dispatch=function(t){var u=this,e=t.source,r=t.subscriber,n=t.context,i=e.callbackFunc,s=e.args,c=e.scheduler,o=e.subject;if(!o){o=e.subject=new f.AsyncSubject;var a=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=t.source,i=n.selector,s=n.subject;if(i){var o=h.tryCatch(i).apply(this,e);o===l.errorObject?u.add(c.schedule(d,0,{err:l.errorObject.e,subject:s})):u.add(c.schedule(p,0,{value:o,subject:s}))}else{var a=e.length<=1?e[0]:e;u.add(c.schedule(p,0,{value:a,subject:s}))}};a.source=e,h.tryCatch(i).apply(n,s.concat(a))===l.errorObject&&o.error(l.errorObject.e)}u.add(o.subscribe(r))},o}(i.Observable);function p(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function d(t){var e=t.err;t.subject.error(e)}e.BoundCallbackObservable=s},function(t,e,r){"use strict";var n=r(0),i=r(209);n.Observable.bindNodeCallback=i.bindNodeCallback},function(t,e,r){"use strict";var n=r(210);e.bindNodeCallback=n.BoundNodeCallbackObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),l=r(9),f=r(8),p=r(33),s=function(s){function o(t,e,r,n,i){s.call(this),this.callbackFunc=t,this.selector=e,this.args=r,this.context=n,this.scheduler=i}return n(o,s),o.create=function(r,n,i){return void 0===n&&(n=void 0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return new o(r,n,t,this,i)}},o.prototype._subscribe=function(t){var e=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(a,0,{source:this,subscriber:t,context:this.context});if(!i){i=this.subject=new p.AsyncSubject;var s=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=t.source,i=n.selector,s=n.subject,o=e.shift();if(o)s.error(o);else if(i){var a=l.tryCatch(i).apply(this,e);a===f.errorObject?s.error(f.errorObject.e):(s.next(a),s.complete())}else s.next(e.length<=1?e[0]:e),s.complete()};s.source=this,l.tryCatch(e).apply(this.context,r.concat(s))===f.errorObject&&i.error(f.errorObject.e)}return i.subscribe(t)},o}(i.Observable);function a(t){var c=this,e=t.source,r=t.subscriber,n=t.context,i=e,s=i.callbackFunc,o=i.args,h=i.scheduler,a=e.subject;if(!a){a=e.subject=new p.AsyncSubject;var u=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=t.source,i=n.selector,s=n.subject,o=e.shift();if(o)c.add(h.schedule(y,0,{err:o,subject:s}));else if(i){var a=l.tryCatch(i).apply(this,e);a===f.errorObject?c.add(h.schedule(y,0,{err:f.errorObject.e,subject:s})):c.add(h.schedule(d,0,{value:a,subject:s}))}else{var u=e.length<=1?e[0]:e;c.add(h.schedule(d,0,{value:u,subject:s}))}};u.source=e,l.tryCatch(s).apply(n,o.concat(u))===f.errorObject&&c.add(h.schedule(y,0,{err:f.errorObject.e,subject:a}))}c.add(a.subscribe(r))}function d(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function y(t){var e=t.err;t.subject.error(e)}e.BoundNodeCallbackObservable=s},function(t,e,r){"use strict";var n=r(0),i=r(212);n.Observable.combineLatest=i.combineLatest},function(t,e,r){"use strict";var i=r(12),s=r(13),o=r(14),a=r(34);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null,n=null;return i.isScheduler(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),new o.ArrayObservable(t,n).lift(new a.CombineLatestOperator(r))}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(n){function t(t,e,r){n.call(this),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}return i(t,n),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(1).Subscriber);e.InnerSubscriber=n},function(t,e,r){"use strict";var n=r(0),i=r(19);n.Observable.concat=i.concat},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(11),i=r(0),o=r(18),a=function(r){function i(t,e){if(r.call(this),this.scheduler=e,null==t)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[o.iterator];if(!e&&"string"==typeof t)return new u(t);if(!e&&void 0!==t.length)return new c(t);if(e)return t[o.iterator]();throw new TypeError("object is not iterable")}(t)}return n(i,r),i.create=function(t,e){return new i(t,e)},i.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,i=t.subscriber;if(r)i.error(t.error);else{var s=n.next();s.done?i.complete():(i.next(s.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},i.prototype._subscribe=function(t){var e=this.iterator,r=this.scheduler;if(r)return r.schedule(i.dispatch,0,{index:0,iterator:e,subscriber:t});for(;;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed){"function"==typeof e.return&&e.return();break}}},i}(i.Observable);e.IteratorObservable=a;var u=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[o.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),c=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(r=e,"number"!=typeof r||!s.root.isFinite(r)))return e;var r;if(n=e,i=+n,(e=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(e)))<=0)return 0;var n,i;if(h<e)return h;return e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[o.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var h=Math.pow(2,53)-1},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),o=r(49),a=r(15),s=function(r){function s(t,e){r.call(this),this.arrayLike=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(s,r),s.create=function(t,e){var r=t.length;return 0===r?new a.EmptyObservable:1===r?new o.ScalarObservable(t[0],e):new s(t,e)},s.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.subscriber;i.closed||(n<=r?i.complete():(i.next(e[r]),t.index=r+1,this.schedule(t)))},s.prototype._subscribe=function(t){var e=this.arrayLike,r=this.scheduler,n=e.length;if(r)return r.schedule(s.dispatch,0,{arrayLike:e,index:0,length:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(e[i]);t.complete()},s}(i.Observable);e.ArrayLikeObservable=s},function(t,e,r){"use strict";var n=r(0),i=r(218);n.Observable.defer=i.defer},function(t,e,r){"use strict";var n=r(219);e.defer=n.DeferObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(3),o=r(2),a=function(e){function r(t){e.call(this),this.observableFactory=t}return n(r,e),r.create=function(t){return new r(t)},r.prototype._subscribe=function(t){return new u(t,this.observableFactory)},r}(i.Observable);e.DeferObservable=a;var u=function(r){function t(t,e){r.call(this,t),this.factory=e,this.tryDefer()}return n(t,r),t.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},t.prototype._callFactory=function(){var t=this.factory();t&&this.add(s.subscribeToResult(this,t))},t}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(0),i=r(221);n.Observable.empty=i.empty},function(t,e,r){"use strict";var n=r(15);e.empty=n.EmptyObservable.create},function(t,e,r){"use strict";var n=r(0),i=r(223);n.Observable.forkJoin=i.forkJoin},function(t,e,r){"use strict";var n=r(224);e.forkJoin=n.ForkJoinObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(0),s=r(15),o=r(13),u=r(3),a=r(2),c=function(r){function n(t,e){r.call(this),this.sources=t,this.resultSelector=e}return i(n,r),n.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(null===t||0===arguments.length)return new s.EmptyObservable;var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0]),0===t.length?new s.EmptyObservable:new n(t,r)},n.prototype._subscribe=function(t){return new h(t,this.sources,this.resultSelector)},n}(n.Observable);e.ForkJoinObservable=c;var h=function(a){function t(t,e,r){a.call(this,t),this.sources=e,this.resultSelector=r,this.completed=0,this.haveValues=0;var n=e.length;this.total=n,this.values=new Array(n);for(var i=0;i<n;i++){var s=e[i],o=u.subscribeToResult(this,s,null,i);o&&(o.outerIndex=i,this.add(o))}}return i(t,a),t.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(t){var e=this.destination,r=this.haveValues,n=this.resultSelector,i=this.values,s=i.length;if(t._hasValue){if(this.completed++,this.completed===s){if(r===s){var o=n?n.apply(this,i):i;e.next(o)}e.complete()}}else e.complete()},t}(a.OuterSubscriber)},function(t,e,r){"use strict";var n=r(0),i=r(77);n.Observable.from=i.from},function(t,e,r){"use strict";var n=r(0),i=r(227);n.Observable.fromEvent=i.fromEvent},function(t,e,r){"use strict";var n=r(228);e.fromEvent=n.FromEventObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(9),o=r(29),a=r(8),b=r(6),g=Object.prototype.toString;var u=function(i){function v(t,e,r,n){i.call(this),this.sourceObj=t,this.eventName=e,this.selector=r,this.options=n}return n(v,i),v.create=function(t,e,r,n){return o.isFunction(r)&&(n=r,r=void 0),new v(t,e,n,r)},v.setupSubscription=function(t,e,r,n,i){var s,o,a,u,c,h;if((h=t)&&"[object NodeList]"===g.call(h)||(c=t)&&"[object HTMLCollection]"===g.call(c))for(var l=0,f=t.length;l<f;l++)v.setupSubscription(t[l],e,r,n,i);else if((u=t)&&"function"==typeof u.addEventListener&&"function"==typeof u.removeEventListener){var p=t;t.addEventListener(e,r,i),s=function(){return p.removeEventListener(e,r,i)}}else if((a=t)&&"function"==typeof a.on&&"function"==typeof a.off){var d=t;t.on(e,r),s=function(){return d.off(e,r)}}else{if(!(o=t)||"function"!=typeof o.addListener||"function"!=typeof o.removeListener)throw new TypeError("Invalid event target");var y=t;t.addListener(e,r),s=function(){return y.removeListener(e,r)}}n.add(new b.Subscription(s))},v.prototype._subscribe=function(n){var t=this.sourceObj,e=this.eventName,r=this.options,i=this.selector;v.setupSubscription(t,e,i?function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=s.tryCatch(i).apply(void 0,t);r===a.errorObject?n.error(a.errorObject.e):n.next(r)}:function(t){return n.next(t)},n,r)},v}(i.Observable);e.FromEventObservable=u},function(t,e,r){"use strict";var n=r(0),i=r(230);n.Observable.fromEventPattern=i.fromEventPattern},function(t,e,r){"use strict";var n=r(231);e.fromEventPattern=n.FromEventPatternObservable.create},function(t,e,r){"use strict";var s=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(29),n=r(0),a=r(6),i=function(n){function i(t,e,r){n.call(this),this.addHandler=t,this.removeHandler=e,this.selector=r}return s(i,n),i.create=function(t,e,r){return new i(t,e,r)},i.prototype._subscribe=function(r){var n=this,t=this.removeHandler,e=this.selector?function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];n._callSelector(r,t)}:function(t){r.next(t)},i=this._callAddHandler(e,r);o.isFunction(t)&&r.add(new a.Subscription(function(){t(e,i)}))},i.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},i.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},i}(n.Observable);e.FromEventPatternObservable=i},function(t,e,r){"use strict";var n=r(0),i=r(233);n.Observable.fromPromise=i.fromPromise},function(t,e,r){"use strict";var n=r(79);e.fromPromise=n.PromiseObservable.create},function(t,e,r){"use strict";var n=r(0),i=r(235);n.Observable.generate=i.generate},function(t,e,r){"use strict";var n=r(236);e.generate=n.GenerateObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),o=r(12),u=function(t){return t},s=function(s){function a(t,e,r,n,i){s.call(this),this.initialState=t,this.condition=e,this.iterate=r,this.resultSelector=n,this.scheduler=i}return n(a,s),a.create=function(t,e,r,n,i){return 1==arguments.length?new a(t.initialState,t.condition,t.iterate,t.resultSelector||u,t.scheduler):void 0===n||o.isScheduler(n)?new a(t,e,r,u,n):new a(t,e,r,n,i)},a.prototype._subscribe=function(e){var t=this.initialState;if(this.scheduler)return this.scheduler.schedule(a.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:t});for(var r=this.condition,n=this.resultSelector,i=this.iterate;;){if(r){var s=void 0;try{s=r(t)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var o=void 0;try{o=n(t)}catch(t){return void e.error(t)}if(e.next(o),e.closed)break;try{t=i(t)}catch(t){return void e.error(t)}}},a.dispatch=function(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(t){return void e.error(t)}if(!n)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}},a}(i.Observable);e.GenerateObservable=s},function(t,e,r){"use strict";var n=r(0),i=r(238);n.Observable.if=i._if},function(t,e,r){"use strict";var n=r(239);e._if=n.IfObservable.create},function(t,e,r){"use strict";var s=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(0),o=r(3),i=r(2),a=function(n){function i(t,e,r){n.call(this),this.condition=t,this.thenSource=e,this.elseSource=r}return s(i,n),i.create=function(t,e,r){return new i(t,e,r)},i.prototype._subscribe=function(t){var e=this.condition,r=this.thenSource,n=this.elseSource;return new u(t,e,r,n)},i}(n.Observable);e.IfObservable=a;var u=function(i){function t(t,e,r,n){i.call(this,t),this.condition=e,this.thenSource=r,this.elseSource=n,this.tryIf()}return s(t,i),t.prototype.tryIf=function(){var t=this.condition,e=this.thenSource,r=this.elseSource;try{var n=t()?e:r;n?this.add(o.subscribeToResult(this,n)):this._complete()}catch(t){this._error(t)}},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=r(0),i=r(241);n.Observable.interval=i.interval},function(t,e,r){"use strict";var n=r(242);e.interval=n.IntervalObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(22),n=r(0),o=r(4),a=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=o.async),r.call(this),this.period=t,this.scheduler=e,(!s.isNumeric(t)||t<0)&&(this.period=0),e&&"function"==typeof e.schedule||(this.scheduler=o.async)}return i(n,r),n.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=o.async),new n(t,e)},n.dispatch=function(t){var e=t.index,r=t.subscriber,n=t.period;r.next(e),r.closed||(t.index+=1,this.schedule(t,n))},n.prototype._subscribe=function(t){var e=this.period,r=this.scheduler;t.add(r.schedule(n.dispatch,e,{index:0,subscriber:t,period:e}))},n}(n.Observable);e.IntervalObservable=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t,e){r.call(this)}return n(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(r(6).Subscription);e.Action=i},function(t,e,r){"use strict";var n=function(){function r(t,e){void 0===e&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},r.now=Date.now?Date.now:function(){return+new Date},r}();e.Scheduler=n},function(t,e,r){"use strict";var n=r(0),i=r(37);n.Observable.merge=i.merge},function(t,e,r){"use strict";var n=r(0),i=r(51);n.Observable.race=i.race},function(t,e,r){"use strict";var n=r(0),i=r(248);n.Observable.never=i.never},function(t,e,r){"use strict";var n=r(249);e.never=n.NeverObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(48),o=function(t){function e(){t.call(this)}return n(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){s.noop()},e}(i.Observable);e.NeverObservable=o},function(t,e,r){"use strict";var n=r(0),i=r(76);n.Observable.of=i.of},function(t,e,r){"use strict";var n=r(0),i=r(252);n.Observable.onErrorResumeNext=i.onErrorResumeNext},function(t,e,r){"use strict";var n=r(52);e.onErrorResumeNext=n.onErrorResumeNextStatic},function(t,e,r){"use strict";var n=r(0),i=r(254);n.Observable.pairs=i.pairs},function(t,e,r){"use strict";var n=r(255);e.pairs=n.PairsObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function o(t){var e=t.obj,r=t.keys,n=t.length,i=t.index,s=t.subscriber;if(i!==n){var o=r[i];s.next([o,e[o]]),t.index=i+1,this.schedule(t)}else s.complete()}var n=function(r){function n(t,e){r.call(this),this.obj=t,this.scheduler=e,this.keys=Object.keys(t)}return i(n,r),n.create=function(t,e){return new n(t,e)},n.prototype._subscribe=function(t){var e=this.keys,r=this.scheduler,n=e.length;if(r)return r.schedule(o,0,{obj:this.obj,keys:e,length:n,index:0,subscriber:t});for(var i=0;i<n;i++){var s=e[i];t.next([s,this.obj[s]])}t.complete()},n}(r(0).Observable);e.PairsObservable=n},function(t,e,r){"use strict";var n=r(0),i=r(257);n.Observable.range=i.range},function(t,e,r){"use strict";var n=r(258);e.range=n.RangeObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(n){function s(t,e,r){n.call(this),this.start=t,this._count=e,this.scheduler=r}return i(s,n),s.create=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),new s(t,e,r)},s.dispatch=function(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;n<=r?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))},s.prototype._subscribe=function(t){var e=0,r=this.start,n=this._count,i=this.scheduler;if(i)return i.schedule(s.dispatch,0,{index:e,count:n,start:r,subscriber:t});for(;;){if(e++>=n){t.complete();break}if(t.next(r++),t.closed)break}},s}(r(0).Observable);e.RangeObservable=n},function(t,e,r){"use strict";var n=r(0),i=r(260);n.Observable.using=i.using},function(t,e,r){"use strict";var n=r(261);e.using=n.UsingObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(0),s=r(3),o=r(2),a=function(r){function n(t,e){r.call(this),this.resourceFactory=t,this.observableFactory=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.prototype._subscribe=function(e){var t,r=this.resourceFactory,n=this.observableFactory;try{return t=r(),new u(e,t,n)}catch(t){e.error(t)}},n}(n.Observable);e.UsingObservable=a;var u=function(n){function t(t,e,r){n.call(this,t),this.resource=e,this.observableFactory=r,t.add(e),this.tryUse()}return i(t,n),t.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(s.subscribeToResult(this,t))}catch(t){this._error(t)}},t}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(0),i=r(263);n.Observable.throw=i._throw},function(t,e,r){"use strict";var n=r(264);e._throw=n.ErrorObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(r){function n(t,e){r.call(this),this.error=t,this.scheduler=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.dispatch=function(t){var e=t.error;t.subscriber.error(e)},n.prototype._subscribe=function(t){var e=this.error,r=this.scheduler;if(t.syncErrorThrowable=!0,r)return r.schedule(n.dispatch,0,{error:e,subscriber:t});t.error(e)},n}(r(0).Observable);e.ErrorObservable=n},function(t,e,r){"use strict";var n=r(0),i=r(81);n.Observable.timer=i.timer},function(t,e,r){"use strict";var s=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(22),n=r(0),a=r(4),u=r(12),c=r(38),i=function(n){function i(t,e,r){void 0===t&&(t=0),n.call(this),this.period=-1,this.dueTime=0,o.isNumeric(e)?this.period=Number(e)<1?1:Number(e):u.isScheduler(e)&&(r=e),u.isScheduler(r)||(r=a.async),this.scheduler=r,this.dueTime=c.isDate(t)?+t-this.scheduler.now():t}return s(i,n),i.create=function(t,e,r){return void 0===t&&(t=0),new i(t,e,r)},i.dispatch=function(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}},i.prototype._subscribe=function(t){var e=this.period,r=this.dueTime;return this.scheduler.schedule(i.dispatch,r,{index:0,period:e,subscriber:t})},i}(n.Observable);e.TimerObservable=i},function(t,e,r){"use strict";var n=r(0),i=r(268);n.Observable.zip=i.zip},function(t,e,r){"use strict";var n=r(39);e.zip=n.zipStatic},function(t,e,r){"use strict";var n=r(0),i=r(270);n.Observable.ajax=i.ajax},function(t,e,r){"use strict";var n=r(82);e.ajax=n.AjaxObservable.create},function(t,e,r){"use strict";var n=r(0),i=r(272);n.Observable.webSocket=i.webSocket},function(t,e,r){"use strict";var n=r(273);e.webSocket=n.WebSocketSubject.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(7),a=r(1),u=r(0),c=r(6),o=r(11),h=r(40),l=r(9),f=r(8),p=r(276),n=function(r){function n(t,e){if(t instanceof u.Observable)r.call(this,e,t);else{if(r.call(this),this.WebSocketCtor=o.root.WebSocket,this._output=new s.Subject,"string"==typeof t?this.url=t:p.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new h.ReplaySubject}}return i(n,r),n.prototype.resultSelector=function(t){return JSON.parse(t.data)},n.create=function(t){return new n(t)},n.prototype.lift=function(t){var e=new n(this,this.destination);return e.operator=t,e},n.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new h.ReplaySubject),this._output=new s.Subject},n.prototype.multiplex=function(n,i,s){var o=this;return new u.Observable(function(r){var t=l.tryCatch(n)();t===f.errorObject?r.error(f.errorObject.e):o.next(t);var e=o.subscribe(function(t){var e=l.tryCatch(s)(t);e===f.errorObject?r.error(f.errorObject.e):e&&r.next(t)},function(t){return r.error(t)},function(){return r.complete()});return function(){var t=l.tryCatch(i)();t===f.errorObject?r.error(f.errorObject.e):o.next(t),e.unsubscribe()}})},n.prototype._connectSocket=function(){var n=this,t=this.WebSocketCtor,i=this._output,s=null;try{s=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=s,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(t){return void i.error(t)}var o=new c.Subscription(function(){n.socket=null,s&&1===s.readyState&&s.close()});s.onopen=function(t){var e=n.openObserver;e&&e.next(t);var r=n.destination;n.destination=a.Subscriber.create(function(t){return 1===s.readyState&&s.send(t)},function(t){var e=n.closingObserver;e&&e.next(void 0),t&&t.code?s.close(t.code,t.reason):i.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),n._resetState()},function(){var t=n.closingObserver;t&&t.next(void 0),s.close(),n._resetState()}),r&&r instanceof h.ReplaySubject&&o.add(r.subscribe(n.destination))},s.onerror=function(t){n._resetState(),i.error(t)},s.onclose=function(t){n._resetState();var e=n.closeObserver;e&&e.next(t),t.wasClean?i.complete():i.error(t)},s.onmessage=function(t){var e=l.tryCatch(n.resultSelector)(t);e===f.errorObject?i.error(f.errorObject.e):i.next(e)}},n.prototype._subscribe=function(t){var e=this,r=this.source;if(r)return r.subscribe(t);this.socket||this._connectSocket();var n=new c.Subscription;return n.add(this._output.subscribe(t)),n.add(function(){var t=e.socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())}),n},n.prototype.unsubscribe=function(){var t=this.source,e=this.socket;e&&1===e.readyState&&(e.close(),this._resetState()),r.prototype.unsubscribe.call(this),t||(this.destination=new h.ReplaySubject)},n}(s.AnonymousSubject);e.WebSocketSubject=n},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(n){function t(t,e){n.call(this,t,e),this.scheduler=t,this.work=e}return i(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),0<e?n.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return 0<e||this.closed?n.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?n.prototype.requestAsyncId.call(this,t,e,r):t.flush(this)},t}(r(23).AsyncAction);e.QueueAction=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(r(24).AsyncScheduler);e.QueueScheduler=i},function(t,e,r){"use strict";var n=r(11);function i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=e.length,i=0;i<n;i++){var s=e[i];for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])}return t}function s(t){return t.Object.assign||i}e.assignImpl=i,e.getAssign=s,e.assign=s(n.root)},function(t,e,r){"use strict";var n=r(0),i=r(278);n.Observable.prototype.buffer=i.buffer},function(t,e,r){"use strict";var n=r(84);e.buffer=function(t){return n.buffer(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(280);n.Observable.prototype.bufferCount=i.bufferCount},function(t,e,r){"use strict";var n=r(85);e.bufferCount=function(t,e){return void 0===e&&(e=null),n.bufferCount(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(282);n.Observable.prototype.bufferTime=i.bufferTime},function(t,e,r){"use strict";var s=r(4),o=r(12),a=r(86);e.bufferTime=function(t){var e=arguments.length,r=s.async;o.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;2<=e&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=e&&(i=arguments[2]),a.bufferTime(t,n,i,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(284);n.Observable.prototype.bufferToggle=i.bufferToggle},function(t,e,r){"use strict";var n=r(87);e.bufferToggle=function(t,e){return n.bufferToggle(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(286);n.Observable.prototype.bufferWhen=i.bufferWhen},function(t,e,r){"use strict";var n=r(88);e.bufferWhen=function(t){return n.bufferWhen(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(288);n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},function(t,e,r){"use strict";var n=r(89);e._catch=function(t){return n.catchError(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(290);n.Observable.prototype.combineAll=i.combineAll},function(t,e,r){"use strict";var n=r(90);e.combineAll=function(t){return n.combineAll(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(292);n.Observable.prototype.combineLatest=i.combineLatest},function(t,e,r){"use strict";var n=r(34);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.combineLatest.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(294);n.Observable.prototype.concat=i.concat},function(t,e,r){"use strict";var n=r(91),i=r(19);e.concatStatic=i.concat,e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.concat.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(296);n.Observable.prototype.concatAll=i.concatAll},function(t,e,r){"use strict";var n=r(50);e.concatAll=function(){return n.concatAll()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(298);n.Observable.prototype.concatMap=i.concatMap},function(t,e,r){"use strict";var n=r(53);e.concatMap=function(t,e){return n.concatMap(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(300);n.Observable.prototype.concatMapTo=i.concatMapTo},function(t,e,r){"use strict";var n=r(92);e.concatMapTo=function(t,e){return n.concatMapTo(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(302);n.Observable.prototype.count=i.count},function(t,e,r){"use strict";var n=r(93);e.count=function(t){return n.count(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(304);n.Observable.prototype.dematerialize=i.dematerialize},function(t,e,r){"use strict";var n=r(94);e.dematerialize=function(){return n.dematerialize()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(306);n.Observable.prototype.debounce=i.debounce},function(t,e,r){"use strict";var n=r(95);e.debounce=function(t){return n.debounce(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(308);n.Observable.prototype.debounceTime=i.debounceTime},function(t,e,r){"use strict";var n=r(4),i=r(96);e.debounceTime=function(t,e){return void 0===e&&(e=n.async),i.debounceTime(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(310);n.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},function(t,e,r){"use strict";var n=r(54);e.defaultIfEmpty=function(t){return void 0===t&&(t=null),n.defaultIfEmpty(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(312);n.Observable.prototype.delay=i.delay},function(t,e,r){"use strict";var n=r(4),i=r(97);e.delay=function(t,e){return void 0===e&&(e=n.async),i.delay(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(314);n.Observable.prototype.delayWhen=i.delayWhen},function(t,e,r){"use strict";var n=r(98);e.delayWhen=function(t,e){return n.delayWhen(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(316);n.Observable.prototype.distinct=i.distinct},function(t,e,r){"use strict";var n=r(99);e.distinct=function(t,e){return n.distinct(t,e)(this)}},function(t,e,r){"use strict";var n=r(11);function i(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}e.minimalSetImpl=i,e.Set=n.root.Set||i()},function(t,e,r){"use strict";var n=r(0),i=r(319);n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(t,e,r){"use strict";var n=r(55);e.distinctUntilChanged=function(t,e){return n.distinctUntilChanged(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(321);n.Observable.prototype.distinctUntilKeyChanged=i.distinctUntilKeyChanged},function(t,e,r){"use strict";var n=r(100);e.distinctUntilKeyChanged=function(t,e){return n.distinctUntilKeyChanged(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(323);n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},function(t,e,r){"use strict";var n=r(101);e._do=function(t,e,r){return n.tap(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(325);n.Observable.prototype.exhaust=i.exhaust},function(t,e,r){"use strict";var n=r(102);e.exhaust=function(){return n.exhaust()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(327);n.Observable.prototype.exhaustMap=i.exhaustMap},function(t,e,r){"use strict";var n=r(103);e.exhaustMap=function(t,e){return n.exhaustMap(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(329);n.Observable.prototype.expand=i.expand},function(t,e,r){"use strict";var n=r(104);e.expand=function(t,e,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,n.expand(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(331);n.Observable.prototype.elementAt=i.elementAt},function(t,e,r){"use strict";var n=r(105);e.elementAt=function(t,e){return n.elementAt(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(333);n.Observable.prototype.filter=i.filter},function(t,e,r){"use strict";var n=r(56);e.filter=function(t,e){return n.filter(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(335);n.Observable.prototype.finally=i._finally,n.Observable.prototype._finally=i._finally},function(t,e,r){"use strict";var n=r(106);e._finally=function(t){return n.finalize(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(337);n.Observable.prototype.find=i.find},function(t,e,r){"use strict";var n=r(57);e.find=function(t,e){return n.find(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(339);n.Observable.prototype.findIndex=i.findIndex},function(t,e,r){"use strict";var n=r(107);e.findIndex=function(t,e){return n.findIndex(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(341);n.Observable.prototype.first=i.first},function(t,e,r){"use strict";var n=r(108);e.first=function(t,e,r){return n.first(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(343);n.Observable.prototype.groupBy=i.groupBy},function(t,e,r){"use strict";var i=r(109);e.GroupedObservable=i.GroupedObservable,e.groupBy=function(t,e,r,n){return i.groupBy(t,e,r,n)(this)}},function(t,e,r){"use strict";var n=r(11),i=r(345);e.Map=n.root.Map||i.MapPolyfill},function(t,e,r){"use strict";var n=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?void 0:this._values[e]},t.prototype.set=function(t,e){var r=this._keys.indexOf(t);return-1===r?(this._keys.push(t),this._values.push(e),this.size++):this._values[r]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var r=0;r<this.size;r++)t.call(e,this._values[r],this._keys[r])},t}();e.MapPolyfill=n},function(t,e,r){"use strict";var n=function(){function t(){this.values={}}return t.prototype.delete=function(t){return!(this.values[t]=null)},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&t.call(e,r[n],n)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=n},function(t,e,r){"use strict";var n=r(0),i=r(348);n.Observable.prototype.ignoreElements=i.ignoreElements},function(t,e,r){"use strict";var n=r(110);e.ignoreElements=function(){return n.ignoreElements()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(350);n.Observable.prototype.isEmpty=i.isEmpty},function(t,e,r){"use strict";var n=r(111);e.isEmpty=function(){return n.isEmpty()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(352);n.Observable.prototype.audit=i.audit},function(t,e,r){"use strict";var n=r(58);e.audit=function(t){return n.audit(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(354);n.Observable.prototype.auditTime=i.auditTime},function(t,e,r){"use strict";var n=r(4),i=r(112);e.auditTime=function(t,e){return void 0===e&&(e=n.async),i.auditTime(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(356);n.Observable.prototype.last=i.last},function(t,e,r){"use strict";var n=r(113);e.last=function(t,e,r){return n.last(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(358);n.Observable.prototype.let=i.letProto,n.Observable.prototype.letBind=i.letProto},function(t,e,r){"use strict";e.letProto=function(t){return t(this)}},function(t,e,r){"use strict";var n=r(0),i=r(360);n.Observable.prototype.every=i.every},function(t,e,r){"use strict";var n=r(114);e.every=function(t,e){return n.every(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(362);n.Observable.prototype.map=i.map},function(t,e,r){"use strict";var n=r(25);e.map=function(t,e){return n.map(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(364);n.Observable.prototype.mapTo=i.mapTo},function(t,e,r){"use strict";var n=r(115);e.mapTo=function(t){return n.mapTo(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(366);n.Observable.prototype.materialize=i.materialize},function(t,e,r){"use strict";var n=r(116);e.materialize=function(){return n.materialize()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(368);n.Observable.prototype.max=i.max},function(t,e,r){"use strict";var n=r(117);e.max=function(t){return n.max(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(370);n.Observable.prototype.merge=i.merge},function(t,e,r){"use strict";var n=r(118),i=r(37);e.mergeStatic=i.merge,e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.merge.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(372);n.Observable.prototype.mergeAll=i.mergeAll},function(t,e,r){"use strict";var n=r(36);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),n.mergeAll(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(374);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},function(t,e,r){"use strict";var n=r(21);e.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(376);n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},function(t,e,r){"use strict";var n=r(119);e.mergeMapTo=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMapTo(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(378);n.Observable.prototype.mergeScan=i.mergeScan},function(t,e,r){"use strict";var n=r(120);e.mergeScan=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeScan(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(380);n.Observable.prototype.min=i.min},function(t,e,r){"use strict";var n=r(121);e.min=function(t){return n.min(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(382);n.Observable.prototype.multicast=i.multicast},function(t,e,r){"use strict";var n=r(17);e.multicast=function(t,e){return n.multicast(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(384);n.Observable.prototype.observeOn=i.observeOn},function(t,e,r){"use strict";var n=r(35);e.observeOn=function(t,e){return void 0===e&&(e=0),n.observeOn(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(386);n.Observable.prototype.onErrorResumeNext=i.onErrorResumeNext},function(t,e,r){"use strict";var n=r(52);e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.onErrorResumeNext.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(388);n.Observable.prototype.pairwise=i.pairwise},function(t,e,r){"use strict";var n=r(123);e.pairwise=function(){return n.pairwise()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(390);n.Observable.prototype.partition=i.partition},function(t,e,r){"use strict";var n=r(124);e.partition=function(t,e){return n.partition(t,e)(this)}},function(t,e,r){"use strict";e.not=function(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}},function(t,e,r){"use strict";var n=r(0),i=r(393);n.Observable.prototype.pluck=i.pluck},function(t,e,r){"use strict";var n=r(125);e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.pluck.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(395);n.Observable.prototype.publish=i.publish},function(t,e,r){"use strict";var n=r(126);e.publish=function(t){return n.publish(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(397);n.Observable.prototype.publishBehavior=i.publishBehavior},function(t,e,r){"use strict";var n=r(127);e.publishBehavior=function(t){return n.publishBehavior(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(399);n.Observable.prototype.publishReplay=i.publishReplay},function(t,e,r){"use strict";var i=r(129);e.publishReplay=function(t,e,r,n){return i.publishReplay(t,e,r,n)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(401);n.Observable.prototype.publishLast=i.publishLast},function(t,e,r){"use strict";var n=r(130);e.publishLast=function(){return n.publishLast()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(403);n.Observable.prototype.race=i.race},function(t,e,r){"use strict";var n=r(131),i=r(51);e.raceStatic=i.race,e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.race.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(405);n.Observable.prototype.reduce=i.reduce},function(t,e,r){"use strict";var n=r(27);e.reduce=function(t,e){return 2<=arguments.length?n.reduce(t,e)(this):n.reduce(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(407);n.Observable.prototype.repeat=i.repeat},function(t,e,r){"use strict";var n=r(132);e.repeat=function(t){return void 0===t&&(t=-1),n.repeat(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(409);n.Observable.prototype.repeatWhen=i.repeatWhen},function(t,e,r){"use strict";var n=r(133);e.repeatWhen=function(t){return n.repeatWhen(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(411);n.Observable.prototype.retry=i.retry},function(t,e,r){"use strict";var n=r(134);e.retry=function(t){return void 0===t&&(t=-1),n.retry(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(413);n.Observable.prototype.retryWhen=i.retryWhen},function(t,e,r){"use strict";var n=r(135);e.retryWhen=function(t){return n.retryWhen(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(415);n.Observable.prototype.sample=i.sample},function(t,e,r){"use strict";var n=r(136);e.sample=function(t){return n.sample(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(417);n.Observable.prototype.sampleTime=i.sampleTime},function(t,e,r){"use strict";var n=r(4),i=r(137);e.sampleTime=function(t,e){return void 0===e&&(e=n.async),i.sampleTime(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(419);n.Observable.prototype.scan=i.scan},function(t,e,r){"use strict";var n=r(59);e.scan=function(t,e){return 2<=arguments.length?n.scan(t,e)(this):n.scan(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(421);n.Observable.prototype.sequenceEqual=i.sequenceEqual},function(t,e,r){"use strict";var n=r(138);e.sequenceEqual=function(t,e){return n.sequenceEqual(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(423);n.Observable.prototype.share=i.share},function(t,e,r){"use strict";var n=r(139);e.share=function(){return n.share()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(425);n.Observable.prototype.shareReplay=i.shareReplay},function(t,e,r){"use strict";var n=r(140);e.shareReplay=function(t,e,r){return n.shareReplay(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(427);n.Observable.prototype.single=i.single},function(t,e,r){"use strict";var n=r(141);e.single=function(t){return n.single(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(429);n.Observable.prototype.skip=i.skip},function(t,e,r){"use strict";var n=r(142);e.skip=function(t){return n.skip(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(431);n.Observable.prototype.skipLast=i.skipLast},function(t,e,r){"use strict";var n=r(143);e.skipLast=function(t){return n.skipLast(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(433);n.Observable.prototype.skipUntil=i.skipUntil},function(t,e,r){"use strict";var n=r(144);e.skipUntil=function(t){return n.skipUntil(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(435);n.Observable.prototype.skipWhile=i.skipWhile},function(t,e,r){"use strict";var n=r(145);e.skipWhile=function(t){return n.skipWhile(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(437);n.Observable.prototype.startWith=i.startWith},function(t,e,r){"use strict";var n=r(146);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.startWith.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(439);n.Observable.prototype.subscribeOn=i.subscribeOn},function(t,e,r){"use strict";var n=r(440);e.subscribeOn=function(t,e){return void 0===e&&(e=0),n.subscribeOn(t,e)(this)}},function(t,e,r){"use strict";var n=r(441);e.subscribeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new i(e,r))}};var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new n.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,r){"use strict";var s=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(0),o=r(147),a=r(22),i=function(n){function i(t,e,r){void 0===e&&(e=0),void 0===r&&(r=o.asap),n.call(this),this.source=t,this.delayTime=e,this.scheduler=r,(!a.isNumeric(e)||e<0)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=o.asap)}return s(i,n),i.create=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=o.asap),new i(t,e,r)},i.dispatch=function(t){var e=t.source,r=t.subscriber;return this.add(e.subscribe(r))},i.prototype._subscribe=function(t){var e=this.delayTime,r=this.source;return this.scheduler.schedule(i.dispatch,e,{source:r,subscriber:t})},i}(n.Observable);e.SubscribeOnObservable=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(443),n=function(n){function t(t,e){n.call(this,t,e),this.scheduler=t,this.work=e}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=s.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(s.Immediate.clearImmediate(e),t.scheduled=void 0)},t}(r(23).AsyncAction);e.AsapAction=n},function(t,i,s){"use strict";(function(t,e){var r=s(11),n=function(){function t(t){if((this.root=t).setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function t(e){delete t.instance.tasksByHandle[e]};(e.instance=this).clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(!t.postMessage||t.importScripts)return!1;var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e},t.prototype.partiallyApplied=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=function t(){var e=t.handler,r=t.args;"function"==typeof e?e.apply(void 0,r):new Function(""+e)()};return n.handler=t,n.args=e,n},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function t(){var e=t.instance,r=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,r)),r};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var n=this.root,i="setImmediate$"+n.Math.random()+"$",t=function t(e){var r=t.instance;e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(i)&&r.runIfPresent(+e.data.slice(i.length))};t.instance=this,n.addEventListener("message",t,!1);var e=function t(){var e=t.messagePrefix,r=t.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(e+n,"*"),n};return e.instance=this,e.messagePrefix=i,e},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var r=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var e=t.data;r.runIfPresent(e)};var e=function t(){var e=t.channel,r=t.instance.addFromSetImmediateArguments(arguments);return e.port2.postMessage(r),r};return e.channel=t,e.instance=this,e},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function t(){var e=t.instance,r=e.root.document,n=r.documentElement,i=e.addFromSetImmediateArguments(arguments),s=r.createElement("script");return s.onreadystatechange=function(){e.runIfPresent(i),s.onreadystatechange=null,n.removeChild(s),s=null},n.appendChild(s),i};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function t(){var e=t.instance,r=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,r),0),r};return t.instance=this,t},t}();i.ImmediateDefinition=n,i.Immediate=new n(r.root)}).call(this,s(148).clearImmediate,s(148).setImmediate)},function(t,e,r){(function(t,d){!function(r,n){"use strict";if(!r.setImmediate){var i,s,e,o,t,a=1,u={},c=!1,h=r.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(r);l=l&&l.setTimeout?l:r,i="[object process]"==={}.toString.call(r.process)?function(t){d.nextTick(function(){p(t)})}:function(){if(r.postMessage&&!r.importScripts){var t=!0,e=r.onmessage;return r.onmessage=function(){t=!1},r.postMessage("","*"),r.onmessage=e,t}}()?(o="setImmediate$"+Math.random()+"$",t=function(t){t.source===r&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},r.addEventListener?r.addEventListener("message",t,!1):r.attachEvent("onmessage",t),function(t){r.postMessage(o+t,"*")}):r.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){e.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(s=h.documentElement,function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):function(t){setTimeout(p,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return u[a]=n,i(a),a++},l.clearImmediate=f}function f(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(28),r(445))},function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(r(24).AsyncScheduler);e.AsapScheduler=i},function(t,e,r){"use strict";var n=r(0),i=r(448);n.Observable.prototype.switch=i._switch,n.Observable.prototype._switch=i._switch},function(t,e,r){"use strict";var n=r(149);e._switch=function(){return n.switchAll()(this)}},function(t,e,r){"use strict";var n=r(0),i=r(450);n.Observable.prototype.switchMap=i.switchMap},function(t,e,r){"use strict";var n=r(62);e.switchMap=function(t,e){return n.switchMap(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(452);n.Observable.prototype.switchMapTo=i.switchMapTo},function(t,e,r){"use strict";var n=r(150);e.switchMapTo=function(t,e){return n.switchMapTo(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(454);n.Observable.prototype.take=i.take},function(t,e,r){"use strict";var n=r(151);e.take=function(t){return n.take(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(456);n.Observable.prototype.takeLast=i.takeLast},function(t,e,r){"use strict";var n=r(60);e.takeLast=function(t){return n.takeLast(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(458);n.Observable.prototype.takeUntil=i.takeUntil},function(t,e,r){"use strict";var n=r(152);e.takeUntil=function(t){return n.takeUntil(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(460);n.Observable.prototype.takeWhile=i.takeWhile},function(t,e,r){"use strict";var n=r(153);e.takeWhile=function(t){return n.takeWhile(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(462);n.Observable.prototype.throttle=i.throttle},function(t,e,r){"use strict";var n=r(42);e.throttle=function(t,e){return void 0===e&&(e=n.defaultThrottleConfig),n.throttle(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(464);n.Observable.prototype.throttleTime=i.throttleTime},function(t,e,r){"use strict";var n=r(4),i=r(42),s=r(154);e.throttleTime=function(t,e,r){return void 0===e&&(e=n.async),void 0===r&&(r=i.defaultThrottleConfig),s.throttleTime(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(155);n.Observable.prototype.timeInterval=i.timeInterval},function(t,e,r){"use strict";var n=r(0),i=r(467);n.Observable.prototype.timeout=i.timeout},function(t,e,r){"use strict";var n=r(4),i=r(157);e.timeout=function(t,e){return void 0===e&&(e=n.async),i.timeout(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(469);n.Observable.prototype.timeoutWith=i.timeoutWith},function(t,e,r){"use strict";var n=r(4),i=r(159);e.timeoutWith=function(t,e,r){return void 0===r&&(r=n.async),i.timeoutWith(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(471);n.Observable.prototype.timestamp=i.timestamp},function(t,e,r){"use strict";var n=r(4),i=r(63);e.timestamp=function(t){return void 0===t&&(t=n.async),i.timestamp(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(473);n.Observable.prototype.toArray=i.toArray},function(t,e,r){"use strict";var n=r(160);e.toArray=function(){return n.toArray()(this)}},function(t,e){},function(t,e,r){"use strict";var n=r(0),i=r(476);n.Observable.prototype.window=i.window},function(t,e,r){"use strict";var n=r(161);e.window=function(t){return n.window(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(478);n.Observable.prototype.windowCount=i.windowCount},function(t,e,r){"use strict";var n=r(162);e.windowCount=function(t,e){return void 0===e&&(e=0),n.windowCount(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(480);n.Observable.prototype.windowTime=i.windowTime},function(t,e,r){"use strict";var i=r(4),s=r(22),o=r(12),a=r(163);e.windowTime=function(t){var e=i.async,r=null,n=Number.POSITIVE_INFINITY;return o.isScheduler(arguments[3])&&(e=arguments[3]),o.isScheduler(arguments[2])?e=arguments[2]:s.isNumeric(arguments[2])&&(n=arguments[2]),o.isScheduler(arguments[1])?e=arguments[1]:s.isNumeric(arguments[1])&&(r=arguments[1]),a.windowTime(t,r,n,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(482);n.Observable.prototype.windowToggle=i.windowToggle},function(t,e,r){"use strict";var n=r(164);e.windowToggle=function(t,e){return n.windowToggle(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(484);n.Observable.prototype.windowWhen=i.windowWhen},function(t,e,r){"use strict";var n=r(165);e.windowWhen=function(t){return n.windowWhen(t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(486);n.Observable.prototype.withLatestFrom=i.withLatestFrom},function(t,e,r){"use strict";var n=r(166);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.withLatestFrom.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(488);n.Observable.prototype.zip=i.zipProto},function(t,e,r){"use strict";var n=r(39);e.zipProto=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.zip.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(490);n.Observable.prototype.zipAll=i.zipAll},function(t,e,r){"use strict";var n=r(167);e.zipAll=function(t){return n.zipAll(t)(this)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=r(0),d=r(20),y=r(492),s=r(493),c=r(169),o=r(171),n=function(n){function a(t){n.call(this,o.VirtualAction,750),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return i(a,n),a.prototype.createTime=function(t){var e=t.indexOf("|");if(-1===e)throw new Error('marble diagram for time should have a completion marker "|"');return e*a.frameTimeFactor},a.prototype.createColdObservable=function(t,e,r){if(-1!==t.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==t.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var n=a.parseMarbles(t,e,r),i=new y.ColdObservable(n,this);return this.coldObservables.push(i),i},a.prototype.createHotObservable=function(t,e,r){if(-1!==t.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var n=a.parseMarbles(t,e,r),i=new s.HotObservable(n,this);return this.hotObservables.push(i),i},a.prototype.materializeInnerObservable=function(t,e){var r=this,n=[];return t.subscribe(function(t){n.push({frame:r.frame-e,notification:d.Notification.createNext(t)})},function(t){n.push({frame:r.frame-e,notification:d.Notification.createError(t)})},function(){n.push({frame:r.frame-e,notification:d.Notification.createComplete()})}),n},a.prototype.expectObservable=function(t,e){var r=this;void 0===e&&(e=null);var n,i=[],s={actual:i,ready:!1},o=a.parseMarblesAsSubscriptions(e).unsubscribedFrame;return this.schedule(function(){n=t.subscribe(function(t){var e=t;t instanceof u.Observable&&(e=r.materializeInnerObservable(e,r.frame)),i.push({frame:r.frame,notification:d.Notification.createNext(e)})},function(t){i.push({frame:r.frame,notification:d.Notification.createError(t)})},function(){i.push({frame:r.frame,notification:d.Notification.createComplete()})})},0),o!==Number.POSITIVE_INFINITY&&this.schedule(function(){return n.unsubscribe()},o),this.flushTests.push(s),{toBe:function(t,e,r){s.ready=!0,s.expected=a.parseMarbles(t,e,r,!0)}}},a.prototype.expectSubscriptions=function(t){var r={actual:t,ready:!1};return this.flushTests.push(r),{toBe:function(t){var e="string"==typeof t?[t]:t;r.ready=!0,r.expected=e.map(function(t){return a.parseMarblesAsSubscriptions(t)})}}},a.prototype.flush=function(){for(var t=this.hotObservables;0<t.length;)t.shift().setup();n.prototype.flush.call(this);for(var e=this.flushTests.filter(function(t){return t.ready});0<e.length;){var r=e.shift();this.assertDeepEqual(r.actual,r.expected)}},a.parseMarblesAsSubscriptions=function(t){if("string"!=typeof t)return new c.SubscriptionLog(Number.POSITIVE_INFINITY);for(var e=t.length,r=-1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=0;s<e;s++){var o=s*this.frameTimeFactor,a=t[s];switch(a){case"-":case" ":break;case"(":r=o;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=-1<r?r:o;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=-1<r?r:o;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return i<0?new c.SubscriptionLog(n):new c.SubscriptionLog(n,i)},a.parseMarbles=function(t,e,r,n){if(void 0===n&&(n=!1),-1!==t.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=t.length,s=[],o=t.indexOf("^"),a=-1===o?0:o*-this.frameTimeFactor,u="object"!=typeof e?function(t){return t}:function(t){return n&&e[t]instanceof y.ColdObservable?e[t].messages:e[t]},c=-1,h=0;h<i;h++){var l=h*this.frameTimeFactor+a,f=void 0,p=t[h];switch(p){case"-":case" ":break;case"(":c=l;break;case")":c=-1;break;case"|":f=d.Notification.createComplete();break;case"^":break;case"#":f=d.Notification.createError(r||"error");break;default:f=d.Notification.createNext(u(p))}f&&s.push({frame:-1<c?c:l,notification:f})}return s},a}(o.VirtualTimeScheduler);e.TestScheduler=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(6),o=r(168),a=r(170),u=function(r){function t(t,e){r.call(this,function(t){var e=this,r=e.logSubscribedFrame();return t.add(new s.Subscription(function(){e.logUnsubscribedFrame(r)})),e.scheduleMessages(t),t}),this.messages=t,this.subscriptions=[],this.scheduler=e}return n(t,r),t.prototype.scheduleMessages=function(t){for(var e=this.messages.length,r=0;r<e;r++){var n=this.messages[r];t.add(this.scheduler.schedule(function(t){var e=t.message,r=t.subscriber;e.notification.observe(r)},n.frame,{message:n,subscriber:t}))}},t}(i.Observable);e.ColdObservable=u,a.applyMixins(u,[o.SubscriptionLoggable])},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(7),s=r(6),o=r(168),a=r(170),u=function(n){function t(t,e){n.call(this),this.messages=t,this.subscriptions=[],this.scheduler=e}return i(t,n),t.prototype._subscribe=function(t){var e=this,r=e.logSubscribedFrame();return t.add(new s.Subscription(function(){e.logUnsubscribedFrame(r)})),n.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;r<t;r++)!function(){var t=e.messages[r];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(n.Subject);e.HotObservable=u,a.applyMixins(u,[o.SubscriptionLoggable])},function(t,e,r){"use strict";var n=r(495),i=r(497);e.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(23),s=r(496),o=function(n){function t(t,e){n.call(this,t,e),this.scheduler=t,this.work=e}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=s.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(s.AnimationFrame.cancelAnimationFrame(e),t.scheduled=void 0)},t}(n.AsyncAction);e.AnimationFrameAction=o},function(t,e,r){"use strict";var n=r(11),i=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})};e.RequestAnimationFrameDefinition=i,e.AnimationFrame=new i(n.root)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(r(24).AsyncScheduler);e.AnimationFrameScheduler=i},function(t,e,r){"use strict";var n=r(58);e.audit=n.audit;var i=r(112);e.auditTime=i.auditTime;var s=r(84);e.buffer=s.buffer;var o=r(85);e.bufferCount=o.bufferCount;var a=r(86);e.bufferTime=a.bufferTime;var u=r(87);e.bufferToggle=u.bufferToggle;var c=r(88);e.bufferWhen=c.bufferWhen;var h=r(89);e.catchError=h.catchError;var l=r(90);e.combineAll=l.combineAll;var f=r(34);e.combineLatest=f.combineLatest;var p=r(91);e.concat=p.concat;var d=r(50);e.concatAll=d.concatAll;var y=r(53);e.concatMap=y.concatMap;var v=r(92);e.concatMapTo=v.concatMapTo;var b=r(93);e.count=b.count;var g=r(95);e.debounce=g.debounce;var m=r(96);e.debounceTime=m.debounceTime;var S=r(54);e.defaultIfEmpty=S.defaultIfEmpty;var E=r(97);e.delay=E.delay;var w=r(98);e.delayWhen=w.delayWhen;var _=r(94);e.dematerialize=_.dematerialize;var A=r(99);e.distinct=A.distinct;var T=r(55);e.distinctUntilChanged=T.distinctUntilChanged;var x=r(100);e.distinctUntilKeyChanged=x.distinctUntilKeyChanged;var O=r(105);e.elementAt=O.elementAt;var C=r(114);e.every=C.every;var F=r(102);e.exhaust=F.exhaust;var I=r(103);e.exhaustMap=I.exhaustMap;var P=r(104);e.expand=P.expand;var N=r(56);e.filter=N.filter;var D=r(106);e.finalize=D.finalize;var R=r(57);e.find=R.find;var L=r(107);e.findIndex=L.findIndex;var j=r(108);e.first=j.first;var B=r(109);e.groupBy=B.groupBy;var M=r(110);e.ignoreElements=M.ignoreElements;var H=r(111);e.isEmpty=H.isEmpty;var k=r(113);e.last=k.last;var U=r(25);e.map=U.map;var V=r(115);e.mapTo=V.mapTo;var K=r(116);e.materialize=K.materialize;var q=r(117);e.max=q.max;var G=r(118);e.merge=G.merge;var Y=r(36);e.mergeAll=Y.mergeAll;var W=r(21);e.mergeMap=W.mergeMap;var z=r(21);e.flatMap=z.mergeMap;var X=r(119);e.mergeMapTo=X.mergeMapTo;var J=r(120);e.mergeScan=J.mergeScan;var $=r(121);e.min=$.min;var Z=r(17);e.multicast=Z.multicast;var Q=r(35);e.observeOn=Q.observeOn;var tt=r(52);e.onErrorResumeNext=tt.onErrorResumeNext;var et=r(123);e.pairwise=et.pairwise;var rt=r(124);e.partition=rt.partition;var nt=r(125);e.pluck=nt.pluck;var it=r(126);e.publish=it.publish;var st=r(127);e.publishBehavior=st.publishBehavior;var ot=r(130);e.publishLast=ot.publishLast;var at=r(129);e.publishReplay=at.publishReplay;var ut=r(131);e.race=ut.race;var ct=r(27);e.reduce=ct.reduce;var ht=r(132);e.repeat=ht.repeat;var lt=r(133);e.repeatWhen=lt.repeatWhen;var ft=r(134);e.retry=ft.retry;var pt=r(135);e.retryWhen=pt.retryWhen;var dt=r(61);e.refCount=dt.refCount;var yt=r(136);e.sample=yt.sample;var vt=r(137);e.sampleTime=vt.sampleTime;var bt=r(59);e.scan=bt.scan;var gt=r(138);e.sequenceEqual=gt.sequenceEqual;var mt=r(139);e.share=mt.share;var St=r(140);e.shareReplay=St.shareReplay;var Et=r(141);e.single=Et.single;var wt=r(142);e.skip=wt.skip;var _t=r(143);e.skipLast=_t.skipLast;var At=r(144);e.skipUntil=At.skipUntil;var Tt=r(145);e.skipWhile=Tt.skipWhile;var xt=r(146);e.startWith=xt.startWith;var Ot=r(149);e.switchAll=Ot.switchAll;var Ct=r(62);e.switchMap=Ct.switchMap;var Ft=r(150);e.switchMapTo=Ft.switchMapTo;var It=r(151);e.take=It.take;var Pt=r(60);e.takeLast=Pt.takeLast;var Nt=r(152);e.takeUntil=Nt.takeUntil;var Dt=r(153);e.takeWhile=Dt.takeWhile;var Rt=r(101);e.tap=Rt.tap;var Lt=r(42);e.throttle=Lt.throttle;var jt=r(154);e.throttleTime=jt.throttleTime;var Bt=r(156);e.timeInterval=Bt.timeInterval;var Mt=r(157);e.timeout=Mt.timeout;var Ht=r(159);e.timeoutWith=Ht.timeoutWith;var kt=r(63);e.timestamp=kt.timestamp;var Ut=r(160);e.toArray=Ut.toArray;var Vt=r(161);e.window=Vt.window;var Kt=r(162);e.windowCount=Kt.windowCount;var qt=r(163);e.windowTime=qt.windowTime;var Gt=r(164);e.windowToggle=Gt.windowToggle;var Yt=r(165);e.windowWhen=Yt.windowWhen;var Wt=r(166);e.withLatestFrom=Wt.withLatestFrom;var zt=r(39);e.zip=zt.zip;var Xt=r(167);e.zipAll=Xt.zipAll},function(t,e,r){"use strict";var i=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},c=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(5),o=r(10),a=r(500),n=function(){function n(t,e){this.http=t,this.apiConfig=e,this.addGlobalHeader()}return n.interceptRequest=function(t){for(var e=0,r=t.authenticators;e<r.length;e++){t=r[e].interceptRequest(t)}return t},n.prototype.addGlobalHeader=function(){var t={"X-Channel-Id":this.apiConfig.api_authentication.channelId,"X-App-Id":this.apiConfig.api_authentication.producerId,"X-Device-Id":a(this.apiConfig.api_authentication.deviceId)};this.http.addHeaders(t)},n.prototype.invoke=function(e){var r=i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:switch((e=n.interceptRequest(e)).type){case s.HttpRequestType.GET:return[3,1];case s.HttpRequestType.PATCH:return[3,4];case s.HttpRequestType.POST:return[3,7]}return[3,10];case 1:return[4,this.http.get(this.apiConfig.baseUrl,e.path,e.headers,e.parameters)];case 2:return r=t.sent(),[4,this.interceptResponse(e,r)];case 3:return[2,r=t.sent()];case 4:return[4,this.http.patch(this.apiConfig.baseUrl,e.path,e.headers,e.parameters)];case 5:return r=t.sent(),[4,this.interceptResponse(e,r)];case 6:return[2,r=t.sent()];case 7:return[4,this.http.post(this.apiConfig.baseUrl,e.path,e.headers,e.parameters)];case 8:return r=t.sent(),[4,this.interceptResponse(e,r)];case 9:return[2,r=t.sent()];case 10:return[2]}})});return o.Observable.fromPromise(r)},n.prototype.interceptResponse=function(a,u){return i(this,void 0,void 0,function(){var e,r,n,i,s,o;return c(this,function(t){switch(t.label){case 0:e=a.authenticators,r=0,n=e,t.label=1;case 1:return r<n.length?[4,n[r].onResponse(a,u,this).toPromise()]:[3,4];case 2:u=t.sent(),t.label=3;case 3:return r++,[3,1];case 4:i=a.responseInterceptors,s=0,o=i,t.label=5;case 5:return s<o.length?[4,o[s].onResponse(a,u,this).toPromise()]:[3,8];case 6:u=t.sent(),t.label=7;case 7:return s++,[3,5];case 8:return[2,u]}})})},n}();e.BaseConnection=n},function(t,e,r){var n,i,s,o,a,u,l,c;t.exports=(n=r(501),s=(i=n).lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=u.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=0;u<80;u++){if(u<16)l[u]=0|t[e+u];else{var c=l[u-3]^l[u-8]^l[u-14]^l[u-16];l[u]=c<<1|c>>>31}var h=(n<<5|n>>>27)+a+l[u];h+=u<20?1518500249+(i&s|~i&o):u<40?1859775393+(i^s^o):u<60?(i&s|i&o|s&o)-1894007588:(i^s^o)-899497514,a=o,o=s,s=i<<30|i>>>2,i=n,n=h}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),i.SHA1=a._createHelper(c),i.HmacSHA1=a._createHmacHelper(c),n.SHA1)},function(t,e,r){var n,l,i,s,o,a,f,u,c,h,p,d,y;t.exports=(n=n||(l=Math,i=Object.create||function(){function r(){}return function(t){var e;return r.prototype=t,e=new r,r.prototype=null,e}}(),o=(s={}).lib={},a=o.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=o.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var s=0;s<i;s+=4)e[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=l.ceil(e/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e,r=[],n=function(e){var e=e,r=987654321,n=4294967295;return function(){var t=((r=36969*(65535&r)+(r>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return t/=4294967296,(t+=.5)*(.5<l.random()?1:-1)}},i=0;i<t;i+=4){var s=n(4294967296*(e||l.random()));e=987654071*s(),r.push(4294967296*s()|0)}return new f.init(r,t)}}),u=s.enc={},c=u.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new f.init(r,e/2)}},h=u.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new f.init(r,e)}},p=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},d=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,s=4*i,o=n/s,a=(o=t?l.ceil(o):l.max((0|o)-this._minBufferSize,0))*i,u=l.min(4*a,n);if(a){for(var c=0;c<a;c+=i)this._doProcessBlock(r,c);var h=r.splice(0,a);e.sigBytes-=u}return new f.init(h,u)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),o.Hasher=d.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new y.HMAC.init(r,e).finalize(t)}}}),y=s.algo={},s),n)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(503),i=r(5),s=r(10),o=function(){function t(t){this.apiConfig=t,this.apiTokenHandler=new n.ApiTokenHandler(this.apiConfig)}return t.prototype.interceptRequest=function(t){var e=localStorage.getItem(i.KEY_API_TOKEN);if(e){var r=t.headers;r.Authorization="Bearer "+e,t.headers=r}return t},t.prototype.onResponse=function(e,t,r){var n=new s.Subject;return t.responseCode!==i.ResponseCode.HTTP_UNAUTHORISED?(n.next(t),n.complete()):this.apiTokenHandler.refreshAuthToken(r).subscribe(function(t){localStorage.setItem(i.KEY_API_TOKEN,t),r.invoke(e).subscribe(function(t){n.next(t),n.complete()})}),n},t}();e.ApiAuthenticator=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(69),s=r(10),o=function(){function t(t){this.config=t}return t.prototype.refreshAuthToken=function(t){var r=new s.Subject;return t.invoke(this.buildResetTokenAPIRequest(this.config)).subscribe(function(t){try{var e=t.body.result.secret;r.next(e),r.complete()}catch(t){r.error(t)}}),r},t.prototype.buildResetTokenAPIRequest=function(t){return(new n.Request.Builder).withPath("/consumer/"+t.api_authentication.mobileAppConsumer+"/credential/register").withType(n.HttpRequestType.POST).withHeaders({"Content-Encoding":"gzip",Authorization:"Bearer "+this.generateMobileDeviceConsumerBearerToken()}).build()},t.prototype.generateMobileDeviceConsumerBearerToken=function(){var t=this.config.api_authentication.mobileAppKey,e=this.config.api_authentication.mobileAppSecret,r=this.config.api_authentication.producerId+"-"+this.config.api_authentication.deviceId,n=i.JWTUtil.createJWToken(t,e,i.JWTokenType.HS256);return i.JWTUtil.createJWToken(r,n,i.JWTokenType.HS256)},t}();e.ApiTokenHandler=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.TelemetryDecorator=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.TelemetryService=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.TelemetryStat=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.TelemetrySyncStat=n},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var s=r(16),o=r(174),a=function(t){function e(){return t.call(this,1)||this}return i(e,t),e.prototype.queries=function(){return[o.TelemetryEntry.getCreateEntry(),o.TelemetryProcessedEntry.getCreateEntry()]},e}(s.Migration);e.TelemetryMigration=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.APP="app",t.SESSION="session",t.QR="qr",t}();e.Workflows=n;var i=function(){function t(){}return t.HOME="home",t.COURSE="course",t.LIBRARY="library",t.USER="user",t.SETTINGS="settings",t.ONBOARDING="onboarding",t}();e.Environment=i;var s=function(){function t(){}return t.NOTIFICATION="notification",t.USER="User",t.GROUP="Group",t.CONTENT="Content",t.QUESTION="Question",t}();e.ObjectType=s;var o=function(){function t(){}return t.PLAY="play",t}();e.Mode=o;var a=function(){function t(){}return t.SPLASH_SCREEN="splash",t.LOGIN="login",t.LOGOUT="logout",t.SIGNUP="signup",t.ONBOARDING="onboarding",t.USER_TYPE_SELECTION="user-type-selection",t.HOME="home",t.COURSES="courses",t.LIBRARY="library",t.GROUPS="groups",t.PROFILE="profile",t.COURSE_PAGE_FILTER="course-page-filter",t.LIBRARY_PAGE_FILTER="library-page-filter",t.COURSE_DETAIL="course-detail",t.COLLECTION_DETAIL="collection-detail",t.CONTENT_DETAIL="content-detail",t.SHARE_CONTENT="share-content",t.FLAG_CONTENT="flag-content",t.CONTENT_RATING="content-rating",t.ANNOUNCEMENT_LIST="announcement-list",t.ANNOUNCEMENT_DETAIL="announcement-detail",t.SHARE_ANNOUCEMENT="share-announcement",t.QRCodeScanner="qr-code-scanner",t.SERVER_NOTIFICATION="server-notifiaction",t.LOCAL_NOTIFICATION="local-notifiaction",t.NOTIFICATION_LIST="notifiaction-list",t.SIGNIN_OVERLAY="signin-overlay",t.SETTINGS="settings",t.SETTINGS_LANGUAGE="settings-language",t.SETTINGS_DATASYNC="settings-datasync",t.SETTINGS_DEVICE_TAGS="settings-device-tags",t.SETTINGS_SUPPORTS="settings-supports",t.SETTINGS_ABOUT_US="settings-about-us",t.ABOUT_APP="about-app",t.USERS_GROUPS="users-groups",t.CREATE_USER="create-profile",t.CREATE_GROUP="create-group",t.CREATE_GROUP_SYLLABUS_CLASS="create-group-syllabusclass",t.CREATE_GROUP_USER_SELECTION="create-group-userselection",t.GROUP_DETAIL="group-detail",t.GUEST_PROFILE="guest-profile",t.EDIT_USER="edit-user",t.EDIT_GROUP="edit-group",t.ADD_GROUP_SYLLABUS_CLASS="add-group-syllabusclass",t.ADD_GROUP_USER_SELECTION="add-group-userselection",t.REMOVE_USERS_FROM_GROUP="remove-users-from-group",t.SHARE_USER_GROUP="share-user-group",t.REPORTS_USER_GROUP="reports-users-group",t.REPORTS_ASSESMENT_CONTENT_LIST="assesment-content-list",t.REPORTS_USER_ASSESMENT_DETAILS="user-assesment-details",t.REPORTS_GROUP_ASSESMENT_DETAILS="group-assesment-details",t.ONBOARDING_LANGUAGE_SETTING="onboarding-language-setting",t.VIEW_MORE="view-more",t.DIAL_CODE_SCAN_RESULT="dial-code-scan-result",t.ONBOARDING_PROFILE_PREFERENCES="profile-settings",t.ONBOARDING_QR_SHOWCASE="onboarding-qr-showcase",t.SEARCH="search",t.DOWNLOAD_SPINE="download-spine",t.DIAL_NOT_LINKED="dial-not-linked",t.DIAL_LINKED_NO_CONTENT="dial-linked-but-no-content",t.TERMS_N_CONDITIONS="terms-n-conditions",t.TERMS_N_CONDITIONS_STATIC_PAGE="terms-n-conditions-static-page",t}();e.PageId=a;var u=function(){function t(){}return t.NOTIFICATION="notification",t}();e.LogType=u;var c=function(){function t(){}return t.TRACE="TRACE",t.DEBUG="DEBUG",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",t.FATAL="FATAL",t}();e.LogLevel=c;var h=function(){function t(){}return t.RECEIVED="Received",t.DISPLAYED="Displayed",t}();e.LogMessage=h;var l=function(){function t(){}return t.SEARCH="search",t.LIST="list",t.DETAIL="detail",t.VIEW="view",t.EDIT="edit",t.WORKFLOW="workflow",t}();e.ImpressionType=l;var f=function(){function t(){}return t.QRCodeScanInitiate="qr-code-scan-initiate",t.RATING_POPUP="rating-popup",t}();e.ImpressionSubtype=f;var p=function(){function t(){}return t.TOUCH="TOUCH",t.OTHER="OTHER",t}();e.InteractType=p;var d=function(){function t(){}return t.LOGIN_INITIATE="login-initiate",t.LOGIN_SUCCESS="login-success",t.SIGNUP_INITIATE="signup-initiate",t.LOGOUT_INITIATE="logout-initiate",t.LOGOUT_SUCCESS="logout-success",t.BROWSE_AS_GUEST_CLICKED="browse-as-guest-clicked",t.CONTINUE_CLICKED="continue-clicked",t.TAB_CLICKED="tab-clicked",t.SECTION_VIEWED="section-viewed",t.CONTENT_CLICKED="content-clicked",t.CANCEL="cancel",t.SEARCH_BUTTON_CLICKED="search-button-clicked",t.FILTER_BUTTON_CLICKED="filter-button-clicked",t.VIEWALL_CLICKED="view-all-clicked",t.SHARE_COURSE_INITIATED="share-course-initiated",t.SHARE_LIBRARY_INITIATED="share-library-initiated",t.SHARE_COURSE_SUCCESS="share-course-success",t.SHARE_LIBRARY_SUCCESS="share-library-success",t.FLAG_INITIATE="flag-initiated",t.FLAG_SUCCESS="flag-success",t.FLAG_FAILED="flag-failed",t.CONTENT_PLAY="content-play",t.QRCodeScanClicked="qr-code-scanner-clicked",t.QRCodeScanSuccess="qr-code-scan-success",t.QRCodeScanCancelled="qr-code-scan-cancelled",t.NOTIFICATION_CLICKED="notification-clicked",t.ANNOUNCEMENT_CLICKED="announcement-clicked",t.SIGNIN_OVERLAY_CLICKED="signin-overlay-clicked",t.SETTINGS_CLICKED="settings-clicked",t.LANGUAGE_CLICKED="language-clicked",t.DATA_SYNC_CLICKED="data-sync-clicked",t.DEVICE_TAGS_CLICKED="device-tags-clicked",t.SUPPORT_CLICKED="support-clicked",t.ABOUT_APP_CLICKED="about-app-clicked",t.SHARE_APP_CLICKED="share-app-clicked",t.SHARE_APP_INITIATED="share-app-initiated",t.SHARE_APP_SUCCESS="share-app-success",t.LANGUAGE_SETTINGS_SUCCESS="language-settings-success",t.MANUALSYNC_INITIATED="manualsync-initiated",t.MANUALSYNC_SUCCESS="manualsync-success",t.RATING_CLICKED="rating-clicked",t.RATING_SUBMITTED="rating-submitted",t.CREATE_USER_CLICKED="create-user-clicked",t.CREATE_USER_INITIATED="create-user-initated",t.EDIT_USER_INITIATED="edit-user-initated",t.CREATE_USER_SUCCESS="create-user-success",t.EDIT_USER_SUCCESS="edit-user-success",t.CREATE_GROUP_CLICKED="create-group-clicked",t.CREATE_GROUP_INITIATED="create-group-initated",t.CREATE_GROUP_SUCCESS="create-group-success",t.EDIT_GROUP_INITIATED="edit-group-initated",t.EDIT_GROUP_SUCCESS="edit-group-success",t.SWITCH_USER_CLICKED="switch-user-clicked",t.SWITCH_USER_INITIATE="switch-user-initiate",t.SWITCH_USER_SUCCESS="switch-user-success",t.DELETE_USER_INITIATE="delete-user-initiate",t.DELETE_GROUP_INITIATE="delete-group-initiate",t.SHARE_USER_GROUP_INITIATE="share-usergroup-initiate",t.SHARE_USER_GROUP_SUCCESS="share-usergroup-success",t.USER_GROUP_CLICKED="users-groups-clicked",t.REPORTS_CLICKED="reports-clicked",t.USERS_TAB_CLICKED="users-tab-clicked",t.GROUPS_TAB_CLICKED="groups-tab-clicked",t.USER_CLICKED="user-clicked",t.GROUP_CLICKED="group-clicked",t.REPORTS_BY_USER_CLICKED="byuser-tab-clicked",t.REPORTS_BY_QUESTION_CLICKED="byquestion-tab-clicked",t.REPORTS_SORTBY_QUESTION_CLICKED="sortby-question-clicked",t.REPORTS_SORTBY_TIME_CLICKED="sortby-time-clicked",t.REPORTS_SORTBY_RESULT_CLICKED="sortby-result-clicked",t.REPORTS_SORTBY_USER_CLICKED="sortby-users-clicked",t.REPORTS_SORTBY_SCORE_CLICKED="sortby-score-clicked",t.REPORTS_SORTBY_MARKS_CLICKED="sortby-marks-clicked",t.REPORTS_SORTBY_ACCURACY_CLICKED="sortby-accuracy-clicked",t.QUESTION_CLICKED="question-clicked",t.INITIAL_CONFIG="initial-config",t.FILTER_CONFIG="filter-config",t.APPLY_FILTER_CLICKED="apply-filter-clicked",t.PROFILE_ATTRIBUTE_CHANGED="profile_attribute_changed",t.SAVE_CLICKED="save-clicked",t.FINISH_CLICKED="finish-clicked",t.DEVICE_BACK_CLICKED="device-back-clicked",t.NAV_BACK_CLICKED="nav-back-clicked",t.SKIP_CLICKED="skip-clicked",t.LANGUAGE_SELECTED="language-selected",t.KEBAB_MENU_CLICKED="kebab-menu-clicked",t.DELETE_CLICKED="delete-clicked",t.DIAL_SEARCH_RESULT_FOUND="dial-code-search-result-found",t.LOADING_SPINE="loading-spine",t.DOWNLOAD_ALL_CLICKED="download-all-clicked",t.CANCEL_CLICKED="cancel-clicked",t.PULL_TO_REFRESH="pull-to-refresh",t.EDIT_CLICKED="edit-clicked",t.VIEW_MORE_CLICKED="view-more-clicked",t.READ_MORE_CLICKED="read-more-clicked",t.READ_LESS_CLICKED="read-less-clicked",t.DOWNLOAD_PLAY_CLICKED="download-play-clicked",t.PLAY_CLICKED="play-clicked",t.EXTRA_INFO="extra-info",t.PROFILE_ATTRIBUTE_POPULATION="profile-attribute-population",t.ACCEPTANCE_CHECKBOX_CLICKED="acceptance_checkbox_clicked",t}();e.InteractSubtype=d;var y=function(){function t(){}return t.ERR_DOWNLOAD_FAILED="ERR_DOWNLOAD_FAILED",t}();e.ErrorCode=y;var v=function(){function t(){}return t.SYSTEM="SYSTEM",t}();e.ErrorType=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(64),s=r(43),o=r(175);e.GenerateErrorTelemetryAfterMethodThrows=function(n){return function(t,e,r){return i.afterMethodThrowsFactory(r,function(t){t instanceof o.TelemetryError&&s.SunbirdSdk.instance.telemetryService.error(n.env,t.errorCode,t.errorType,n.pageId,t.stack)})}}},function(t,e,r){"use strict";var a=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},u=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=r(5),s=r(65),n=r(10),i=function(){function t(t,e){this.apiConfig=t,this.apiService=e}return t.prototype.interceptRequest=function(t){var e=localStorage.getItem(c.KEY_USER_TOKEN);if(e){var r=t.headers;r["X-Authenticated-User-Token"]=e,t.headers=r}return t},t.prototype.onResponse=function(i,s,o){var t=this;return n.Observable.create(function(n){return a(t,void 0,void 0,function(){var e,r;return u(this,function(t){switch(t.label){case 0:return s.responseCode!==c.ResponseCode.HTTP_UNAUTHORISED&&n.next(s),s.body().message&&n.next(s),r=(e=n).next,[4,this.refreshToken(i,o)];case 1:return r.apply(e,[t.sent()]),n.complete(),[2]}})})})},t.prototype.refreshToken=function(n,i){return a(this,void 0,void 0,function(){var e,r;return u(this,function(t){switch(t.label){case 0:return[4,(e=new s.AuthUtil(this.apiService)).refreshSession(i,this.apiConfig.user_authentication.authUrl)];case 1:return r=t.sent(),[4,e.startSession(r)];case 2:return t.sent(),[2,i.invoke(n)]}})})},t}();e.SessionAuthenticator=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=function(){function t(t,e,r){this.context=t,this.dBVersion=e,this.appMigrationList=r,this.initialized=!1}return t.prototype.update=function(t){throw new Error("Method not implemented.")},t.prototype.init=function(){var e=this;this.initialized=!0,db.init(this.context.dbName,this.dBVersion,this.prepareMigrationList(),function(t){"onCreate"===t.method?e.onCreate():"onUpgrade"===t.method&&e.onUpgrade(t.oldVersion,t.newVersion)})},t.prototype.onCreate=function(){},t.prototype.onUpgrade=function(t,e){},t.prototype.execute=function(t){var e=new n.Subject;return db.execute(t,function(t){e.next(t),e.complete()},function(t){e.error(t)}),e},t.prototype.read=function(t){this.initialized||this.init();var e=new n.Subject;return db.read(t.distinct,t.table,t.columns,t.selection,t.selectionArgs,t.groupBy,t.having,t.orderBy,t.limit+"",function(t){e.next(t),e.complete()},function(t){e.error(t)}),e},t.prototype.insert=function(t){this.initialized||this.init();var e=new n.Subject;return db.insert(t.table,t.modelJson,function(t){e.next(t),e.complete()},function(t){e.error(t)}),e},t.prototype.prepareMigrationList=function(){var t=this.appMigrationList,r=[];return t.forEach(function(t){var e={};e.targetDbVersion=t.targetDbVersion,e.queryList=t.queries(),r.push(e)}),r},t.prototype.delete=function(t){throw new Error("Method not implemented.")},t.prototype.beginTransaction=function(){db.beginTransaction()},t.prototype.endTransaction=function(t){db.endTransaction(t)},t}();e.DbServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.decorate=function(t){return t},t.prototype.prepare=function(t){return{event:JSON.stringify(t),event_type:t.type,timestamp:(new Date).getTime(),priority:1}},t}();e.TelemetryDecoratorImpl=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=r(172),c=r(174),h=r(173),l=r(10),n=function(){function a(t,e){this.dbService=t,this.decorator=e}return a.prototype.audit=function(){},a.prototype.end=function(t,e,r,n,i,s,o){var a=new h.End;a.type=t,a.pageId=r,a.env=n,a.mode=e,i&&i.id&&(a.objId=i.id),i&&i.type&&(a.objType=i.type),i&&i.version&&(a.objVer=i.version),s&&(a.rollup=s),o&&(a.correlationData=o),this.save(a)},a.prototype.error=function(t,e,r,n,i){var s=new h.Error;s.env=t,s.errorCode=e,s.errorType=r,s.pageId=n,s.stacktrace=i,this.save(s)},a.prototype.impression=function(t,e,r,n,i,s,o,a,u){var c=new h.Impression;c.type=t,c.subType=e,c.pageId=r,c.env=n,c.objId=i||"",c.objType=s||"",c.objVer=o||"",void 0!==a&&(c.rollup=a),void 0!==u&&(c.correlationData=u),this.save(c)},a.prototype.interact=function(t,e,r,n,i,s,o,a){var u=new h.Interact;u.type=t,u.subType=e,u.pageId=n,u.id=n,u.env=r,null!==s&&(u.valueMap=s),void 0!==o&&(u.rollup=o),void 0!==a&&(u.correlationData=a),i&&i.id&&(u.objId=i.id),i&&i.type&&(u.objType=i.type),i&&i.version&&(u.objVer=i.version),this.save(u)},a.prototype.log=function(t,e,r,n,i){var s=new h.Log;s.level=t,s.message=e,s.env=r,s.type=n,s.params=i,this.save(s)},a.prototype.start=function(t,e,r,n,i,s){var o=new h.Start;o.type=n.type,o.pageId=t,o.env=e,o.mode=r,n&&n.id&&(o.objId=n.id),n&&n.type&&(o.objType=n.type),n&&n.version&&(o.objVer=n.version),void 0!==i&&(o.rollup=i),void 0!==s&&(o.correlationData=s),this.save(o)},a.prototype.event=function(t){return l.Observable.fromPromise(this.save(t))},a.prototype.import=function(t){throw new Error("Method not implemented.")},a.prototype.export=function(t){throw new Error("Method not implemented.")},a.prototype.getTelemetryStat=function(){var e=this,t="select count(*) from "+c.TelemetryEntry.TABLE_NAME,n="select sum("+c.TelemetryProcessedEntry.COLUMN_NAME_NUMBER_OF_EVENTS+") from "+c.TelemetryProcessedEntry.TABLE_NAME,i=0,s=0,o=new u.TelemetryStat;return l.Observable.create(function(r){e.dbService.execute(t).toPromise().then(function(t){return i=t[0],e.dbService.execute(n)}).then(function(t){s=t[0],o.unSyncedEventCount=i+s;var e=localStorage.getItem(a.KEY_SYNC_TIME);null!==e&&(o.lastSyncTime=parseInt(e,10)),r.next(o),r.complete()}).catch(function(t){r.error(t)})})},a.prototype.sync=function(){var t={table:c.TelemetryEntry.TABLE_NAME,limit:"1000"};throw this.dbService.read(t).toPromise().then(function(t){}).catch(function(t){}),new Error("Method not implemented.")},a.prototype.save=function(n){var i=this;return new Promise(function(e,r){var t={table:c.TelemetryEntry.TABLE_NAME,modelJson:JSON.stringify(i.decorator.prepare(i.decorator.decorate(n)))};i.dbService.insert(t).toPromise().then(function(t){e(0<t)}).catch(function(t){r(t)})})},a.KEY_SYNC_TIME="telemetry_sync_time",a}();e.TelemetryServiceImpl=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(516),i=r(65),s=function(){function t(t,e){this.apiConfig=t,this.apiService=e,this.authUtil=new i.AuthUtil(this.apiService),this.oauthHandler=new n.OauthHandler(this.apiService)}return t.prototype.getSession=function(){return this.authUtil.getSessionData()},t.prototype.login=function(){return this.oauthHandler.doLogin(this.apiConfig)},t.prototype.logout=function(){return this.oauthHandler.doLogout(this.apiConfig)},t}();e.AuthServiceImpl=s},function(t,e,r){"use strict";var o=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},a=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(517),n=r(65),s=r(518),u=r(10),c=function(){function t(t){this.apiService=t,this.authUtil=new n.AuthUtil(this.apiService)}return t.prototype.doLogin=function(s){var t=this;return u.Observable.create(function(i){customtabs.isAvailable(function(){return o(t,void 0,void 0,function(){var e=this;return a(this,function(t){return customtabs.launch(s.user_authentication.authUrl,function(n){return o(e,void 0,void 0,function(){var e,r;return a(this,function(t){switch(t.label){case 0:return r=(e=i).next,[4,this.resolveTokens(n,s)];case 1:return r.apply(e,[t.sent()]),i.complete(),[2]}})})},function(t){i.error(t)}),[2]})})},function(){customtabs.launchInBrowser(s.user_authentication.authUrl,function(n){return o(t,void 0,void 0,function(){var e,r;return a(this,function(t){switch(t.label){case 0:return r=(e=i).next,[4,this.resolveTokens(n,s)];case 1:return r.apply(e,[t.sent()]),[2]}})})},function(t){i.error(t)})})})},t.prototype.doLogout=function(t){var n=this;return u.Observable.create(function(r){customtabs.isAvailable(function(){customtabs.launch(t.user_authentication.logoutUrl,function(){return o(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.authUtil.endSession()];case 1:return t.sent(),r.next(void 0),r.complete(),[2]}})})},function(t){r.error(t)})},function(e){customtabs.launchInBrowser(t.user_authentication.logoutUrl,function(){return o(n,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.authUtil.endSession()];case 1:return t.sent(),r.next(void 0),r.complete(),[2]}})})},function(t){r.error(e)})})})},t.prototype.isGoogleSignupCallBackUrl=function(t){return-1!==t.indexOf("access_token")&&-1!==t.indexOf("refresh_token")},t.prototype.resolveTokens=function(r,n){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(!(e=new URL(r).searchParams))throw new Error("Unable to Authenticate, no params found");return this.isGoogleSignupCallBackUrl(r)?[4,(new i.GoogleSessionProvider).createSession({accessToken:e.get("access_token"),refreshToken:e.get("refresh_token")})]:[3,2];case 1:return t.sent(),[2,this.authUtil.getSessionData().toPromise()];case 2:return[4,new s.KeycloakSessionProvider(n,this.apiService).createSession(e.get("access_token"))];case 3:return t.sent(),[2,this.authUtil.getSessionData().toPromise()]}})})},t}();e.OauthHandler=c},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},i=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(5),o=function(){function t(){}return t.prototype.createSession=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){return[2,{userToken:s.JWTUtil.parseUserTokenFromAccessToken(e.accessToken),accessToken:e.accessToken,refreshToken:e.refreshToken}]})})},t}();e.GoogleSessionProvider=o},function(t,e,r){"use strict";var i=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},s=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),n=function(){function t(t,e){this.apiConfig=t,this.apiService=e}return t.prototype.createSession=function(n){return i(this,void 0,void 0,function(){var e,r;return s(this,function(t){switch(t.label){case 0:return e=(new o.Request.Builder).withApiToken(!1).withPath(this.apiConfig.user_authentication.authUrl).withType(o.HttpRequestType.POST).withBody(JSON.stringify({redirect_uri:this.apiConfig.baseUrl+"/"+this.apiConfig.user_authentication.redirectUrl,code:o.JWTUtil.parseUserTokenFromAccessToken(n),grant_type:"authorization_code",client_id:"android"})).build(),[4,this.apiService.fetch(e).toPromise()];case 1:return r=t.sent(),[2,r.body()]}})})},t}();e.KeycloakSessionProvider=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(520),i=r(521),s=r(522),o=r(523),a=r(524),u=function(){function t(t,e,r,n,i){this.courseServiceConfig=t,this.apiService=e,this.profileService=r,this.keyValueStore=n,this.sessionAuthenticator=i}return t.prototype.getBatchDetails=function(t){return new n.GetBatchDetailsHandler(this.apiService,this.courseServiceConfig,this.sessionAuthenticator).handle(t)},t.prototype.updateContentState=function(t){return new i.UpdateContentStateHandler(this.apiService,this.courseServiceConfig,this.sessionAuthenticator).handle(t)},t.prototype.getCourseBatches=function(t){return new s.GetCourseBatchesHandler(this.apiService,this.courseServiceConfig,this.sessionAuthenticator,this.profileService).handle(t)},t.prototype.getEnrolledCourses=function(t){return new o.GetEnrolledCourseHandler(this.keyValueStore,this.apiService,this.courseServiceConfig,this.sessionAuthenticator).handle(t)},t.prototype.enrollCourse=function(t){return new a.EnrollCourseHandler(this.apiService,this.courseServiceConfig,this.sessionAuthenticator).handle(t)},t}();e.CourseServiceImpl=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.courseServiceConfig=e,this.sessionAuthenticator=r,this.GET_BATCH_DETAILS_ENDPOINT="batch/read/"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.courseServiceConfig.apiPath+this.GET_BATCH_DETAILS_ENDPOINT+t.batchId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result.response})},t}();e.GetBatchDetailsHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.courseServiceConfig=e,this.sessionAuthenticator=r,this.UPDATE_CONTENT_STATE_ENDPOINT="content/state/update/"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.PATCH).withPath(this.courseServiceConfig.apiPath+this.UPDATE_CONTENT_STATE_ENDPOINT).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).withBody({request:t}).build();return this.apiService.fetch(e).map(function(t){return!!t.body.result.response})},t}();e.UpdateContentStateHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r,n){this.apiService=t,this.courseServiceConfig=e,this.sessionAuthenticator=r,this.profileService=n,this.GET_COURSE_BATCHES="batch/list/"}return t.prototype.handle=function(t){var r=this,e=(new n.Request.Builder).withType(n.HttpRequestType.POST).withPath(this.courseServiceConfig.apiPath+this.GET_COURSE_BATCHES).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).withBody({request:t}).build();return this.apiService.fetch(e).map(function(t){return Array.from(new Set(t.body.result.response.content))}).switchMap(function(e){return r.profileService.getServerProfiles({limit:e.length,identifiers:new Set(e.map(function(t){return t.createdBy})),fields:["firstName","lastName","identifier"]}).map(function(t){return e.forEach(function(e){e.creatorFirstName=t.find(function(t){return t.identifier===e.createdBy}).firstName,e.creatorLastName=t.find(function(t){return t.identifier===e.createdBy}).lastName}),e})})},t}();e.GetCourseBatchesHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(10),s=function(){function t(t,e,r,n){this.keyValueStore=t,this.apiService=e,this.courseServiceConfig=r,this.sessionAuthenticator=n,this.GET_ENROLLED_COURSES_ENDPOINT="user/enrollment/list/",this.STORED_ENROLLED_COURSES_PREFIX="enrolledCourses_"}return t.prototype.handle=function(e){var r=this;return this.keyValueStore.getValue(this.STORED_ENROLLED_COURSES_PREFIX+e.userId).mergeMap(function(t){return t?i.Observable.of(JSON.parse(t)):r.fetchFromServer(e).do(function(t){r.keyValueStore.setValue(r.STORED_ENROLLED_COURSES_PREFIX+e.userId,JSON.stringify(t))})})},t.prototype.fetchFromServer=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.courseServiceConfig.apiPath+this.GET_ENROLLED_COURSES_ENDPOINT+t.userId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t}();e.GetEnrolledCourseHandler=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.courseServiceConfig=e,this.sessionAuthenticator=r,this.ENROL_ENDPOINT="enrol/"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.POST).withPath(this.courseServiceConfig.apiPath+this.ENROL_ENDPOINT).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).withBody({request:t}).build();return this.apiService.fetch(e).map(function(){return!0})},t}();e.EnrollCourseHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(66),i=function(){function t(t,e,r,n,i,s,o){this.frameworkServiceConfig=t,this.keyValueStore=e,this.fileService=r,this.apiService=n,this.cachedChannelItemStore=i,this.cachedFrameworkItemStore=s,this.sessionAuthenticator=o,this.DB_KEY_CHANNEL_DETAILS="channel_details_key-",this.DB_KEY_FRAMEWORK_DETAILS="framework_details_key-"}return t.prototype.getChannelDetails=function(t){return new n.GetChannelDetailsHandler(this.apiService,this.frameworkServiceConfig,this.sessionAuthenticator,this.fileService,this.cachedChannelItemStore).handle(t)},t.prototype.getFrameworkDetails=function(t){return new n.GetFrameworkDetailsHandler(this.apiService,this.frameworkServiceConfig,this.sessionAuthenticator,this.fileService,this.cachedFrameworkItemStore).handle(t)},t.prototype.persistFrameworkDetails=function(t){var e=t.framework.identifier,r=this.DB_KEY_FRAMEWORK_DETAILS+e;return this.keyValueStore.setValue(r,JSON.stringify(t))},t}();e.FrameworkServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(44),i=r(5),s=function(){function t(t,e,r,n,i){this.apiService=t,this.frameworkServiceConfig=e,this.sessionAuthenticator=r,this.fileservice=n,this.cachedItemStore=i,this.GET_CHANNEL_DETAILS_ENDPOINT="channel/read",this.DB_KEY_CHANNEL_DETAILS="channel_details_key",this.CHANNEL_DETAILS_API_EXPIRATION_KEY="CHANNEL_DETAILS_API_EXPIRATION_KEY"}return t.prototype.handle=function(t){var e=this;return this.cachedItemStore.getCached(t.channelId,this.DB_KEY_CHANNEL_DETAILS,this.CHANNEL_DETAILS_API_EXPIRATION_KEY,function(){return e.fetchFromServer(t)},function(){return e.fetchFromFile()})},t.prototype.fetchFromServer=function(t){var e=(new i.Request.Builder).withType(i.HttpRequestType.GET).withPath(this.frameworkServiceConfig.apiPath+this.GET_CHANNEL_DETAILS_ENDPOINT+t.channelId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result.response})},t.prototype.fetchFromFile=function(){var t=n.Path.dirPathFromFilePath(this.frameworkServiceConfig.channelConfigFilePath),e=n.Path.fileNameFromFilePath(this.frameworkServiceConfig.channelConfigFilePath);return this.fileservice.readAsText(t,e).map(function(t){return JSON.parse(t)})},t}();e.GetChannelDetailsHandler=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(44),n=r(5),s=function(){function t(t,e,r,n,i){this.apiService=t,this.frameworkServiceConfig=e,this.sessionAuthenticator=r,this.fileservice=n,this.cachedItemStore=i,this.GET_FRAMEWORK_DETAILS_ENDPOINT="framework/read",this.DB_KEY_FRAMEWORK_DETAILS="framework_details_key",this.FRAMEWORK_DETAILS_API_EXPIRATION_KEY="FRAMEWORK_DETAILS_API_EXPIRATION_KEY"}return t.prototype.handle=function(t){var e=this;return this.cachedItemStore.getCached(t.frameworkId,this.DB_KEY_FRAMEWORK_DETAILS,this.FRAMEWORK_DETAILS_API_EXPIRATION_KEY,function(){return e.fetchFromServer(t)},function(){return e.fetchFromFile(t)})},t.prototype.fetchFromServer=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.frameworkServiceConfig.apiPath+this.GET_FRAMEWORK_DETAILS_ENDPOINT+t.frameworkId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result.response})},t.prototype.fetchFromFile=function(e){var t=this.frameworkServiceConfig.frameworkConfigFilePaths.find(function(t){return-1!==t.indexOf(e.frameworkId)});if(!t)throw new Error("File path does not exist");var r=i.Path.dirPathFromFilePath(t),n=i.Path.fileNameFromFilePath(t);return this.fileservice.readAsText(r,n).map(function(t){return JSON.parse(t)})},t}();e.GetFrameworkDetailsHandler=s},function(t,e,r){"use strict";var o=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},a=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=r(10),c=r(178),h=r(180),l=r(530),n=r(45),f=r(46),p=r(532),d=n.ContentEntry.COLUMN_NAME_LOCAL_DATA,i=function(){function t(t,e,r,n,i,s){this.contentServiceConfig=t,this.apiService=e,this.dbService=r,this.profileService=n,this.keyValueStore=i,this.sessionAuthenticator=s}return t.prototype.getContentDetails=function(t){return new c.GetContentDetailsHandler(this.dbService,this.contentServiceConfig,this.sessionAuthenticator,this.apiService).handle(t)},t.prototype.cancelImport=function(t){throw new Error("Not Implemented yet")},t.prototype.deleteContent=function(t){var e=this,n=[],i=new c.GetContentDetailsHandler(this.dbService),s=new p.DeleteContentHandler(this.dbService);return t.contentDeleteList.forEach(function(r){return o(e,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,i.getContentFromDB(r.contentId)];case 1:return(e=t.sent())&&e[0]?(n.push({identifier:r.contentId,status:h.ContentDeleteStatus.DELETED_SUCCESSFULLY}),f.ContentUtil.hasPreRequisites(e[0][d]),f.ContentUtil.hasChildren(e[0][d])?[4,s.deleteAllChildren(e[0],r.isChildContent)]:[3,3]):[3,5];case 2:t.sent(),t.label=3;case 3:return[4,s.deleteOrUpdateContent(e[0],!1,r.isChildContent)];case 4:return t.sent(),[3,6];case 5:n.push({identifier:r.contentId,status:h.ContentDeleteStatus.NOT_FOUND}),t.label=6;case 6:return[2]}})})}),u.Observable.of(n)},t.prototype.exportContent=function(t){throw new Error("Not Implemented yet")},t.prototype.getChildContents=function(e){var r=new l.ChildContentsHandler(this.dbService),n=e.hierarchyInfo;if(n){if(0<n.length&&n[n.length-1].identifier===e.contentId){var t=n.length;n.splice(t-1,1)}}else n=[];return this.dbService.read(c.GetContentDetailsHandler.getReadContentQuery(e.contentId)).mergeMap(function(t){return r.fetchChildrenOfContent(t[0],0,e.level,n)})},t.prototype.getContents=function(t){throw new Error("Not Implemented yet")},t.prototype.getDownloadState=function(){throw new Error("Not Implemented yet")},t.prototype.importContent=function(t){throw new Error("Not Implemented yet")},t.prototype.importEcar=function(t){throw new Error("Not Implemented yet")},t.prototype.nextContent=function(n,i){var t=this,s=new l.ChildContentsHandler(this.dbService);return this.dbService.read(c.GetContentDetailsHandler.getReadContentQuery(n[0].identifier)).mergeMap(function(r){return o(t,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,s.getContentsKeyList(r[0])];case 1:return e=t.sent(),[2,s.getNextContentFromDB(n,i,e)]}})})})},t.prototype.prevContent=function(n,i){var t=this,s=new l.ChildContentsHandler(this.dbService);return this.dbService.read(c.GetContentDetailsHandler.getReadContentQuery(n[0].identifier)).mergeMap(function(r){return o(t,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,s.getContentsKeyList(r[0])];case 1:return e=t.sent(),[2,s.getNextContentFromDB(n,i,e)]}})})})},t.prototype.subscribeForImportStatus=function(t){throw new Error("Not Implemented yet")},t.prototype.searchContent=function(t){throw new Error("Not Implemented yet")},t.prototype.cancelDownload=function(t){throw new Error("Not Implemented yet")},t}();e.ContentServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.mapContentDataToContentDBEntry=function(t){return{}},t.mapContentDBEntryToContent=function(t){return{}},t}();e.ContentMapper=n},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},p=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var d=r(46),y=r(531),v=r(45),l=r(67),b=r(178),i=r(181),f=v.ContentEntry.COLUMN_NAME_MIME_TYPE,s=function(){function t(t){this.dbService=t}return t.prototype.fetchChildrenOfContent=function(s,o,a,u){return n(this,void 0,void 0,function(){var e,r,n,i=this;return p(this,function(t){switch(t.label){case 0:return e=y.CotentMapper.mapContentDBEntryToContent(s),[4,this.getSortedChildrenList(s[v.ContentEntry.COLUMN_NAME_LOCAL_DATA],l.ChildContents.ALL)];case 1:return(r=t.sent())&&0<r.length?(u||(e.hierarchyInfo=[{identifier:s[v.ContentEntry.COLUMN_NAME_IDENTIFIER],contentType:s[v.ContentEntry.COLUMN_NAME_CONTENT_TYPE]}]),-1===a||o<=a?(n=e,[4,Promise.all(r.map(function(t){return i.fetchChildrenOfContent(t,o+1,a,u)}))]):[3,3]):[3,4];case 2:n.children=t.sent(),t.label=3;case 3:return[3,5];case 4:e.hierarchyInfo=u,t.label=5;case 5:return[2,e]}})})},t.prototype.getSortedChildrenList=function(a,u){return n(this,void 0,void 0,function(){var e,r,n,i,s,o;return p(this,function(t){if(e=JSON.parse(a),!(r=Array.of(e.children))||!r.length)return[2,[]];switch(r=r.sort(function(t,e){return t.index-e.index}),n=[],"",i=0,r.forEach(function(t){n.push(t.identifier),"".concat(" WHEN '"+t.identifier+"' THEN "+i),i+=1}),"",0<i&&"".concat(" ORDER BY CASE "+v.ContentEntry.COLUMN_NAME_IDENTIFIER+"  END"),s="",u){case l.ChildContents.DOWNLOADED.valueOf():s=" AND "+v.ContentEntry.COLUMN_NAME_CONTENT_STATE+"='"+l.State.ARTIFACT_AVAILABLE+"'";break;case l.ChildContents.SPINE.valueOf():s=" AND "+v.ContentEntry.COLUMN_NAME_CONTENT_STATE+"='"+l.State.ONLY_SPINE+"'";break;case l.ChildContents.ALL.valueOf():default:s=""}return o="select * from "+v.ContentEntry.TABLE_NAME+"\n                        where "+v.ContentEntry.COLUMN_NAME_IDENTIFIER+"\n                        in ('"+n.join(",")+"') "+s+" ",[2,this.dbService.execute(o).toPromise()]})})},t.prototype.getContentsKeyList=function(r){return n(this,void 0,void 0,function(){var s,o,a,u,c,e,h;return p(this,function(t){switch(t.label){case 0:s=[],o=new i.Stack,a=[],u="",o.push(r),e=function(){var e,r,n,i;return p(this,function(t){switch(t.label){case 0:return c=o.pop(),d.ContentUtil.hasChildren(c[v.ContentEntry.COLUMN_NAME_LOCAL_DATA])?[4,h.getSortedChildrenList(c[v.ContentEntry.COLUMN_NAME_LOCAL_DATA],l.ChildContents.ALL)]:[3,2];case 1:e=t.sent(),o.addAll(e),e.forEach(function(){a.push(c[v.ContentEntry.COLUMN_NAME_IDENTIFIER].concat("/",e[v.ContentEntry.COLUMN_NAME_IDENTIFIER]))}),t.label=2;case 2:if(u){for(r=void 0,n=u.split("/").length-1;0<=n&&(i=u.split("/")[n],!a.indexOf(i+"/"+c[v.ContentEntry.COLUMN_NAME_IDENTIFIER]));n--)u=u.substring(0,u.lastIndexOf("/"));l.MimeType.COLLECTION.valueOf()===c[f]?u=u+"/"+c[v.ContentEntry.COLUMN_NAME_IDENTIFIER]:(r=u+"/"+c[v.ContentEntry.COLUMN_NAME_IDENTIFIER],s.push(r))}else u=c[v.ContentEntry.COLUMN_NAME_IDENTIFIER];return[2]}})},h=this,t.label=1;case 1:return o.isEmpty()?[3,3]:[5,e()];case 2:return t.sent(),[3,1];case 3:return[2,s]}})})},t.prototype.getNextContentFromDB=function(h,l,f){return n(this,void 0,void 0,function(){var e,r,n,i,s,o,a,u,c;return p(this,function(t){switch(t.label){case 0:if(e=[],!(n=this.getNextContentIdentifier(h,l,f)))return[3,6];i=n.split("/"),s=i.length,o=!0,a=0,t.label=1;case 1:return a<s-1?[4,new b.GetContentDetailsHandler(this.dbService).getContentFromDB(i[a])]:[3,4];case 2:if(!(u=t.sent())[0])return o=!1,[3,4];e.push({identifier:u[0][v.ContentEntry.COLUMN_NAME_IDENTIFIER],contentType:u[0][v.ContentEntry.COLUMN_NAME_CONTENT_TYPE]}),t.label=3;case 3:return a++,[3,1];case 4:return Boolean(o)?[4,new b.GetContentDetailsHandler(this.dbService).getContentFromDB(i[s-1])]:[3,6];case 5:(c=t.sent())&&c[0]&&((r=y.CotentMapper.mapContentDBEntryToContent(c[0])).hierarchyInfo=h,r.rollup=d.ContentUtil.getContentRollup(r.identifier,r.hierarchyInfo)),t.label=6;case 6:return[2,r]}})})},t.prototype.getNextContentIdentifier=function(t,e,r){var n,i="";t.forEach(function(t){i=i?i.concat("/",t.identifier):t.identifier}),i=i.concat("/",e);var s=r.indexOf(i);return 0<s&&(n=r[s-1]),n},t}();e.ChildContentsHandler=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(46),n=function(){function t(){}return t.mapContentDataToContentDBEntry=function(t){return{}},t.mapContentDBEntryToContent=function(t){var e,r=JSON.parse(""),n=JSON.parse(r.serverData),i=JSON.parse(r.localData);return r.localData&&(e=r.localData),r.serverData&&(r.localData&&s.ContentUtil.isAvailableLocally(r.contentState)?(i.streamingUrl||(i.streamingUrl=n.streamingUrl),i.previewUrl||(i.previewUrl=n.previewUrl),i.me_totalRatings||(i.me_totalRatings=n.me_totalRatings),i.me_averageRating||(i.me_averageRating=n.me_averageRating),i.size||(i.size=n.size)):e=r.serverData),{identifier:r.identifier,contentData:e,isUpdateAvailable:s.ContentUtil.isUpdateAvailable(n,i),mimeType:r.mimeType,basePath:r.basePath,contentType:r.contentType,isAvailableLocally:s.ContentUtil.isAvailableLocally(r.contentState),referenceCount:r.referenceCount,sizeOnDevice:r.sizeOnDevice,lastUsedTime:r.lastUsedTime,lastUpdatedTime:r.lastUpdatedTime}},t}();e.CotentMapper=n},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},a=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=r(45),c=r(46),i=r(179),h=r(67),l=r(10),f=r(181),s=u.ContentEntry.COLUMN_NAME_SERVER_LAST_UPDATED_ON,o=u.ContentEntry.COLUMN_NAME_LOCAL_LAST_UPDATED_ON,p=u.ContentEntry.COLUMN_NAME_IDENTIFIER,d=u.ContentEntry.COLUMN_NAME_REF_COUNT,y=u.ContentEntry.COLUMN_NAME_VISIBILITY,v=u.ContentEntry.COLUMN_NAME_MIME_TYPE,b=u.ContentEntry.COLUMN_NAME_PATH,g=function(){function t(t){this.dbService=t}return t.prototype.deleteAllPreRequisites=function(t,e){return n(this,void 0,void 0,function(){return a(this,function(t){return[2]})})},t.prototype.deleteAllChildren=function(s,o){return n(this,void 0,void 0,function(){var e,r,n,i;return a(this,function(t){switch(t.label){case 0:(e=new f.Stack).push(s),t.label=1;case 1:return e.isEmpty()?[3,6]:(r=e.pop(),c.ContentUtil.hasChildren(r[u.ContentEntry.COLUMN_NAME_LOCAL_DATA])?(n=c.ContentUtil.getChildContentsIdentifiers(r[u.ContentEntry.COLUMN_NAME_LOCAL_DATA]),[4,this.findAllContentsFromDbWithIdentifiers(n)]):[3,3]);case 2:i=t.sent(),e.addAll(i),t.label=3;case 3:return s[p]===r[p]?[3,5]:[4,this.deleteOrUpdateContent(r,!0,o)];case 4:t.sent(),t.label=5;case 5:return[3,1];case 6:return[2]}})})},t.prototype.deleteOrUpdateContent=function(t,e,r){var n,i=t[d],s=t[y],o=t[v],a=t[b];if(Boolean(r)?(1<i&&s===h.Visibility.DEFAULT&&(i-=1,s=h.Visibility.PARENT.valueOf()),n=o===h.MimeType.COLLECTION?h.State.ARTIFACT_AVAILABLE:h.State.ONLY_SPINE):(n=o===h.MimeType.COLLECTION&&1<i?h.State.ARTIFACT_AVAILABLE:1<i&&Boolean(e)?h.State.ARTIFACT_AVAILABLE:(s===h.Visibility.DEFAULT&&(s=h.Visibility.PARENT.valueOf()),h.State.ONLY_SPINE),i-=1),a){if(n===h.State.ONLY_SPINE)c.ContentUtil.getFirstPartOfThePathNameOnLastDelimiter(a);return this.dbService.update({table:u.ContentEntry.TABLE_NAME,modelJson:t}).toPromise()}return l.Observable.of(!1).toPromise()},t.prototype.updateContentInDB=function(t){},t.prototype.findAllContentsFromDbWithIdentifiers=function(t){return this.dbService.read({table:u.ContentEntry.TABLE_NAME,selection:(new i.QueryBuilder).where("? in ('?') AND ? > 0").args([u.ContentEntry.COLUMN_NAME_IDENTIFIER,t.join(","),u.ContentEntry.COLUMN_NAME_REF_COUNT]).end().build(),orderBy:"order by "+o+" desc, "+s+" desc"}).toPromise()},t}();e.DeleteContentHandler=g},function(t,e,r){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ProfileType||(e.ProfileType={})).STUDENT="student",n.TEACHER="teacher",(i=e.ProfileSource||(e.ProfileSource={})).SERVER="server",i.LOCAL="local"},function(t,e,r){var o=r(535),a=r(536);t.exports=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;s<16;++s)e[n+s]=i[s];return e||a(i)}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,n=i;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(68),s=r(16),o=r(10),a=r(184),u=r(185),c=r(183),h=r(538),l=r(539),f=r(540),p=r(541),d=r(182),n=function(){function n(t,e,r,n,i,s){this.profileServiceConfig=t,this.dbService=e,this.apiService=r,this.cachedItemStore=n,this.keyValueStore=i,this.sessionAuthenticator=s}return n.prototype.createProfile=function(t){var e,r=s.NoSqlFormatter.toDb(t);return this.dbService.insert({table:a.ProfileEntry.TABLE_NAME,modelJson:s.ObjectMapper.map(r,(e={},e[u.ProfileConstant.BOARD]=r.board,e[u.ProfileConstant.GRADE]=r.Grade,e[u.ProfileConstant.HANDLE]=r.handle,e[u.ProfileConstant.SYLLABUS]=r.syllabus,e[u.ProfileConstant.SOURCE]=r.source,e[u.ProfileConstant.MEDIUM]=r.medium,e[u.ProfileConstant.PROFILE_TYPE]=r.profileType,e[u.ProfileConstant.GRADE_VALUE]=r.gradeValue,e[u.ProfileConstant.SUBJECT]=r.subject,e[u.ProfileConstant.UID]=c.UniqueId.generateUniqueId(),e[u.ProfileConstant.CREATED_AT]=Date.now(),e))}),o.Observable.of(t)},n.prototype.deleteProfile=function(t){return this.dbService.delete({table:a.ProfileEntry.TABLE_NAME,selection:u.ProfileConstant.UID+" = ?",selectionArgs:['"'+t+'"']})},n.prototype.updateServerProfile=function(t){return new l.UpdateServerProfileInfoHandler(this.apiService,this.profileServiceConfig,this.sessionAuthenticator).handle(t)},n.prototype.getServerProfiles=function(t){return new f.SearchServerProfileHandler(this.apiService,this.profileServiceConfig,this.sessionAuthenticator).handle(t)},n.prototype.getTenantInfo=function(t){return new h.TenantInfoHandler(this.apiService,this.profileServiceConfig,this.sessionAuthenticator).handle(t)},n.prototype.getAllProfiles=function(t){return t?t.groupId?t.groupId&&(t.local||t.server)?this.dbService.execute("\n            SELECT * FROM "+a.ProfileEntry.TABLE_NAME+" LEFT JOIN "+a.GroupProfileEntry.TABLE_NAME+" ON\n            "+u.GroupProfileConstant.GID+' = "'+t.groupId+'" AND\n            '+u.ProfileConstant.SOURCE+' = "'+(t.local?i.ProfileSource.LOCAL:i.ProfileSource.SERVER)+'"\n        '):this.dbService.execute("\n            SELECT * FROM "+a.ProfileEntry.TABLE_NAME+" LEFT JOIN "+a.GroupProfileEntry.TABLE_NAME+" ON\n            "+u.GroupProfileConstant.GID+' = "'+t.groupId+'"\n        '):this.dbService.read({table:a.ProfileEntry.TABLE_NAME,selection:u.ProfileConstant.SOURCE+" = ?",selectionArgs:[t.local?i.ProfileSource.LOCAL:i.ProfileSource.SERVER],columns:[]}):this.dbService.read({table:a.ProfileEntry.TABLE_NAME,columns:[]})},n.prototype.createGroup=function(t){var e,r=s.NoSqlFormatter.toDb(t);return void 0!==t&&this.dbService.insert({table:a.GroupEntry.TABLE_NAME,modelJson:(e={},e[u.GroupsConstant.GID]=c.UniqueId.generateUniqueId(),e[u.GroupsConstant.NAME]=r.groupName,e[u.GroupsConstant.CREATED_AT]=Date.now(),e[u.GroupsConstant.GRADE]=r.grade,e[u.GroupsConstant.GRADE_VALUE]=r.gradeValue,e[u.GroupsConstant.SYLLABUS]=r.syllabus,e[u.GroupsConstant.UPDATED_AT]=Date.now(),e)}),o.Observable.of(t)},n.prototype.deleteGroup=function(t){var e=this;return this.dbService.beginTransaction(),o.Observable.zip(this.dbService.delete({table:a.GroupEntry.TABLE_NAME,selection:u.GroupsConstant.GID+" = ?",selectionArgs:['"'+t+'"']}),this.dbService.delete({table:a.GroupProfileEntry.TABLE_NAME,selection:u.GroupProfileConstant.GID+" = ?",selectionArgs:['"'+t+'"']})).map(function(){return e.dbService.endTransaction(!0),1})},n.prototype.updateGroup=function(t){var e,r=s.NoSqlFormatter.toDb(t);return this.dbService.update({table:a.GroupEntry.TABLE_NAME,selection:"gid = ?",modelJson:(e={},e[u.GroupsConstant.NAME]=r.name,e[u.GroupsConstant.SYLLABUS]=r.syllabus,e[u.GroupsConstant.UPDATED_AT]=Date.now(),e[u.GroupsConstant.GRADE]=r.grade,e[u.GroupsConstant.GRADE_VALUE]=r.gradeValueMap,e)}),o.Observable.of(t)},n.prototype.getAllGroup=function(t){return t.uid?this.dbService.execute("\n            SELECT * FROM "+a.GroupEntry.TABLE_NAME+" LEFT JOIN "+a.GroupProfileEntry.TABLE_NAME+" ON\n            "+u.GroupsConstant.GID+" = "+u.GroupProfileConstant.GID+" WHERE\n            "+u.GroupProfileConstant.UID+' = "'+t.uid+"\n        "):this.dbService.read({table:a.GroupEntry.TABLE_NAME,columns:[]})},n.prototype.addProfilesToGroup=function(r){var n=this;return this.dbService.delete({table:a.GroupProfileEntry.TABLE_NAME,selection:u.GroupProfileConstant.GID+" = ?",selectionArgs:['"'+r.groupId+'"']}).do(function(){n.dbService.beginTransaction()}).switchMap(function(){return o.Observable.from(r.uidList).mergeMap(function(t){var e;return n.dbService.insert({table:a.GroupProfileEntry.TABLE_NAME,modelJson:(e={},e[u.GroupProfileConstant.GID]=r.groupId,e[u.GroupProfileConstant.UID]=t,e)})})}).do(function(){n.dbService.endTransaction(!0)}).catch(function(t){return n.dbService.endTransaction(!1),o.Observable.throw(t)})},n.prototype.getServerProfilesDetails=function(t){return new p.GetServerProfileDetailsHandler(this.apiService,this.profileServiceConfig,this.sessionAuthenticator,this.cachedItemStore).handle(t)},n.prototype.getCurrentProfile=function(){var e=this;return this.getCurrentProfileSession().mergeMap(function(t){return e.dbService.read({table:a.GroupProfileEntry.TABLE_NAME,selection:u.ProfileConstant.UID+" = ?",selectionArgs:['"'+t.uid+'"']}).map(function(t){return t&&t[0]})})},n.prototype.setCurrentProfile=function(t){var r=this;return this.dbService.read({table:a.GroupProfileEntry.TABLE_NAME,selection:u.ProfileConstant.UID+" = ?",selectionArgs:['"'+t+'"']}).map(function(t){return t&&t[0]}).mergeMap(function(t){var e=new d.ProfileSession(t.uid);return r.keyValueStore.setValue(n.KEY_USER_SESSION,JSON.stringify(e))})},n.prototype.getCurrentProfileSession=function(){return this.keyValueStore.getValue(n.KEY_USER_SESSION).map(function(t){return JSON.parse(t)})},n.KEY_USER_SESSION="session",n}();e.ProfileServiceImpl=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.tenantServiceConfig=e,this.sessionAuthenticator=r,this.GET_TENANT_INFO_ENDPOINT="tenant/info"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.tenantServiceConfig.apiPath+this.GET_TENANT_INFO_ENDPOINT+t.slug).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t}();e.TenantInfoHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.updateUserInfoConfig=e,this.sessionAuthenticator=r,this.GET_SERVER_PROFILE_INFO_API="update"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.PATCH).withPath(this.updateUserInfoConfig.apiPath+this.GET_SERVER_PROFILE_INFO_API+t.userId+"/"+t.frameWork).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).withBody({request:t}).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t}();e.UpdateServerProfileInfoHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r){this.apiService=t,this.searchServiceConfig=e,this.sessionAuthenticator=r,this.GET_SEARCH_USER_ENDPOINT="search"}return t.prototype.handle=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.POST).withPath(this.searchServiceConfig.searchProfilePath+this.GET_SEARCH_USER_ENDPOINT+t.identifiers).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).withBody({request:t}).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t}();e.SearchServerProfileHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=function(){function t(t,e,r,n){this.apiService=t,this.profileServiceConfig=e,this.sessionAuthenticator=r,this.cachedItemStore=n,this.GET_SERVER_PROFILE_DETAILS_ENDPOINT="read",this.USER_PROFILE_DETAILS_KEY_PREFIX="serverProfileDetails"}return t.prototype.handle=function(t){var e=this;return this.cachedItemStore.getCached(t.userId,this.USER_PROFILE_DETAILS_KEY_PREFIX,this.USER_PROFILE_DETAILS_KEY_PREFIX,function(){return e.fetchFormServer(t)})},t.prototype.fetchFormServer=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.GET).withPath(this.profileServiceConfig.apiPath+this.GET_SERVER_PROFILE_DETAILS_ENDPOINT+t.userId).withApiToken(!0).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t}();e.GetServerProfileDetailsHandler=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(186),n=function(){function t(t){this.dbService=t}return t.prototype.getValue=function(t){return this.dbService.read({table:o.KeyValueStoreEntry.TABLE_NAME,columns:[],selection:o.KeyValueStoreEntry.KEY+" = ?",selectionArgs:['"'+t+'"']}).map(function(t){return t[0]})},t.prototype.setValue=function(n,i){var s=this;return this.getValue(n).mergeMap(function(t){var e,r;return t?s.dbService.update({table:o.KeyValueStoreEntry.TABLE_NAME,selection:o.KeyValueStoreEntry.KEY+" = ?",selectionArgs:['"'+n+'"'],modelJson:(e={},e[o.KeyValueStoreEntry.KEY]=n,e[o.KeyValueStoreEntry.VALUE]=i,e)}):s.dbService.insert({table:o.KeyValueStoreEntry.TABLE_NAME,modelJson:(r={},r[o.KeyValueStoreEntry.VALUE]=i,r)}).map(function(t){return 0<t})})},t}();e.KeyValueStoreImpl=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(544),i=function(){function t(t,e,r,n,i){this.formServiceConfig=t,this.apiService=e,this.fileService=r,this.cachedItemStore=n,this.sessionAuthenticator=i}return t.prototype.getForm=function(t){return new n.GetFormHandler(this.apiService,this.formServiceConfig,this.fileService,this.sessionAuthenticator,this.cachedItemStore).handle(t)},t}();e.FormServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(44),s=function(){function t(t,e,r,n,i){this.apiService=t,this.formServiceConfig=e,this.fileService=r,this.sessionAuthenticator=n,this.cachedItemStore=i,this.GET_FORM_REQUEST_ENDPOINT="form/read",this.STORED_FORM="form-"}return t.prototype.handle=function(t){var e=this;return this.cachedItemStore.getCached(this.getIdForRequest(t),this.STORED_FORM,this.STORED_FORM,function(){return e.fetchFormServer(t)},function(){return e.fetchFilePath()})},t.prototype.getIdForRequest=function(t){var e="";return e+=t.type+t.subType+t.rootOrgId,t.frameWork||(e+=!1),e},t.prototype.fetchFormServer=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.POST).withPath(this.formServiceConfig.apiPath+this.GET_FORM_REQUEST_ENDPOINT+this.getIdForRequest(t)).withApiToken(!0).withBody(t).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t.prototype.fetchFilePath=function(){var t=i.Path.dirPathFromFilePath(this.formServiceConfig.formFilePath),e=i.Path.fileNameFromFilePath(this.formServiceConfig.formFilePath);return this.fileService.readAsText(t,e).map(function(t){return JSON.parse(t)})},t}();e.GetFormHandler=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(10),n=function(){function t(t,e){this.keyValueStore=t,this.apiConfig=e}return t.prototype.getCached=function(e,r,n,i,s,o){var a=this;return this.isItemCachedInDb(n,e).mergeMap(function(t){return t?a.isItemTTLExpired(n,e,o||a.apiConfig.cached_requests.timeToLive).mergeMap(function(t){return t?a.keyValueStore.getValue(r+"-"+e).map(function(t){return JSON.parse(t)}).do(function(){i().switchMap(function(t){return a.saveItem(e,n,r,t)}).subscribe(function(){})}):a.keyValueStore.getValue(r+"-"+e).map(function(t){return JSON.parse(t)})}):s?s().switchMap(function(t){return a.saveItem(e,n,r,t)}):i().switchMap(function(t){return a.saveItem(e,n,r,t)})})},t.prototype.isItemCachedInDb=function(t,e){return localStorage.getItem(t+"-"+e)?i.Observable.of(!0):i.Observable.of(!1)},t.prototype.isItemTTLExpired=function(t,e,r){var n=Number(localStorage.getItem(t+"-"+e));return r<Date.now()-n?i.Observable.of(!1):i.Observable.of(!0)},t.prototype.saveItem=function(t,e,r,n){return i.Observable.zip(this.saveItemTTL(t,e),this.saveItemToDb(t,r,n)).switchMap(function(){return i.Observable.of(n)})},t.prototype.saveItemTTL=function(t,e){return localStorage.setItem(e+"-"+t,Date.now()+""),i.Observable.of(!0)},t.prototype.saveItemToDb=function(t,e,r){return this.keyValueStore.setValue(e+"-"+t,r)},t}();e.CachedItemStoreImpl=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(547),i=function(){function t(t,e,r,n,i){this.apiService=t,this.pageAssembleServiceConfig=e,this.fileService=r,this.sessionAuthenticator=n,this.cachedItemStore=i}return t.prototype.getPageAssemble=function(t){return new n.PageAssemblerHandler(this.apiService,this.pageAssembleServiceConfig,this.fileService,this.cachedItemStore,this.sessionAuthenticator).handle(t)},t}();e.PageAssembleServiceImpl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(44),s=function(){function t(t,e,r,n,i){this.apiService=t,this.pageApiServiceConfig=e,this.fileService=r,this.cachedItemStore=n,this.sessionAuthenticator=i,this.KEY_PAGE_ASSEMBLE="pageAssemble-",this.PAGE_ASSEMBLE_ENDPOINST="page/assemble"}return t.prototype.handle=function(t){var e=this;return this.cachedItemStore.getCached(this.getIdForDb(t),this.KEY_PAGE_ASSEMBLE,this.KEY_PAGE_ASSEMBLE,function(){return e.fetchFromServer(t)},function(){return e.fetchFromFilePath()})},t.prototype.getIdForDb=function(t){var e="";return e+=t.name+t.mode+t.filters},t.prototype.fetchFromServer=function(t){var e=(new n.Request.Builder).withType(n.HttpRequestType.POST).withPath(this.pageApiServiceConfig.apiPath+this.PAGE_ASSEMBLE_ENDPOINST+this.getIdForDb(t)).withApiToken(!0).withBody(t).withInterceptors([this.sessionAuthenticator]).build();return this.apiService.fetch(e).map(function(t){return t.body.result})},t.prototype.fetchFromFilePath=function(){var t=i.Path.dirPathFromFilePath(this.pageApiServiceConfig.filePath),e=i.Path.fileNameFromFilePath(this.pageApiServiceConfig.filePath);return this.fileService.readAsText(t,e).map(function(t){return JSON.parse(t)})},t}();e.PageAssemblerHandler=s},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(s,o,a,u){return new(a||(a=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,n)}i((u=u.apply(s,o||[])).next())})},i=this&&this.__generator||function(r,n){var i,s,o,t,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(){}return t.prototype.getString=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){return[2,localStorage.getItem(e)]})})},t.prototype.getStringWithoutPrefix=function(t){throw new Error("Deprecated")},t.prototype.putString=function(t,e){return localStorage.setItem(t,e)},t}();e.SharedPreferencesImpl=s},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var s=r(16),o=r(186),a=function(t){function e(){return t.call(this,1)||this}return i(e,t),e.prototype.queries=function(){return[o.KeyValueStoreEntry.createTable()]},e}(s.Migration);e.KeyValueStoreMigration=a},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var s=r(16),o=r(184),a=function(t){function e(){return t.call(this,1)||this}return i(e,t),e.prototype.queries=function(){return[o.ProfileEntry.createTable()]},e}(s.Migration);e.ProfileEntryMigration=a;var u=function(t){function e(){return t.call(this,1)||this}return i(e,t),e.prototype.queries=function(){return[o.GroupProfileEntry.createTable()]},e}(s.Migration);e.GroupProfileEntryMigration=u;var c=function(t){function e(){return t.call(this,1)||this}return i(e,t),e.prototype.queries=function(){return[o.GroupEntry.createTable()]},e}(s.Migration);e.GroupEntryMigration=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(43),i=r(64),s=function(t){n.SunbirdSdk.instance.telemetryService.interact(t.interactType,t.subType,t.env,t.pageId,t.object,t.values,t.rollup,t.corRelationList)};e.GenerateInteractTelemetryAfterMethod=function(n){return function(t,e,r){return i.afterMethodFactory(r,function(){s(n)})}},e.GenerateInteractTelemetryBeforeMethod=function(n){return function(t,e,r){return i.beforeMethodFactory(r,function(){s(n)})}},e.GenerateInteractTelemetryAfterMethodResolves=function(n){return function(t,e,r){return i.afterMethodResolvesFactory(r,function(){s(n)})}},e.GenerateInteractTelemetryAfterMethodRejects=function(n){return function(t,e,r){return i.afterMethodRejectsFactory(r,function(){s(n)})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(43),i=r(64),s=function(t){n.SunbirdSdk.instance.telemetryService.impression(t.impressionType,t.subType,t.pageId,t.env,t.objectId,t.objectType,t.objectVersion,t.rollup,t.corRelationList)};e.GenerateImpressionTelemetryAfterMethod=function(n){return function(t,e,r){return i.afterMethodFactory(r,function(){s(n)})}},e.GenerateImpressionTelemetryBeforeMethod=function(n){return function(t,e,r){return i.beforeMethodFactory(r,function(){s(n)})}},e.GenerateImpressionTelemetryAfterMethodResolves=function(n){return function(t,e,r){return i.afterMethodResolvesFactory(r,function(){s(n)})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.generateBackClickedTelemetry=function(t,e,r,n,i){return{}},t.generatePageViewTelemetry=function(t,e,r){return{}},t.generateSpineLoadingTelemetry=function(t,e){return{}},t.generateCancelDownloadTelemetry=function(t){return{}},t.generateDownloadAllClickTelemetry=function(t,e,r,n){return{}},t.generatePullToRefreshTelemetry=function(t,e){return{}},t.generateReadLessOrReadMore=function(t,e,r,n){return{}},t.generateProfilePopulatedTelemetry=function(t,e,r){return{}},t.generateExtraInfoTelemetry=function(t,e){return{}},t.generateContentCancelClickedTelemetry=function(t,e){return{}},t}();e.TelemetryRequestFactory=n},function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(180)),n(e(555))},function(t,e,r){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.SortOrder||(e.SortOrder={})).ASC="asc",n.DESC="desc",(i=e.ContentImportStatus||(e.ContentImportStatus={}))[i.NOT_FOUND=-1]="NOT_FOUND",i[i.ENQUEUED_FOR_DOWNLOAD=0]="ENQUEUED_FOR_DOWNLOAD",i[i.DOWNLOAD_STARTED=1]="DOWNLOAD_STARTED",i[i.DOWNLOAD_FAILED=2]="DOWNLOAD_FAILED",i[i.DOWNLOAD_COMPLETED=3]="DOWNLOAD_COMPLETED",i[i.IMPORT_STARTED=4]="IMPORT_STARTED",i[i.IMPORT_FAILED=5]="IMPORT_FAILED",i[i.NOT_COMPATIBLE=6]="NOT_COMPATIBLE",i[i.CONTENT_EXPIRED=7]="CONTENT_EXPIRED",i[i.ALREADY_EXIST=8]="ALREADY_EXIST",i[i.IMPORT_COMPLETED=100]="IMPORT_COMPLETED"},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(557))},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.PageName||(e.PageName={})).RESOURCE="Resource",n.COURSE="Course",n.DIAL_CODE="DIAL Code Consumption"}])});